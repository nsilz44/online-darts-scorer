(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"9JAY":function(e,t,n){"use strict";n.d(t,"a",function(){return RequestPermission});var o=n("q1tI"),a=n.n(o),r=n("eoB5"),i=n("ttZb"),l=n("LIIV"),s=n("LvDl"),c=n.n(s),u=n("Bdpz"),p=n("htxa"),d=n("OQZp"),m=n("cMcQ"),f=n("EgWK");function _templateObject2(){var e=_taggedTemplateLiteral(["\n    query ($id: ID!) {\n      api: apiMeta(id: $id) {\n        name\n      }\n    }\n  "]);return _templateObject2=function _templateObject2(){return e},e}function _templateObject(){var e=_taggedTemplateLiteral(["\n    query ($id: ID!) {\n      collection(id: $id) {\n        name\n      }\n    }\n  "]);return _templateObject=function _templateObject(){return e},e}function _taggedTemplateLiteral(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var h={collection:Object(l.b)(_templateObject()),api:Object(l.b)(_templateObject2())};function EmptyStateBody(e){var t=Object(d.d)(e.accessMode)?"edit":"view or edit",n=Object(d.f)(e.entityType);return a.a.createElement("div",{className:"request-access__permission__description"},"The ",n," ",a.a.createElement("strong",null,e.entityName)," hasn't been shared with you.",a.a.createElement("br",null),"Request access to ",t," this ",n,".")}function RequestPermission(e){var t=e.location.pathname.split("/"),n=e.entityType,l=t[2],s=a.a.createElement(r.Button,{className:"request-access__permission-btn",pmStyle:"primary",size:"md",onClick:function onClick(){u.s.goToRoute("/request-access?entityType=".concat(n,"&entityId=").concat(l,"&type=share_entity"))}},"Request Access"),d=Object(i.c)(h[n],{variables:{id:l}}),g=d.loading,y=d.error,b=d.data,v=m.c[n]||n;return Object(o.useEffect)(function(){u.a.recordEvent("collectionAccess")},[]),y?"FORBIDDEN"===c.a.get(y,"graphQLErrors[0].extensions.code")?a.a.createElement(p.C,{description:"This ".concat(v," belongs to another team. To access it, switch accounts."),statusCode:"403",title:"You donâ€™t have access to this"}):a.a.createElement(f.a,null):g||c.a.isEmpty(b)?a.a.createElement(r.Loader,{className:"pm-page-center",pmStyle:"secondary",size:"xl"}):a.a.createElement(p.t,null,a.a.createElement("div",{className:"request-access__permission"},a.a.createElement(p.x,{action:s,body:a.a.createElement(EmptyStateBody,{accessMode:e.accessMode,entityName:c.a.get(b,[n,"name"],""),entityType:v}),imageSrc:"".concat("https://static.postman.co/img","/permissions.svg"),title:"You don't have access to this ".concat(v)})))}},EHav:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n("q1tI"),a=n.n(o),r=n("eoB5"),i=n("LvDl"),l=n.n(i),s=n("W6Kq"),c=n("OQZp"),u=n("htxa"),p=n("Bdpz");function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toConsumableArray(e){return function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function UserDropdownOption(e){return a.a.createElement("div",{className:"workspace-invite__option"},a.a.createElement(r.UserIcon,{url:e.profilePicUrl,userId:e.id}),e.name||e.username||e.email)}function UserDropdown(e){return a.a.createElement("div",{className:"workspace-invite__input",ref:e.setInputRef},a.a.createElement(r.SelectDropdown,{block:!0,searchable:!0,autosize:!1,className:"workspace-invite__select",filterOption:p.x.userFilter,label:e.placeholder||"Enter name or email",labelKey:"name",noResultsText:e.allowTeamInvite?"Press Enter to invite this user to your team":"No users found",optionRenderer:UserDropdownOption,options:e.options,size:"md",value:e.value,valueKey:"id",onBlurResetsInput:!1,onChange:e.onAdd,onInputKeyDown:e.allowTeamInvite&&function handleInputKeyDown(t){var n=t.target.value;"Enter"===t.key&&p.t.isEmail(n)&&!l.a.find(e.options,{email:"".concat(n)})&&(e.onAdd({email:t.target.value,teamInvite:!0}),t.preventDefault())}}),a.a.createElement(r.Icon,{name:e.icon||"add",size:"sm"}))}var d=function(e){function WorkspaceInviteForm(e){var t;return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,WorkspaceInviteForm),(t=function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}(this,_getPrototypeOf(WorkspaceInviteForm).call(this,e))).state=t.getState(e),t.handleAdd=t.handleAdd.bind(_assertThisInitialized(t)),t.handleRemove=t.handleRemove.bind(_assertThisInitialized(t)),t.handleUpdate=t.handleUpdate.bind(_assertThisInitialized(t)),t.setInputRef=t.setInputRef.bind(_assertThisInitialized(t)),t}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(WorkspaceInviteForm,o["Component"]),function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(WorkspaceInviteForm,[{key:"UNSAFE_componentWillReceiveProps",value:function UNSAFE_componentWillReceiveProps(e){var t=l.a.get(this.props,"users.length")!==l.a.get(e,"users.length");(!l.a.isEqual(this.props.invitees,e.invitees)||t)&&this.setState(this.getState(e))}},{key:"getState",value:function getState(e){var t=e.invitees||[],n=e.users||[],o=t.map(function(e){return"".concat(e.id)});return{users:n.filter(function(e){return o.indexOf("".concat(e.id))<0}),invitees:t,error:null,value:null}}},{key:"handleAdd",value:function handleAdd(e){var t=this,n={selectedOption:this.props.hideOptions?null:this.props.defaultOption||l.a.get(this.props,"permissions.0.value")},o=this.state.invitees.filter(function(e){return e.teamInvite}),a=this.props.maxTeamInvites;return this.props.canSendInvites&&e.teamInvite&&"number"==typeof a&&o.length+1>a?this.setState({error:"You have used up all your user slots. Add more slots to invite users to your team."}):l.a.find(this.state.invitees,{email:e.email})?this.setState({error:"".concat(e.email," user has already been invited to this workspace.")}):this.setState(function(t){return{users:t.users.filter(function(t){return t.id!==e.id}),invitees:[].concat(_toConsumableArray(t.invitees),[l.a.assign(e,n)]),error:null,value:""}},function(){t.inputRef.querySelector(".Select-input input").blur(),t.props.onChange(t.state.invitees)})}},{key:"handleRemove",value:function handleRemove(e){var t=this,n=e;this.props.teamEntity&&n--,this.props.isTeamCreate&&n--,this.setState(function(e){var t=e.invitees[n];return{users:[].concat(_toConsumableArray(e.users),[l.a.omit(t,"selectedOption")]),invitees:e.invitees.filter(function(e,t){return t!==n})}},function(){t.props.onChange(t.state.invitees)})}},{key:"handleUpdate",value:function handleUpdate(e,t){var n=this,o=e,a=this.props.teamEntity;a&&0===o?this.props.onTeamRoleChange(t):(a&&o--,this.props.isTeamCreate&&o--,this.setState(function(e){return{invitees:e.invitees.map(function(e,n){return n===o?function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{selectedOption:t}):e})}},function(){n.props.onChange(n.state.invitees)}))}},{key:"setInputRef",value:function setInputRef(e){this.inputRef=e}},{key:"render",value:function render(){var e={id:l.a.get(this.props,"teamEntity.teamId"),name:"Everyone in team",profilePicUrl:l.a.get(this.props,"teamEntity.teamLogoUrl"),selectedOption:l.a.get(this.props,"teamEntity.teamRole"),disableOptions:this.props.hideOptions,hideRemove:!0,showInfo:Object(c.d)(l.a.get(this.props,"workspaceAccessMode")),infoTooltipContent:s.f},t={id:l.a.get(this.props,"userId"),name:"You",profilePicUrl:l.a.get(this.props,"userData.profile_pic_url"),selectedOption:l.a.get(this.props,"defaultCreatorRole"),disableOptions:!0,hideRemove:!0},n=[];return n=this.props.isTeamCreate?this.props.teamEntity?[e,t].concat(_toConsumableArray(this.state.invitees)):[t].concat(_toConsumableArray(this.state.invitees)):this.props.teamEntity?[e].concat(_toConsumableArray(this.state.invitees)):this.state.invitees,a.a.createElement("div",null,a.a.createElement(u.fb,{className:"workspace-invite",inputComponent:a.a.createElement(UserDropdown,{allowTeamInvite:this.props.allowTeamInvite,icon:this.props.icon,options:this.state.users,placeholder:this.props.placeholder,setInputRef:this.setInputRef,value:this.state.value,onAdd:this.handleAdd}),list:n,options:this.props.permissions,showEmptyText:this.props.showEmptyText,onRemove:this.handleRemove,onUpdate:this.handleUpdate}),this.state.error&&a.a.createElement(r.Alert,{className:"push--top",pmStyle:"error"},this.state.error))}}]),WorkspaceInviteForm}()},EgWK:function(e,t,n){"use strict";n.d(t,"a",function(){return DefaultErrorCard});var o=n("q1tI"),a=n.n(o),r=n("htxa");function DefaultErrorCard(){return a.a.createElement(r.C,{description:"An unexpected error has occurred. Our engineers have been notified and we should have this fixed shortly.",title:"Something went wrong"})}},NTYG:function(e,t,n){"use strict";var o=n("q1tI"),a=n.n(o),r=n("eoB5"),i=n("/MKj"),l=n("LvDl"),s=n.n(l),c=n("o9Si");t.a=Object(i.b)(function mapStateToProps(e,t){var n=e.shared.workspaces||{},o=t.workspace||{};return{updating:n.updating.indexOf(o.id)>-1}},s.a.pick(c.b,["hideModal","joinWorkspace"]))(function JoinWorkspaceModal(e){var t=e.workspace||{};return a.a.createElement(r.Card,{className:"workspace-join"},a.a.createElement(r.Button,{className:"workspace-join__close-btn",icon:"close-big",iconSize:"sm",pmStyle:"alternate",size:"sm",onClick:e.hideModal}),a.a.createElement("img",{className:"workspace-join__image",src:"".concat("https://static.postman.co/img","/group.svg")}),a.a.createElement("h3",{className:"pm-h3 workspace-join__title"},"Join this workspace"),a.a.createElement("p",{className:"workspace-join__subtitle"},"Only workspace members can make changes to it."),a.a.createElement(r.Button,{className:"workspace-join__btn",disabled:e.updating,size:"md",onClick:function onClick(){e.joinWorkspace({workspace:t,successPath:e.successPath})}},e.updating?a.a.createElement(r.Loader,null):"Join Workspace"))})},OQZp:function(e,t,n){"use strict";n.d(t,"e",function(){return isWorkspaceMember}),n.d(t,"a",function(){return findUserDiff}),n.d(t,"c",function(){return getUsers}),n.d(t,"b",function(){return getAllowedModelsForWorkspaceFeed}),n.d(t,"f",function(){return sanitizeEntityType}),n.d(t,"d",function(){return isEditOnlyAccessControl});var o=n("LvDl"),a=n.n(o),r=n("W6Kq");function isWorkspaceMember(e,t){var n=a.a.get(e,"members.users")||{},o=a.a.get(e,"type"),r=a.a.get(e,"createdBy.id")||a.a.get(e,"createdBy");return!!t&&("personal"===o?"".concat(r)==="".concat(t):Boolean(n[t]))}function findUserDiff(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).map(function(e){return e.id}),n=e.map(function(e){return e.id}),o={$diff:!0,$add:{},$remove:{}};return t.sort().toString()===n.sort().toString()?null:(n.forEach(function(e){t.indexOf(e)<0&&(o.$add[e]={id:e})}),t.forEach(function(e){n.indexOf(e)<0&&(o.$remove[e]={id:e})}),o)}function getUsers(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Object.values(e).reduce(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(n.roles||[]).indexOf("user")>-1&&"".concat(n.id)!=="".concat(t)&&e.push({name:n.name,id:n.id,email:n.email,username:n.username,profilePicUrl:n.profile_pic_url}),e},[])}function getAllowedModelsForWorkspaceFeed(){return a.a.reduce(r.p,function(e,t){return!t.disabled&&e.push(t),e},[])}function sanitizeEntityType(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!e&&t?"entity":e&&e.toLowerCase()===r.m.API?"API":e}function isEditOnlyAccessControl(e){return"EDIT"===e}},W6Kq:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"d",function(){return l}),n.d(t,"c",function(){return s}),n.d(t,"o",function(){return c}),n.d(t,"k",function(){return u}),n.d(t,"l",function(){return p}),n.d(t,"i",function(){return d}),n.d(t,"n",function(){return m}),n.d(t,"e",function(){return f}),n.d(t,"b",function(){return h}),n.d(t,"p",function(){return g}),n.d(t,"g",function(){return y}),n.d(t,"h",function(){return b}),n.d(t,"f",function(){return v}),n.d(t,"m",function(){return _}),n.d(t,"j",function(){return C});var o=n("q1tI"),a=n.n(o),r=n("eoB5"),i="add",l="join",s="edit-description",c="view-details",u="rename",p="share",d="manage-members",m="show-members",f="leave",h="delete",g=[{id:"1",name:"Workspace",value:"workspace",icon:a.a.createElement(r.Icon,{className:"pm-entity-icon",name:"workspace",size:"sm"})},{id:"2",name:"API",value:"api",icon:a.a.createElement(r.Icon,{className:"pm-entity-icon",name:"api",size:"sm"})},{id:"3",name:"Collection",value:"collection",icon:a.a.createElement(r.Icon,{className:"pm-entity-icon",name:"collection",size:"sm"})},{id:"4",name:"Environment",value:"environment",icon:a.a.createElement(r.Icon,{className:"pm-entity-icon",name:"environment",size:"sm"})},{id:"5",name:"Monitor",value:"monitor",disabled:!0,icon:a.a.createElement(r.Icon,{className:"pm-entity-icon",name:"monitor",size:"sm"})},{id:"6",name:"Mock",value:"mock",disabled:!0,icon:a.a.createElement(r.Icon,{className:"pm-entity-icon",name:"mock",size:"sm"})}],y="Limit visibility of this workspace to invited members",b="Visibility Control for workspaces is a Postman Business and Enterprise feature. Upgrade to Business or Enterprise to use this feature.",v="To manage access to workspaces, upgrade your plan to Business or Enterprise.",_={API:"api",COLLECTION:"collection"},C={api:"API",collection:"collection",workspace:"workspace"}},YAsY:function(e,t,n){"use strict";var o=n("q1tI"),a=n.n(o),r=n("eoB5"),i=n("/MKj"),l=n("LvDl"),s=n.n(l),c=n("EHav"),u=n("mEBc"),p=n("OQZp"),d=n("o9Si"),m=n("Bdpz");function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var f="workspace";function FreeInviteView(e){return a.a.createElement("div",null,a.a.createElement("p",null,"You can invite other users and start collaborating with them on this collection."),a.a.createElement("label",{htmlFor:"ws-individual-perm"},"Invite these users"),a.a.createElement(c.a,{allowTeamInvite:!0,invitees:e.invitees,onChange:e.onInviteChange}),a.a.createElement("p",{className:"workspace-add-entity__info"},"These people will receive an invitation to join your team."))}function WorkpsaceView(e){var t=e.entity||{},n=e.workspace||{};return a.a.createElement("div",null,a.a.createElement("label",{htmlFor:"ws-list"},"Workspace"),a.a.createElement(u.a,{options:e.workspaces,value:n&&n.id,onChange:e.onWorkspaceChange}),"personal"===n.type&&a.a.createElement("p",{className:"workspace-add-entity__info"},"This collection will be shared in the selected personal workspace."),"team"===n.type&&a.a.createElement("p",{className:"workspace-add-entity__info"},"Sharing this ",t.type," in a team workspace will make it visible to everyone in the workspace."),e.isFree&&a.a.createElement("div",null,a.a.createElement("hr",{className:"push--bottom push-one-half--top"}),a.a.createElement("label",null,"Share with your team?"),a.a.createElement("p",null,"Share this collection with your team by inviting users to collaborate in a team workspace."),a.a.createElement("span",{className:"pm-link",onClick:e.onInvite},"Invite users")))}var h=function(e){function AddEntityToWorkspace(e){var t;return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,AddEntityToWorkspace),(t=function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}(this,_getPrototypeOf(AddEntityToWorkspace).call(this,e))).state={workspace:null,invitees:[],view:f},t.handleConfirm=t.handleConfirm.bind(_assertThisInitialized(t)),t}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(AddEntityToWorkspace,o["Component"]),function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(AddEntityToWorkspace,[{key:"componentDidMount",value:function componentDidMount(){this.props.getWorkspaces()}},{key:"handleConfirm",value:function handleConfirm(){var e=this.props.entity||{};this.state.invitees.length?this.props.shareCollectionWithUsers({dashboard:this.props.dashboard,god:this.props.god,collectionId:e.id,data:{invitations:this.state.invitees.map(function(e){return{email:e.email,roles:["user","admin","billing"]}}),dependencies:{collections:{$diff:!0,$add:[e.id]}}}}):this.props.addEntitiesToWorkspace(function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({redirect:this.props.redirect,workspace:this.state.workspace},"".concat(e.type,"s"),[e.id]))}},{key:"render",value:function render(){var e=this,t=this.props.entity||{},n=this.state.workspace,o=s.a.includes(this.props.updating,n&&n.id);return a.a.createElement(r.Card,{className:"workspace-add-entity"},a.a.createElement("h3",{className:"pm-h3"},"Share this ",t.type),a.a.createElement("p",{className:"workspace-add-entity__name"},t.name),a.a.createElement(r.Button,{className:"workspace-add-entity__close",icon:"close-big",pmStyle:"alternate",size:"sm",onClick:this.props.hideModal}),a.a.createElement("hr",{className:"push--ends"}),this.state.view===f&&a.a.createElement(WorkpsaceView,{entity:t,isFree:this.props.isFree,workspace:n,workspaces:this.props.workspaces,onInvite:function onInvite(){e.setState({view:"invite"})},onWorkspaceChange:function onWorkspaceChange(t){e.setState({workspace:t})}}),"invite"===this.state.view&&a.a.createElement(FreeInviteView,{invitees:this.state.invitees,onInviteChange:function onInviteChange(t){e.setState({invitees:t})}}),a.a.createElement(r.FormActions,{cancelButtonClass:"workspace-add-entity__cancel",cancelText:"Cancel",className:"workspace-add-entity__actions",confirmDisabled:!n&&!this.state.invitees.length||this.props.sharing,confirming:o||this.props.sharing,confirmText:"Share",size:"md",onCancel:this.props.hideModal,onConfirm:this.handleConfirm}))}}]),AddEntityToWorkspace}();t.a=Object(i.b)(function mapStateToProps(e,t){var n=t.workspace||{},o=s.a.get(e,"shared.workspaces")||{},a=s.a.get(e,"shared.userData.identity.user"),r=s.a.get(e,"shared.userData.user.roles",[]).indexOf("user")<0;return{updating:o.updating,sharing:s.a.get(e,"shared.collections.sharingWithUsers"),isFree:m.o.isFree(s.a.get(e,"shared.userData.account.planName")),dashboard:s.a.get(e,"shared.userData.config.postmanServices.dashboard")||{},god:s.a.get(e,"shared.userData.config.postmanServices.god")||{},workspaces:Object.values(o.byId).filter(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!0;return r&&(t=t&&"personal"===e.type),t=t&&e.id!==n.id&&s.a.get(e,["members","users",a])}),users:Object(p.c)(s.a.get(e,"shared.team.users.byId"),a)}},s.a.pick(d.b,["hideModal","addEntitiesToWorkspace","getWorkspaces","shareCollectionWithUsers"]))(h)},cMcQ:function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return a}),n.d(t,"d",function(){return r}),n.d(t,"f",function(){return i}),n.d(t,"e",function(){return l}),n.d(t,"c",function(){return s});var o={updateRolesPermissionDenied:{errorName:"You don't have permission",errorDescription:"Only an Editor can manage roles on this collection."},creatorNotPartOfTeam:{errorName:"User not found",errorDescription:"We don't have a record of this person. They may have left your team."},failedAccessRequest:{errorName:"Request failed",errorDescription:"The request you are trying to approve has failed."},expiredAccessRequest:{errorName:"Request expired",errorDescription:"Access requests expire after 30 days. You can still grant access by sharing the collection with them."},modelDoesNotExist:{errorName:"Unable to approve request",errorDescription:"This request couldn't be completed because the entity was deleted."},approvedAccessRequest:{errorName:"You've already approved this request",errorDescription:"It looks like the person already has this access."},approverNotPartOfTeam:{errorName:"Unable to approve request",errorDescription:"Whoops! It looks like you cannot approve this request."},invalidApproverForRequest:{errorName:"Unable to approve request",errorDescription:"Whoops! It looks like you cannot approve this request."},notPartOfAnyTeam:{errorName:"Unable to approve request",errorDescription:"Whoops! It looks like you cannot approve this request."}},a={modelDoesNotExist:{errorName:"Unable to create request",errorDescription:"This request couldn't be completed because the entity was deleted."},userAlreadyHasRequestedRole:{errorName:"You already have this access",errorDescription:"Create a new request if you'd like a different level of access"},instanceNotFoundError:{errorName:"Unable to create request",errorDescription:"This request couldn't be completed because the entity was deleted."}},r="pending_approval",i="requestAccessInitiated",l="requestAccessCompleted",s={api:"API"}},gEvu:function(e,t,n){"use strict";n.d(t,"a",function(){return RequestIcon}),n.d(t,"b",function(){return ItemIcon});var o=n("q1tI"),a=n.n(o),r=n("eoB5"),i=n("TSYQ"),l=n.n(i),s=n("WTCG");function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function RequestIcon(e){var t=e.method,n=Object(s.h)(t.toLowerCase());return a.a.createElement("span",{className:l()("pm-method-color-".concat(n),e.className),title:t},n)}function FolderIcon(e){var t=e.onClick,n=e.open;return a.a.createElement("a",{className:"docs-nav__icon--folder",onClick:t},a.a.createElement(r.Icon,{className:l()({"rotate-90":!n}),name:"down",size:"sm"}))}function ItemIcon(e){var t=e.type;return a.a.createElement("div",{className:l()("docs-nav__icon",function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},"docs-nav__icon--".concat(t),Boolean(t)))},"folder"===t&&a.a.createElement(FolderIcon,e),"request"===t&&a.a.createElement(RequestIcon,_extends({},e,{className:"docs-nav__method"})))}},mEBc:function(e,t,n){"use strict";n.d(t,"a",function(){return WorkspaceSelect});var o=n("q1tI"),a=n.n(o),r=n("eoB5"),i=n("TSYQ"),l=n.n(i);function WorkspaceOption(e){return a.a.createElement("div",{className:"workspace-select__option"},a.a.createElement("span",null,e.name),"team"===e.type&&a.a.createElement(r.Icon,{name:"team",size:"sm"}))}function WorkspaceSelect(e){return a.a.createElement(r.SelectDropdown,{block:!0,autoBlur:!1,className:l()("workspace-select",e.className),id:e.id,label:"Select a workspace",labelKey:"name",optionRenderer:WorkspaceOption,options:e.options,size:"md",value:e.value,valueKey:"id",onChange:e.onChange})}},rFPs:function(e,t,n){"use strict";n.r(t);var o=n("q1tI"),a=n.n(o),r=n("dtw8"),i=n("/MKj"),l=n("LvDl"),s=n.n(l),c=n("eoB5"),u=n("TSYQ"),p=n.n(u),d=n("htxa"),m=n("Bdpz"),f=n("WTCG"),h=n("+QRC"),g=n.n(h),y=n("YAsY"),b=n("ZyTw");function Viewers(e){var t=e.viewers,n="",o=[];return t.length>b.MAX_DOCUMENTATION_VIEWER_COUNT&&(o=t.slice(b.MAX_DOCUMENTATION_VIEWER_COUNT,t.length),t=t.slice(0,b.MAX_DOCUMENTATION_VIEWER_COUNT),n=o.map(function(e){return e.name}).join(", ")),a.a.createElement("div",{className:"docs-viewer"},t.map(function(e){return a.a.createElement(c.Tooltip,{content:"".concat(e.name," viewing"),key:e},function(t){return a.a.createElement("div",{className:"docs-viewer__user-icon-container",ref:t.triggerRef,onMouseOut:t.onMouseOut,onMouseOver:t.onMouseOver},a.a.createElement(r.c,{className:"docs-viewer__user-icons",key:e.id,to:"/users/".concat(e.id)},a.a.createElement(c.UserIcon,{size:"sm",url:e.profilePicUrl,userId:e.id})))})}),o.length>0&&a.a.createElement(c.Tooltip,{content:"".concat(n," viewing")},function(e){return a.a.createElement("div",{className:"docs-viewer__others",ref:e.triggerRef,onMouseOut:e.onMouseOut,onMouseOver:e.onMouseOver},"+",o.length)}))}var v={EDIT:"edit",UNPUBLISH:"unpublish",COPY:"copy",LINK:"link",ADD:"add",PUBLISH:"publish"};function handleAction(e,t){var n={type:"collection",name:t.name,id:t.id};e.value===v.EDIT||e.value===v.PUBLISH?(e.value===v.PUBLISH&&(m.a.recordEvent("documentationPublish"),m.a.recordEvent("documentationPublishFromPrivateView",{entityId:n.id})),m.s.goToRoute("/collections/".concat(t.id,"/publish?version=").concat(t.selectedVersionId))):e.value===v.COPY?g()(e.link):e.value===v.LINK?(m.a.recordEvent("documentationPublicViewFromPrivateView",{entityId:n.id}),m.s.goToNewWindow(e.link)):e.value===v.ADD&&window.pm.actions.showModal({children:a.a.createElement(y.a,{entity:n})})}function Topbar(e){var t=e.name,n=e.owner,o=void 0===n?{}:n,r=e.userId,i=e.published,l=e.customDomainId,u=e.publishedId,h=e.collectionId,g=e.unpublishing,y=e.documentationConfig,b=e.viewers,_=m.n.canPublishCollection(e.collectionPermissions),C=m.n.canShareCollection(e.collectionPermissions),E=s.a.find(e.customDomains,{id:l}),w=((e.versions||[]).find(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).value===e.selectedVersionId})||{}).label,O={id:h,owner:o.id,publishedId:u,version:w},P=Object(f.g)(O,E,y),k=[{label:a.a.createElement("div",null,a.a.createElement("span",{className:"published-doc__label"},"This collection is published at:"),a.a.createElement("span",{className:"pm-link published-doc__url"},P)),value:v.LINK,link:P},{label:"Copy Public Link",value:v.COPY,link:P},{label:"Edit Published Documentation",value:v.EDIT}],S=g?a.a.createElement(c.Button,{className:"docs-actions__publish",size:"sm"},a.a.createElement(c.Loader,null)):a.a.createElement(c.Button,{className:"docs-actions__publish"},a.a.createElement(c.Icon,{name:"publish",size:"sm"}),a.a.createElement("span",{className:"publish-label"},"Published"),a.a.createElement(c.Icon,{name:"down",size:"sm"})),T=[{label:"Share",value:v.ADD}];return _&&(i?T=T.concat(k):T.push({label:"Publish",value:v.PUBLISH})),a.a.createElement("div",{className:"docs-topbar"},a.a.createElement("div",{className:"docs-collection-info"},a.a.createElement("h3",{className:"pm-h3 docs-title",title:t},t),a.a.createElement(d.l,{forkedFrom:e.forkedFrom}),a.a.createElement(d.hb,{className:"docs-author",currentUserId:r,id:o.id,user:o}),Array.isArray(b)&&b.length>0&&a.a.createElement("div",{className:"doc-viewers"},a.a.createElement(Viewers,{viewers:b}))),a.a.createElement("div",{className:"docs-more-options"},a.a.createElement(c.MoreOptionsDropdown,{options:T,onChange:function onChange(t){handleAction(t,e)}})),a.a.createElement("div",{className:"docs-actions"},a.a.createElement(c.SelectDropdown,{block:!0,className:"docs-versions",label:"Select a version",options:e.versions,searchable:!1,value:e.selectedVersionId,onChange:function onChange(t){e.onVersionChange(t&&t.value)}}),a.a.createElement("div",{className:"visible-desktop-inline-block"},i?a.a.createElement(c.Dropdown,{className:p()("pm-dropdown--align-right",{disabled:!_}),label:S,options:k,onChange:function onChange(t){handleAction(t,e)}}):a.a.createElement(c.Button,{className:"push-half--right",disabled:!_,icon:"publish",pmStyle:"secondary",size:"sm",onClick:function onClick(){handleAction({value:v.PUBLISH},e)}},"Publish"),a.a.createElement(c.Button,{className:"docs-actions__subscribe",disabled:!C,icon:"share",pmStyle:"secondary",onClick:function onClick(){handleAction({value:v.ADD},e)}},"Share"))))}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var _=function(e){function Collection(e){var t;return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Collection),(t=function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}(this,_getPrototypeOf(Collection).call(this,e))).getCollectionPermission=t.getCollectionPermission.bind(_assertThisInitialized(t)),t.handleVersionChange=t.handleVersionChange.bind(_assertThisInitialized(t)),t.handlePresenceReporting=t.handlePresenceReporting.bind(_assertThisInitialized(t)),t}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(Collection,o["Component"]),function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(Collection,[{key:"UNSAFE_componentWillMount",value:function UNSAFE_componentWillMount(){var e=this.props.location.query;window.pm.actions.getCollectionMeta({collectionId:this.props.params.id,workspaceId:e.workspace||this.props.workspaces.active}),window.pm.actions.getPublicCollectionInfo({collectionUid:this.props.params.id,versionId:this.props.location.query.version}),this.props.isFree||window.pm.actions.getDomains()}},{key:"componentDidMount",value:function componentDidMount(){this.getCollectionPermission(),window.pm.actions.getCollectionVersions({collectionId:this.props.params.id})}},{key:"componentDidUpdate",value:function componentDidUpdate(){var e=this.props.location.query.version,t=(this.props.versions||[]).find(function(t){return e===t.value}),n=s.a.get(this.props.versions,"0.value");!this.props.isFree&&this.props.loaded&&this.handlePresenceReporting(),e&&t||!n||window.pm.actions.replace(_objectSpread({},this.props.location,{query:_objectSpread({},this.props.location.query,{version:n})}))}},{key:"componentWillUnmount",value:function componentWillUnmount(){window.pm.actions.hideBanner({name:"documenter-limit"}),this.apiInterval&&clearInterval(this.apiInterval)}},{key:"getCollectionPermission",value:function getCollectionPermission(){var e=[];this.props.teamId&&e.push({entityType:"team",entityId:"".concat(this.props.teamId)}),this.props.userId&&e.push({entityType:"user",entityId:"".concat(this.props.userId)}),window.pm.actions.getPermissions({data:{objects:[{objectType:"collection",objectId:this.props.params.id}],entities:e}}),window.pm.actions.getCollectionPermissions({collectionId:this.props.params.id,permission:"UPDATE_COLLECTION"})}},{key:"handleVersionChange",value:function handleVersionChange(e){var t=this.props.location,n=m.w.populateParams(_objectSpread({},t.query,{version:e}));m.a.recordEvent("documentationChangeVersion",{entityId:this.props.params.id}),m.s.goToRoute("".concat(t.pathname).concat(n))}},{key:"handlePresenceReporting",value:function handlePresenceReporting(){var e=this;this.props.errorViewers?this.apiInterval&&clearInterval(this.apiInterval):!1===this.props.loadingViewers&&!1===this.props.loadedViewers?window.pm.actions.getViewers({workspaceId:this.props.activeWorkspace,collectionId:this.props.params.id,browserId:m.c.getDeviceId(),userId:this.props.userId}):!this.apiInterval&&this.props.loadedViewers&&this.props.reportTime&&(this.apiInterval=setInterval(function(){window.pm.actions.getViewers({workspaceId:e.props.activeWorkspace,collectionId:e.props.params.id,browserId:m.c.getDeviceId(),userId:e.props.userId})},this.props.reportTime))}},{key:"render",value:function render(){var e=this,t=this.props,n=t.params,o=t.location,r=t.children,i=t.name,l=t.owner,u=t.userId,p=t.subscribers,d=t.permissions,h=t.published,g=t.publishedId,y=t.customDomains,b=t.customDomainId,v=t.unpublishing,_=t.documentationConfig,C=t.apiNetworkId,E=t.templateId,w=t.publishType,O=t.publishedToNetwork,P=t.viewers,k=this.props.location.query.version||s.a.get(this.props,"versions.0.value");return a.a.createElement("div",{className:"collection"},this.props.loaded?a.a.createElement(Topbar,{apiNetworkId:C,collectionId:Object(f.c)(n.id),collectionPermissions:this.props.collectionPermissions,customDomainId:b,customDomains:y,documentationConfig:_,forkedFrom:this.props.forkedFrom,id:n.id,name:i,owner:l,permissions:d,published:h,publishedId:g,publishedToNetwork:O,publishType:w,selectedVersionId:k,subscribers:p,templateId:E,unpublishing:v,userId:u,versions:this.props.versions,viewers:P,onVersionChange:this.handleVersionChange}):null,this.props.loaded?a.a.createElement(c.ControlledTabs,{activeRefKey:o.pathname,className:"docs-tabs",pmStyle:"primary",onChangeTab:function onChangeTab(t){var n=e.props.location,o=m.w.populateParams(_objectSpread({},n.query,{version:k}));m.s.goToRoute("".concat(t).concat(o))}},a.a.createElement(c.TabList,null,a.a.createElement(c.Tab,{refKey:"/collections/".concat(n.id)},"Documentation"),a.a.createElement(c.Tab,{refKey:"/collections/".concat(n.id,"/monitors")},"Monitors"),a.a.createElement(c.Tab,{refKey:"/collections/".concat(n.id,"/mocks")},"Mocks"),a.a.createElement(c.Tab,{refKey:"/collections/".concat(n.id,"/pull-requests")},"Pull Requests"),a.a.createElement(c.Tab,{refKey:"/collections/".concat(n.id,"/activity")},"Changelog"))):null,r)}}]),Collection}();var C=Object(i.b)(function mapStateToProps(e,t){var n=Object(f.c)(t.params.id),o=s.a.get(e,"collection.meta")||{},a=s.a.get(e,"collection.versions")||{},r=s.a.get(e,["shared","workspaces","active"]),i=s.a.get(e,["shared","team","users","byId"]),l=s.a.get(e,"collection.presence.viewers")||[];return l.length>0&&(l=l.filter(function(t){return t.id!==s.a.get(e,"shared.userData.identity.user")})),l.map(function(e){e.profilePicUrl=null,e.profilePicUrl=s.a.get(i,[e.id,"profile_pic_url"])}),_objectSpread({},e.collection.meta,{loading:e.collection.meta.loading||a.loading,versions:(a.data||[]).map(function(e){return{value:s.a.get(e,"id"),label:s.a.get(e,"apiVersion.name")}}),documentationConfig:s.a.get(e,"shared.userData.config.postmanServices.doc"),userId:s.a.get(e,"shared.userData.identity.user"),teamId:s.a.get(e,"shared.userData.identity.team"),usage:s.a.get(e,"shared.collections.byId.".concat(n,".limits.usage")),limit:s.a.get(e,"shared.collections.byId.".concat(n,".limits.limit")),plan:s.a.get(e,"shared.userData.account.planName"),viewers:l,loadingViewers:s.a.get(e,"collection.presence.loadingViewers"),loadedViewers:s.a.get(e,"collection.presence.loadedViewers"),errorViewers:s.a.get(e,"collection.presence.errorViewers"),activeWorkspace:r,collectionPermissions:s.a.get(e,["shared","permissions","collection",t.params.id]),reportTime:s.a.get(e,"collection.presence.reportTime"),enterprise:s.a.get(e,"shared.userData.account.enterprise"),workspaces:s.a.get(e,"shared.workspaces"),customDomains:[].concat(Object.values(s.a.get(e,"settings.domains.byId")||{})),isFree:m.o.isFree(s.a.get(e,"shared.userData.account.planName")),unpublishing:o.unpublishing})})(_),E=n("i8i4"),w=n("gEvu"),O=n("17x9"),P=n.n(O);function shortform_editor_typeof(e){return(shortform_editor_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function shortform_editor_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function shortform_editor_defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function shortform_editor_createClass(e,t,n){return t&&shortform_editor_defineProperties(e.prototype,t),n&&shortform_editor_defineProperties(e,n),e}function shortform_editor_possibleConstructorReturn(e,t){return!t||"object"!==shortform_editor_typeof(t)&&"function"!=typeof t?shortform_editor_assertThisInitialized(e):t}function shortform_editor_getPrototypeOf(e){return(shortform_editor_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function shortform_editor_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function shortform_editor_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&shortform_editor_setPrototypeOf(e,t)}function shortform_editor_setPrototypeOf(e,t){return(shortform_editor_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var k=function(e){function EditView(e){var t;return shortform_editor_classCallCheck(this,EditView),(t=shortform_editor_possibleConstructorReturn(this,shortform_editor_getPrototypeOf(EditView).call(this,e))).state={rows:1,minRows:e.minRows,maxRows:e.maxRows},t.editViewRef=a.a.createRef(),t.handleClickOutside=t.handleClickOutside.bind(shortform_editor_assertThisInitialized(t)),t.handleChange=t.handleChange.bind(shortform_editor_assertThisInitialized(t)),t.resizeTextArea=t.resizeTextArea.bind(shortform_editor_assertThisInitialized(t)),t.resizeHandler=s.a.debounce(t.resizeTextArea,300),t}return shortform_editor_inherits(EditView,o["Component"]),shortform_editor_createClass(EditView,[{key:"componentDidMount",value:function componentDidMount(){document.addEventListener("click",this.handleClickOutside,!1),window.addEventListener("resize",this.resizeHandler,!1),this.resizeTextArea();var e=this.editViewRef&&this.editViewRef.current;e.selectionStart=e.selectionEnd=e.value.length+1}},{key:"componentWillUnmount",value:function componentWillUnmount(){document.removeEventListener("click",this.handleClickOutside,!1),window.removeEventListener("resize",this.resizeHandler,!1)}},{key:"UNSAFE_componentWillReceiveProps",value:function UNSAFE_componentWillReceiveProps(e){this.props.editing!==e.editing&&this.resizeTextArea()}},{key:"handleClickOutside",value:function handleClickOutside(e){this.props.editing&&this.editViewRef&&this.editViewRef.current&&!this.editViewRef.current.contains(e.target)&&this.props.onClickOutside()}},{key:"handleChange",value:function handleChange(e){this.resizeTextArea(),this.props.onChangeContent(e)}},{key:"resizeTextArea",value:function resizeTextArea(){if(this.props.autoResize){var e,t=this.editViewRef&&this.editViewRef.current,n=window.getComputedStyle(this.editViewRef.current).fontSize.slice(0,-2),o=this.state,a=o.minRows,r=o.maxRows,i=t.rows;t.rows=a;var l=~~(t.scrollHeight/(1.35*n));l===i&&(t.rows=l),l>=r&&(t.rows=r,t.scrollTop=t.scrollHeight),e=l<r?l:r,this.setState({rows:e>0?e:1})}}},{key:"render",value:function render(){return a.a.createElement("div",{className:p()({saving:this.props.saving})},a.a.createElement("textarea",{autoFocus:this.props.autoFocus,className:"pm-form-control pm-textarea editor-editview",maxLength:this.props.maxLength,readOnly:this.props.saving,ref:this.editViewRef,rows:this.state.rows,value:this.props.content,onChange:this.handleChange,onKeyDown:this.handleKeyDown}))}}]),EditView}(),S=function(e){function BlockView(e){var t;return shortform_editor_classCallCheck(this,BlockView),(t=shortform_editor_possibleConstructorReturn(this,shortform_editor_getPrototypeOf(BlockView).call(this,e))).state={rows:t.props.rows,minRows:e.minRows,maxRows:e.maxRows},t.blockViewRef=a.a.createRef(),t.resizeTextArea=t.resizeTextArea.bind(shortform_editor_assertThisInitialized(t)),t.resizeHandler=s.a.debounce(t.resizeTextArea,100),t}return shortform_editor_inherits(BlockView,o["Component"]),shortform_editor_createClass(BlockView,[{key:"componentDidMount",value:function componentDidMount(){window.addEventListener("resize",this.resizeHandler,!1),this.resizeTextArea()}},{key:"componentWillUnmount",value:function componentWillUnmount(){window.removeEventListener("resize",this.resizeHandler,!1)}},{key:"componentDidUpdate",value:function componentDidUpdate(e){this.props.content!==e.content&&this.resizeTextArea()}},{key:"resizeTextArea",value:function resizeTextArea(){if(this.props.autoResize){var e,t=this.blockViewRef&&this.blockViewRef.current,n=window.getComputedStyle(this.blockViewRef.current).fontSize.slice(0,-2),o=this.state,a=o.minRows,r=o.maxRows,i=t.rows;t.rows=a;var l=~~(t.scrollHeight/(1.35*n));l===i&&(t.rows=l),l>=r&&(t.rows=r,t.scrollTop=t.scrollHeight),e=l<r?l:r,this.setState({rows:e>0?e:1})}}},{key:"render",value:function render(){return a.a.createElement("div",{className:"blockview"},!this.props.autoResize&&1===this.state.rows&&a.a.createElement("div",{className:"editor-blockview"},this.props.content),this.props.autoResize&&a.a.createElement("textarea",{readOnly:!0,className:"editor-blockview",ref:this.blockViewRef,rows:this.state.rows,value:this.props.content}),this.props.loading&&a.a.createElement("div",{className:"loader"},a.a.createElement(c.Loader,{pmStyle:"secondary",size:"sm"})))}}]),BlockView}();function EditorActions(e){return a.a.createElement("div",{className:"pm-inline-editor__actions"},a.a.createElement(c.Button,{disabled:e.saving,icon:"close-big",pmStyle:"secondary",size:e.size,onClick:e.onCancel}),a.a.createElement(c.Button,{className:e.saving?"loading":"",disabled:e.saving||e.disabled,icon:e.saving?"":"success",pmStyle:"primary",size:e.size,onClick:e.onSave},e.saving?a.a.createElement(c.Loader,null):null))}var T=function(e){function BaseEditor(e){var t;return shortform_editor_classCallCheck(this,BaseEditor),(t=shortform_editor_possibleConstructorReturn(this,shortform_editor_getPrototypeOf(BaseEditor).call(this,e))).handleClickOutside=t.handleClickOutside.bind(shortform_editor_assertThisInitialized(t)),t}return shortform_editor_inherits(BaseEditor,o["Component"]),shortform_editor_createClass(BaseEditor,[{key:"handleClickOutside",value:function handleClickOutside(){this.props.onSave()}},{key:"render",value:function render(){return a.a.createElement(a.a.Fragment,null,this.props.editing||this.props.saving?a.a.createElement("div",{className:"base-editor"},a.a.createElement(k,_extends({},this.props,{content:this.props.content,ref:this.editViewRef,textAreaRef:this.props.textAreaRef,onCancel:this.props.onChangeMode,onCancelEdit:this.props.onCancel,onChangeContent:this.props.onChangeContent,onClickOutside:this.handleClickOutside,onSave:this.props.onChangeMode})),this.props.showEditorActions&&a.a.createElement(EditorActions,{disabled:this.props.disableOnEmpty&&!(this.props.content||"").trim(),saving:this.props.saving,size:this.props.actionsSize,onCancel:this.props.onCancel,onSave:this.props.onSave})):a.a.createElement("div",{className:"base-editor"},a.a.createElement(S,_extends({},this.props,{content:this.props.content}))))}}]),BaseEditor}(),I=function(e){function InlineEditor(e){var t;return shortform_editor_classCallCheck(this,InlineEditor),(t=shortform_editor_possibleConstructorReturn(this,shortform_editor_getPrototypeOf(InlineEditor).call(this,e))).state={content:e.content,editing:e.editing,rows:e.rows||1},t.handleToggleEdit=t.handleToggleEdit.bind(shortform_editor_assertThisInitialized(t)),t.handleSave=t.handleSave.bind(shortform_editor_assertThisInitialized(t)),t.handleCancel=t.handleCancel.bind(shortform_editor_assertThisInitialized(t)),t.handleContentChange=t.handleContentChange.bind(shortform_editor_assertThisInitialized(t)),t.handleKeyDown=t.handleKeyDown.bind(shortform_editor_assertThisInitialized(t)),t.handleClickOutside=t.handleClickOutside.bind(shortform_editor_assertThisInitialized(t)),t.handleKeyDownActions=t.handleKeyDownActions.bind(shortform_editor_assertThisInitialized(t)),t}return shortform_editor_inherits(InlineEditor,o["Component"]),shortform_editor_createClass(InlineEditor,[{key:"componentDidMount",value:function componentDidMount(){document.addEventListener("keydown",this.handleKeyDownActions,!1)}},{key:"componentWillUnmount",value:function componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDownActions,!1)}},{key:"componentWillReceiveProps",value:function componentWillReceiveProps(e){this.props.content!==e.content&&this.setState({content:e.content})}},{key:"handleKeyDownActions",value:function handleKeyDownActions(e){this.props.editing&&27===e.keyCode?this.handleCancel():this.props.editing&&13===e.keyCode&&this.handleSave()}},{key:"handleToggleEdit",value:function handleToggleEdit(){this.setState(function(e){return{editing:!e.editing}})}},{key:"handleSave",value:function handleSave(){var e=this.props.isControlled?this.props.content:this.state.content;this.props.disableOnEmpty&&!e||(this.props.isControlled?this.props.onToggleEdit():this.handleToggleEdit(),"function"==typeof this.props.onSave&&this.props.onSave(e))}},{key:"handleCancel",value:function handleCancel(){this.setState({content:this.props.content}),this.props.isControlled?this.props.onToggleEdit():this.handleToggleEdit(),"function"==typeof this.props.onCancel&&this.props.onCancel()}},{key:"handleContentChange",value:function handleContentChange(e){var t=e.target.value,n={};this.props.fixedRows||(n.rows=Math.max(this.props.rows||0,(t||"").split("\n").length)),this.props.isControlled||(n.content=t),this.setState(n),"function"==typeof this.props.onUpdate&&this.props.onUpdate(t)}},{key:"handleKeyDown",value:function handleKeyDown(e){"function"!==this.props.onKeyDown?"Enter"!==e.key||this.props.block&&!e.ctrlKey&&!e.metaKey||(e.preventDefault(),this.handleSave()):this.props.onKeyDown(e)}},{key:"handleClickOutside",value:function handleClickOutside(){this.handleSave()}},{key:"render",value:function render(){var e=this.props.isControlled?this.props.onToggleEdit:this.handleToggleEdit,t=this.props.isControlled?this.props.content:this.state.content,n=this.props.isControlled?this.props.editing:this.state.editing||this.props.saving,o=p()("pm-inline-editor","shortform-editor",{"pm-inline-editor--editing":!this.props.block&&(n||this.props.saving),"pm-inline-editor--block":this.props.block},"pm-inline-editor-".concat(this.props.size),this.props.className);return a.a.createElement("div",{className:o},a.a.createElement(T,_extends({},this.props,{content:t,editing:n,rows:this.state.rows,onCancel:this.handleCancel,onChangeContent:this.handleContentChange,onChangeMode:e,onClick:this.handleToggleEdit,onClickOutside:this.handleClickOutside,onKeyDown:this.handleKeyDown,onSave:this.handleSave})))}}]),InlineEditor}();I.displayName="InlineEditor",I.propTypes={autoFocus:P.a.bool,content:P.a.string,disableOnEmpty:P.a.bool,editing:P.a.bool,fixedRows:P.a.bool,loading:P.a.bool,onCancel:P.a.func,onSave:P.a.func,onToggleEdit:P.a.func,saving:P.a.bool,showBlockActions:P.a.bool,showEditorActions:P.a.bool,size:P.a.oneOf(["sm","md","lg"])},I.defaultProps={fixedRows:!1,disableOnEmpty:!1,rows:1,minRows:1,maxRows:1e4,editing:!1,loading:!1,showEditorActions:!1,showBlockActions:!1,content:"",autoFocus:!0};var N=n("ttZb"),D=n("LIIV"),j={failedUpdateEntityNotAvailable:{errorName:"Unable to save changes",errorDescription:"The section you were editing may have been deleted. Refresh the page for the latest changes."},failedFetchEntityNotAvailable:{errorName:"This section no longer exists",errorDescription:"It may have been deleted by someone. Refresh the page for the latest changes."},failedUpdateUnknownError:{errorName:"Unable to save changes",errorDescription:"That wasn't supposed to happen. Try again. "},failedFetchUnknownError:{errorName:"Something went wrong",errorDescription:"That content is around here somewhere. Try again."},failedUpdateAccessError:{errorName:"Unable to save changes",errorDescription:"Your access to this collection may have changed. Refresh the page for the most recent version. [Request access] to collection."},failedFetchAccessError:{errorName:"You need additional access",errorDescription:"Your access to this collection may have changed. Refresh the page for the most recent version. [Request access] to collection."},failedUpdateServerError:{errorName:"Unable to save changes",errorDescription:"That wasn't supposed to happen. Try again. "},failedFetchServerError:{errorName:"Something went wrong",errorDescription:"That content is around here somewhere. Try again."},default:{errorName:"Something went wrong",errorDescription:"That wasn't supposed to happen. Try again. "}},R={name:{head:"documentationCollectionInitiateEditName",request:"documentationRequestInitiateEditName",folder:"documentationFolderInitiateEditName"},description:{info:"documentationCollectionInitiateEditDescription",request:"documentationRequestInitiateEditDescription",folder:"documentationFolderInitiateEditDescription"}};function getInlineEditErrorDetails(e,t){if(!e)return j.default;if("fetch"===t)switch(e){case"NOT_FOUND":return j.failedFetchEntityNotAvailable;case"BAD_REQUEST":return j.failedFetchUnknownError;case"FORBIDDEN":return j.failedFetchAccessError;case"INTERNAL_SERVER_ERROR":return j.failedFetchServerError;default:return j.default}else switch(e){case"NOT_FOUND":return j.failedUpdateEntityNotAvailable;case"BAD_REQUEST":return j.failedUpdateUnknownError;case"FORBIDDEN":return j.failedUpdateAccessError;case"INTERNAL_SERVER_ERROR":return j.failedFetchServerError;default:return j.default}}var A=n("xUjm");function _slicedToArray(e,t){return function _arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function _iterableToArrayLimit(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],o=!0,a=!1,r=void 0;try{for(var i,l=e[Symbol.iterator]();!(o=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);o=!0);}catch(e){a=!0,r=e}finally{try{o||null==l.return||l.return()}finally{if(a)throw r}}return n}(e,t)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function _templateObject4(){var e=_taggedTemplateLiteral(["\n  mutation($collectionId: String!,$environment: String,$markdown: Boolean, $resolve: Boolean,\n    $updateData: UpdateDocumentationRequestInput) {\n    updateDocumentationRequest(\n        collectionId: $collectionId\n        environment: $environment\n        markdown: $markdown\n        resolve: $resolve\n        updateData: $updateData\n    ){\n        name\n    }\n  }"]);return _templateObject4=function _templateObject4(){return e},e}function _templateObject3(){var e=_taggedTemplateLiteral(["\n  mutation($collectionId: String!,$environment: String,$markdown: Boolean, $resolve: Boolean,\n    $updateData: UpdateDocumentationFolderInput) {\n    updateDocumentationFolder(\n        collectionId: $collectionId\n        environment: $environment\n        markdown: $markdown\n        resolve: $resolve\n        updateData: $updateData\n    ){\n        name\n    }\n  }"]);return _templateObject3=function _templateObject3(){return e},e}function _templateObject2(){var e=_taggedTemplateLiteral(["\n  query($collectionId: String!, $path: String!, $environment: String, $version: String) {\n    documentation(collectionId: $collectionId, path: $path, environment: $environment,\n      versionTag: $version, markdown: true) {\n        request(path: $path){\n          name\n        }\n      }\n  }"]);return _templateObject2=function _templateObject2(){return e},e}function _templateObject(){var e=_taggedTemplateLiteral(["\n  query($collectionId: String!, $path: String!, $environment: String, $version: String) {\n    documentation(collectionId: $collectionId, path: $path, environment: $environment,\n      versionTag: $version, markdown: true) {\n        folder(path: $path){\n          name\n        }\n      }\n  }"]);return _templateObject=function _templateObject(){return e},e}function _taggedTemplateLiteral(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var q=255,M=Object(D.b)(_templateObject()),x=Object(D.b)(_templateObject2()),L=Object(D.b)(_templateObject3()),F=Object(D.b)(_templateObject4());function generateEntityPath(e){var t=encodeURIComponent("1.0"),n=encodeURIComponent(e.entityID),o=encodeURIComponent(e.entityType),a=encodeURIComponent(e.entityObjectPath);return"v=".concat(t,":objectPath=").concat(a,"&type=").concat(o,"&uuid=").concat(n)}function ItemName(e){var t=e.type,n=e.onClick,r=e.id,i=e.onOverlayItemClick,l=_slicedToArray(Object(o.useState)(e.name),2),u=l[0],d=l[1],m=_slicedToArray(Object(o.useState)(!1),2),f=m[0],h=m[1],g=_slicedToArray(Object(o.useState)(!1),2),y=g[0],b=g[1],v=s.a.get(e,"collectionId"),_=_slicedToArray(Object(N.a)(x,{variables:{collectionId:v,path:generateEntityPath({entityID:r,entityType:"request",entityObjectPath:e.path+".name"})},fetchPolicy:"network-only",onCompleted:function onCompleted(e){d(e.documentation.request.name),h(!0)},onError:function onError(e){var t=e.graphQLErrors,n=getInlineEditErrorDetails(s.a.get(t,"[0].extensions.code"),"fetch"),o=n.errorName,a=n.errorDescription;window.pm.actions.showToast({type:"error",title:o,body:a})}}),2),C=_[0],E=_[1],w=E.loading,O=E.data,P=_slicedToArray(Object(N.b)(F,{onCompleted:function onCompleted(t){window.pm.actions.updateCollectionData({entityCollectionId:v,entityId:r,entityType:"request",updateEntityData:t.updateDocumentationRequest.name,entityPath:e.path,updatedKey:"name"})},onError:function onError(e){var t=e.graphQLErrors;b(!1),h(!0);var n=getInlineEditErrorDetails(s.a.get(t,"[0].extensions.code"),"update"),o=n.errorName,a=n.errorDescription;window.pm.actions.showToast({type:"error",title:o,body:a})}}),1)[0],k=_slicedToArray(Object(N.a)(M,{variables:{collectionId:v,path:generateEntityPath({entityID:r,entityType:"folder",entityObjectPath:e.path+".name"})},fetchPolicy:"network-only",onCompleted:function onCompleted(e){d(e.documentation.folder.name),h(!0)},onError:function onError(e){var t=e.graphQLErrors,n=getInlineEditErrorDetails(s.a.get(t,"[0].extensions.code"),"fetch"),o=n.errorName,a=n.errorDescription;window.pm.actions.showToast({type:"error",title:o,body:a})}}),2),S=k[0],T=k[1],D=T.loading,j=T.data,U=_slicedToArray(Object(N.b)(L,{onCompleted:function onCompleted(t){window.pm.actions.updateCollectionData({entityCollectionId:v,entityId:r,entityType:"folder",updateEntityData:t.updateDocumentationFolder.name,entityPath:e.path,updatedKey:"name"})},onError:function onError(e){var t=e.graphQLErrors;b(!1),h(!0);var n=getInlineEditErrorDetails(s.a.get(t,"[0].extensions.code"),"update"),o=n.errorName,a=n.errorDescription;window.pm.actions.showToast({type:"error",title:o,body:a})}}),1)[0];function handleToggleEdit(){h(!f)}function handleCancelEdit(){h(!1),d(e.name)}function handleUpdateContent(e){d(e)}function handleSaveContent(){var n;if(e.name!==u)if("folder"===t?n=j&&j.documentation.folder.name:"request"===t&&(n=O&&O.documentation.request.name),n!==u){var o={collectionId:v,environment:e.environmentId?e.environmentId:"",markdown:!0,resolve:!0,updateData:{path:generateEntityPath({entityID:r,entityType:t,entityObjectPath:e.path}),name:u}};b(!0),"folder"===t?U({variables:o}):P({variables:o})}else handleCancelEdit();else handleCancelEdit()}return a.a.createElement("div",{className:p()("docs-nav__name docs-nav__name--".concat(t),{editable:e.editable})},!f&&!y&&a.a.createElement("div",null,a.a.createElement("span",{className:p()("docs-nav__title",{editable:e.editable})},a.a.createElement("a",{className:"docs-nav__link no-select",href:"#".concat(r),title:u,onClick:function onClick(){!function handleItemNameClick(e,t){[e,t].forEach(function(e){"function"==typeof e&&e()})}(n,i)}},a.a.createElement(I,{disableOnEmpty:!0,isControlled:!0,showEditorActions:!0,content:u,editing:f,maxLength:q,saving:y,title:u,onCancel:handleCancelEdit,onSave:handleSaveContent,onToggleEdit:handleToggleEdit,onUpdate:handleUpdateContent}))),e.editable&&("folder"===t||"request"===t)&&!w&&!D&&a.a.createElement(c.Button,{className:"docs-nav__edit-btn",pmStyle:"secondary",size:"sm",onClick:function handleSingleClick(){!e.editable||y||f||(R&&R.name&&R.name[t]&&A.a.recordEvent(R.name[t],{entityId:r}),"folder"===t?S():C())}},a.a.createElement("svg",{fill:"none",height:"16",viewBox:"0 0 16 16",width:"16",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("path",{d:"M10 2H12V14H10V15H15V14H13V2H15V1H10V2Z",fill:"#7E7E7E"}),a.a.createElement("path",{clipRule:"evenodd",d:"M5.1635 2.5C4.95729 2.5 4.77223 2.62659 4.6975 2.81878L1 12H2.19998L3.56106 8.50008H7.33891L8.70002 12.0001H9.9L6.2025 2.81884C6.12777 2.62665 5.94271 2.50006 5.7365 2.50006L5.1635 2.5ZM5.44999 3.64283L6.95003 7.50008H3.94995L5.44999 3.64283Z",fill:"#7E7E7E",fillRule:"evenodd"}))),e.editable&&("folder"===t||"request"===t)&&(w||D)&&a.a.createElement(c.Loader,{className:"folder-request-title-loading",pmStyle:"secondary",size:"sm"})),(f||y)&&a.a.createElement(I,{disableOnEmpty:!0,isControlled:!0,showEditorActions:!0,content:u,editing:f,maxLength:q,saving:y,title:u,onCancel:handleCancelEdit,onSave:handleSaveContent,onToggleEdit:handleToggleEdit,onUpdate:handleUpdateContent}))}function ItemHead(e){return a.a.createElement("div",{className:"docs-nav__head"},a.a.createElement(w.b,e),a.a.createElement(ItemName,e))}function ItemContent(e){var t=e.children,n=e.open;return t?a.a.createElement("ul",{className:p()("docs-nav__content",{hidden:!n})},t):null}function Item_typeof(e){return(Item_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Item_extends(){return(Item_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function Item_defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Item_getPrototypeOf(e){return(Item_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Item_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Item_setPrototypeOf(e,t){return(Item_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var U=function(e){function Item(e){var t;return function Item_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Item),(t=function Item_possibleConstructorReturn(e,t){return!t||"object"!==Item_typeof(t)&&"function"!=typeof t?Item_assertThisInitialized(e):t}(this,Item_getPrototypeOf(Item).call(this,e))).state={open:!1},t.handleClick=t.handleClick.bind(Item_assertThisInitialized(t)),t}return function Item_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Item_setPrototypeOf(e,t)}(Item,o["Component"]),function Item_createClass(e,t,n){return t&&Item_defineProperties(e.prototype,t),n&&Item_defineProperties(e,n),e}(Item,[{key:"componentWillMount",value:function componentWillMount(){this.props.expandedCollectionFolders&&this.props.expandedCollectionFolders.includes(this.props.id)&&this.setState({open:!0})}},{key:"handleClick",value:function handleClick(){var e=this;this.setState(function(e){return{open:!e.open}},function(){"folder"===e.props.type&&window.pm.actions.updateCollectionSidebarEntityStates({entityID:e.props.id,isOpen:e.state.open})})}},{key:"render",value:function render(){return a.a.createElement("li",{className:p()("docs-nav__item",function Item_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},"docs-nav__item--".concat(this.props.type),Boolean(this.props.type)))},a.a.createElement(ItemHead,Item_extends({open:this.state.open},this.props,{onClick:this.handleClick})),a.a.createElement(ItemContent,Item_extends({open:this.state.open},this.props)))}}]),Item}();function TocItem(e){var t=e.heading,n=e.id,o=e.onOverlayItemClick;return a.a.createElement(U,{id:n,key:"".concat(n,"-").concat(t),name:t,type:"tocItem",onOverlayItemClick:o})}function TableOfContents(e){var t=e.collectionInfo,n=void 0===t?{}:t,o=e.onOverlayItemClick,r=s.a.get(n,"toc");return a.a.createElement("li",null,a.a.createElement("ul",null,a.a.createElement(TocItem,{heading:"Introduction",id:"introduction",key:"introduction",onOverlayItemClick:o}),(r||[]).map(function(e){return a.a.createElement(TocItem,{heading:s.a.get(e,"content")||"",id:s.a.get(e,"slug")||"",key:s.a.get(e,"slug")||"",onOverlayItemClick:o})})))}function NoRequestsSidebar(){return a.a.createElement("p",{className:"documenter-no-requests__sidebar"},"This is where requests saved in your collections would appear.")}function NoRequestsBody(){return a.a.createElement("div",{className:"pm-col-md-7 documenter-no-requests__body"},a.a.createElement("p",null,"Add description to your API requests to generate beautiful documentation for them. ",a.a.createElement("br",null)),a.a.createElement("div",null,a.a.createElement("a",{className:"pm-link",href:"https://www.getpostman.com/docs/postman/collections/using_markdown_for_descriptions",rel:"noopener noreferrer",target:"_blank"},"Learn more about documenting your APIs")))}function Sidebar_typeof(e){return(Sidebar_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sidebar_defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Sidebar_getPrototypeOf(e){return(Sidebar_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Sidebar_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Sidebar_setPrototypeOf(e,t){return(Sidebar_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function SidebarContent(e){var t=e.collectionInfo,n=e.items,o=e.onOverlayItemClick,r=e.expandedCollectionFolders,i=e.currentEnvironment?e.currentEnvironment.id:"",l=!(n&&n.length>0),c=s.a.get(e,"editableDocumentation"),u=s.a.get(e,"params.id");return l?a.a.createElement(NoRequestsSidebar,null):a.a.createElement("ul",{className:"docs-nav__items"},a.a.createElement(TableOfContents,{collectionInfo:t,onOverlayItemClick:o}),n.map(function(e,t){return function getNavTree(e,t,n,o,r,i,l,s){return e?Object(f.d)(e)?a.a.createElement(U,{collectionId:o,editable:i,environmentId:r,expandedCollectionFolders:s,id:e._postman_id,key:"".concat(e._postman_id,"-").concat(e.name),name:e.name,path:"".concat(n,"[").concat(t,"]"),type:"folder",onOverlayItemClick:l},e.item.map(function(e,a){return getNavTree(e,a,"".concat(n,"[").concat(t,"].item"),o,r,i,l,s)})):a.a.createElement(U,{collectionId:o,editable:i,environmentId:r,expandedCollectionFolders:s,id:e._postman_id,key:"".concat(e._postman_id,"-").concat(e.name),method:e.request.method||"",name:e.name,path:"".concat(n,"[").concat(t,"]"),type:"request",onOverlayItemClick:l}):null}(e,t,"item",u,i,c,o,r)}))}var z=function(e){function Sidebar(e){var t;return function Sidebar_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Sidebar),(t=function Sidebar_possibleConstructorReturn(e,t){return!t||"object"!==Sidebar_typeof(t)&&"function"!=typeof t?Sidebar_assertThisInitialized(e):t}(this,Sidebar_getPrototypeOf(Sidebar).call(this,e))).scrollHandler=t.scrollHandler.bind(Sidebar_assertThisInitialized(t)),t.resizeHandler=t.resizeHandler.bind(Sidebar_assertThisInitialized(t)),t}return function Sidebar_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sidebar_setPrototypeOf(e,t)}(Sidebar,o["Component"]),function Sidebar_createClass(e,t,n){return t&&Sidebar_defineProperties(e.prototype,t),n&&Sidebar_defineProperties(e,n),e}(Sidebar,[{key:"componentDidMount",value:function componentDidMount(){Object(f.e)()||(this.DOMNode=Object(E.findDOMNode)(this),this.offset=this.DOMNode.getBoundingClientRect().top,this.clientHeight=Object(f.b)(),window.addEventListener("scroll",this.scrollHandler,!1),window.addEventListener("resize",this.resizeHandler,!1))}},{key:"componentWillUnmount",value:function componentWillUnmount(){Object(f.e)()||(window.removeEventListener("scroll",this.scrollHandler,!1),window.removeEventListener("resize",this.resizeHandler,!1))}},{key:"resizeHandler",value:function resizeHandler(){this.clientHeight=Object(f.b)()}},{key:"scrollHandler",value:function scrollHandler(){var e=this.offset-window.scrollY;e>0?(this.DOMNode.style.height="".concat(this.clientHeight-e,"px"),this.DOMNode.style.top="".concat(e,"px")):(this.DOMNode.style.top=0,this.DOMNode.style.height="".concat(this.clientHeight,"px"))}},{key:"render",value:function render(){var e=this.props.inOverlay;return a.a.createElement("div",{className:e?"overlay-sidenav__doc-nav-tree":"docs-nav"},a.a.createElement(SidebarContent,this.props))}}]),Sidebar}(),B=n("l4cn");function DescriptionTitle_slicedToArray(e,t){return function DescriptionTitle_arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function DescriptionTitle_iterableToArrayLimit(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],o=!0,a=!1,r=void 0;try{for(var i,l=e[Symbol.iterator]();!(o=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);o=!0);}catch(e){a=!0,r=e}finally{try{o||null==l.return||l.return()}finally{if(a)throw r}}return n}(e,t)||function DescriptionTitle_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function DescriptionTitle_typeof(e){return(DescriptionTitle_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _templateObject6(){var e=DescriptionTitle_taggedTemplateLiteral(["\n  mutation($collectionId: String!,$environment: String,$markdown: Boolean,\n    $resolve: Boolean,\n    $updateData: UpdateDocumentationRequestInput) {\n    updateDocumentationRequest(\n        collectionId: $collectionId\n        environment: $environment\n        markdown: $markdown\n        resolve: $resolve\n        updateData: $updateData\n    ){\n        name\n    }\n  }"]);return _templateObject6=function _templateObject6(){return e},e}function _templateObject5(){var e=DescriptionTitle_taggedTemplateLiteral(["\n  mutation($collectionId: String!,$environment: String,$markdown: Boolean,\n    $resolve: Boolean,\n    $updateData: UpdateDocumentationFolderInput) {\n    updateDocumentationFolder(\n        collectionId: $collectionId\n        environment: $environment\n        markdown: $markdown\n        resolve: $resolve\n        updateData: $updateData\n    ){\n        name\n    }\n  }"]);return _templateObject5=function _templateObject5(){return e},e}function DescriptionTitle_templateObject4(){var e=DescriptionTitle_taggedTemplateLiteral(["\n    mutation($collectionId: String!,$environment: String,$markdown: Boolean, $resolve: Boolean,\n      $updateData: UpdateDocumentationInfoInput) {\n      updateDocumentationInfo(\n          collectionId: $collectionId\n          environment: $environment\n          markdown: $markdown\n          resolve: $resolve\n          updateData: $updateData\n      ){\n          name\n      }\n  }"]);return DescriptionTitle_templateObject4=function _templateObject4(){return e},e}function DescriptionTitle_templateObject3(){var e=DescriptionTitle_taggedTemplateLiteral(["\n  query($collectionId: String!, $path: String!, $environment: String, $version: String) {\n    documentation(collectionId: $collectionId, path: $path, environment: $environment,\n      versionTag: $version, markdown: true) {\n        request(path: $path){\n          name\n        }\n      }\n  }"]);return DescriptionTitle_templateObject3=function _templateObject3(){return e},e}function DescriptionTitle_templateObject2(){var e=DescriptionTitle_taggedTemplateLiteral(["\n  query($collectionId: String!, $path: String!, $environment: String, $version: String) {\n    documentation(collectionId: $collectionId, path: $path, environment: $environment,\n      versionTag: $version, markdown: true) {\n        folder(path: $path){\n          name\n        }\n      }\n  }"]);return DescriptionTitle_templateObject2=function _templateObject2(){return e},e}function DescriptionTitle_templateObject(){var e=DescriptionTitle_taggedTemplateLiteral(["\n  query($collectionId: String!, $path: String, $environment: String, $version: String) {\n    documentation(collectionId: $collectionId, path: $path, environment: $environment,\n      versionTag: $version, markdown: true) {\n      name\n    }\n  }"]);return DescriptionTitle_templateObject=function _templateObject(){return e},e}function DescriptionTitle_taggedTemplateLiteral(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var V=255,$=Object(D.b)(DescriptionTitle_templateObject()),W=Object(D.b)(DescriptionTitle_templateObject2()),H=Object(D.b)(DescriptionTitle_templateObject3()),K=Object(D.b)(DescriptionTitle_templateObject4()),Q=Object(D.b)(_templateObject5()),Y=Object(D.b)(_templateObject6());function DescriptionTitle_generateEntityPath(e){var t=encodeURIComponent("1.0"),n=encodeURIComponent(e.entityID),o=encodeURIComponent(e.entityType),a=encodeURIComponent(e.entityObjectPath);return"v=".concat(t,":objectPath=").concat(a,"&type=").concat(o,"&uuid=").concat(n)}function RequestUrl(e){var t=s.a.get(e,"item.request.url")||"";return!t||"object"!==DescriptionTitle_typeof(t)&&"string"!=typeof t?null:("object"===DescriptionTitle_typeof(t)&&(t=t.raw||""),a.a.createElement("div",{className:"docs-desc-title__url"},t))}function RequestTitle(e){var t=DescriptionTitle_slicedToArray(Object(o.useState)(s.a.get(e,"item.name")),2),n=t[0],r=t[1],i=DescriptionTitle_slicedToArray(Object(o.useState)(!1),2),l=i[0],c=i[1],u=DescriptionTitle_slicedToArray(Object(o.useState)(!1),2),m=u[0],h=u[1],g=DescriptionTitle_slicedToArray(Object(o.useState)(null),2),y=g[0],b=g[1],v=s.a.get(e,"collectionId"),_=s.a.get(e,"item._postman_id")+"-"+s.a.get(e,"item.name"),C=DescriptionTitle_slicedToArray(Object(N.a)(H,{variables:{collectionId:v,path:DescriptionTitle_generateEntityPath({entityID:s.a.get(e,"item._postman_id"),entityType:"request",entityObjectPath:e.path+".name"})},fetchPolicy:"network-only",onCompleted:function onCompleted(e){b(e.documentation.request.name),r(e.documentation.request.name),c(!0)},onError:function onError(e){var t=e.graphQLErrors,n=getInlineEditErrorDetails(s.a.get(t,"[0].extensions.code"),"fetch"),o=n.errorName,a=n.errorDescription;window.pm.actions.showToast({type:"error",title:o,body:a})}}),2),E=C[0],w=C[1].loading,O=DescriptionTitle_slicedToArray(Object(N.b)(Y,{onCompleted:function onCompleted(t){window.pm.actions.updateCollectionData({entityCollectionId:v,entityId:s.a.get(e,"item._postman_id"),entityType:"request",updateEntityData:t.updateDocumentationRequest.name,entityPath:e.path,updatedKey:"name"})},onError:function onError(e){var t=e.graphQLErrors;h(!1),c(!0);var n=getInlineEditErrorDetails(s.a.get(t,"[0].extensions.code"),"update"),o=n.errorName,a=n.errorDescription;window.pm.actions.showToast({type:"error",title:o,body:a})}}),1)[0];function handleCancelEdit(){c(!1),r(s.a.get(e,"item.name"))}var P=s.a.get(e,"item.request.method","")||"",k=s.a.get(e,"item.request.auth"),S=k&&"noauth"!==s.a.get(k,"type"),T=s.a.get(e,"item._postman_id"),D="request/".concat(T),j=e.focusedAnchor||"";return a.a.createElement(o.Fragment,null,a.a.createElement("div",{className:p()("request-title push--bottom",{editable:e.editableDocumentation,hasAuth:S})},a.a.createElement("span",{className:"pm-h2 request-method pm-method-color-".concat(P.toLowerCase())},P),a.a.createElement("h2",{className:p()("pm-h2 docs-desc-title docs-desc-title--request",{hasAuth:S,loading:w})},a.a.createElement("span",{className:"docs-desc-title--request-name",key:_,onClick:function onClick(t){!function handleSingleClick(t){!e.editableDocumentation||m||l||Object(f.a)(t)||(R&&R.name&&R.name[s.a.get(e,"item.type")]&&A.a.recordEvent(R.name[s.a.get(e,"item.type")],{entityId:s.a.get(e,"item._postman_id")}),E())}(t)}},a.a.createElement(I,{autoResize:!0,disableOnEmpty:!0,isControlled:!0,showEditorActions:!0,content:n,editing:l,loading:w,maxLength:V,saving:m,onCancel:handleCancelEdit,onSave:function handleSaveContent(){if(s.a.get(e,"item.name")!==n)if(y&&y===n)handleCancelEdit();else{var t={collectionId:v,environment:e.currentEnvironmentId?e.currentEnvironmentId:"",markdown:!0,resolve:!0,updateData:{path:DescriptionTitle_generateEntityPath({entityID:s.a.get(e,"item._postman_id"),entityType:"request",entityObjectPath:e.path}),name:n}};h(!0),O({variables:t})}else handleCancelEdit()},onToggleEdit:function handleToggleEdit(){c(!l)},onUpdate:function handleUpdateContent(e){r(e)}}))),a.a.createElement("div",{className:"request-auth-comments"},S&&a.a.createElement(d.E,{align:"right",className:"push-half--left docs-desc-title--request-lock",content:"This request requires authentication",name:"lock",size:"sm"}),a.a.createElement(B.b,{anchor:D,comments:e.comments,open:j.indexOf(D)>-1,teamUsers:e.teamUsers,user:e.user,onCommentCreate:function onCommentCreate(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];e.onCommentCreate.apply(e,n.concat([D]))},onCommentDelete:e.onCommentDelete,onCommentUpdate:e.onCommentUpdate}))),a.a.createElement(RequestUrl,e))}function FolderTitle(e){var t=DescriptionTitle_slicedToArray(Object(o.useState)(s.a.get(e,"item.name")),2),n=t[0],r=t[1],i=DescriptionTitle_slicedToArray(Object(o.useState)(!1),2),l=i[0],c=i[1],u=DescriptionTitle_slicedToArray(Object(o.useState)(!1),2),d=u[0],m=u[1],h=DescriptionTitle_slicedToArray(Object(o.useState)(null),2),g=h[0],y=h[1],b=s.a.get(e,"collectionId"),v=s.a.get(e,"item._postman_id")+"-"+s.a.get(e,"item.name"),_=DescriptionTitle_slicedToArray(Object(N.a)(W,{variables:{collectionId:b,path:DescriptionTitle_generateEntityPath({entityID:s.a.get(e,"item._postman_id"),entityType:"folder",entityObjectPath:e.path+".name"})},fetchPolicy:"network-only",onCompleted:function onCompleted(e){y(e.documentation.folder.name),r(e.documentation.folder.name),c(!0)},onError:function onError(e){var t=e.graphQLErrors,n=getInlineEditErrorDetails(s.a.get(t,"[0].extensions.code"),"fetch"),o=n.errorName,a=n.errorDescription;window.pm.actions.showToast({type:"error",title:o,body:a})}}),2),C=_[0],E=_[1].loading,w=DescriptionTitle_slicedToArray(Object(N.b)(Q,{onCompleted:function onCompleted(t){window.pm.actions.updateCollectionData({entityCollectionId:b,entityId:s.a.get(e,"item._postman_id"),entityType:"folder",updateEntityData:t.updateDocumentationFolder.name,entityPath:e.path,updatedKey:"name"})},onError:function onError(e){var t=e.graphQLErrors;m(!1),c(!0);var n=getInlineEditErrorDetails(s.a.get(t,"[0].extensions.code"),"update"),o=n.errorName,a=n.errorDescription;window.pm.actions.showToast({type:"error",title:o,body:a})}}),1)[0];function handleCancelEdit(){c(!1),r(s.a.get(e,"item.name"))}return a.a.createElement("div",{className:p()("folder-title",{editable:e.editableDocumentation})},a.a.createElement("h2",{className:p()("pm-h2 docs-desc-title docs-desc-title--folder",{loading:E}),key:v,onClick:function onClick(t){!function handleSingleClick(t){!e.editableDocumentation||d||l||Object(f.a)(t)||(R&&R.name&&R.name[s.a.get(e,"item.type")]&&A.a.recordEvent(R.name[s.a.get(e,"item.type")],{entityId:s.a.get(e,"item._postman_id")}),C())}(t)}},a.a.createElement(I,{autoResize:!0,disableOnEmpty:!0,isControlled:!0,showEditorActions:!0,content:n,editing:l,loading:E,maxLength:V,saving:d,onCancel:handleCancelEdit,onSave:function handleSaveContent(){if(s.a.get(e,"item.name")!==n)if(g&&g===n)handleCancelEdit();else{var t={collectionId:b,environment:e.currentEnvironmentId?e.currentEnvironmentId:"",markdown:!0,resolve:!0,updateData:{path:DescriptionTitle_generateEntityPath({entityID:s.a.get(e,"item._postman_id"),entityType:"folder",entityObjectPath:e.path}),name:n}};m(!0),w({variables:t})}else handleCancelEdit()},onToggleEdit:function handleToggleEdit(){c(!l)},onUpdate:function handleUpdateContent(e){r(e)}})))}function CollectionTitle(e){var t=DescriptionTitle_slicedToArray(Object(o.useState)(s.a.get(e,"item.name")),2),n=t[0],r=t[1],i=s.a.get(e,"collectionId"),l=s.a.get(e,"item._postman_id")+"-"+s.a.get(e,"item.name"),c=DescriptionTitle_slicedToArray(Object(o.useState)(null),2),u=c[0],d=c[1],m=DescriptionTitle_slicedToArray(Object(o.useState)(!1),2),h=m[0],g=m[1],y=DescriptionTitle_slicedToArray(Object(o.useState)(!1),2),b=y[0],v=y[1],_=DescriptionTitle_slicedToArray(Object(N.a)($,{variables:{collectionId:i,path:DescriptionTitle_generateEntityPath({entityID:s.a.get(e,"item._postman_id"),entityType:"collection",entityObjectPath:"info.name"})},fetchPolicy:"network-only",onCompleted:function onCompleted(e){d(e.documentation.name),r(e.documentation.name),g(!0)},onError:function onError(e){var t=e.graphQLErrors,n=getInlineEditErrorDetails(s.a.get(t,"[0].extensions.code"),"fetch"),o=n.errorName,a=n.errorDescription;window.pm.actions.showToast({type:"error",title:o,body:a})}}),2),C=_[0],E=_[1].loading,w=DescriptionTitle_slicedToArray(Object(N.b)(K,{onCompleted:function onCompleted(t){window.pm.actions.updateCollectionData({entityCollectionId:i,entityId:s.a.get(e,"item._postman_id"),updateEntityData:t.updateDocumentationInfo.name,entityPath:"info",updatedKey:"name"}),window.pm.actions.updateCollectionMeta({name:n}),r(t.updateDocumentationInfo.name),g(!1),v(!1)},onError:function onError(e){var t=e.graphQLErrors;v(!1),g(!0);var n=getInlineEditErrorDetails(s.a.get(t,"[0].extensions.code"),"fetch"),o=n.errorName,a=n.errorDescription;window.pm.actions.showToast({type:"error",title:o,body:a})}}),1)[0];function handleCancelEdit(){g(!1),r(s.a.get(e,"item.name"))}return a.a.createElement("div",{className:p()("collection-title",{editable:e.editableDocumentation})},a.a.createElement("h1",{className:p()("pm-h1 docs-desc-title docs-desc-title--head",{loading:E}),id:"introduction",key:l,onClick:function onClick(t){!function handleSingleClick(t){!e.editableDocumentation||b||h||Object(f.a)(t)||(R&&R.name&&R.name[s.a.get(e,"item.type")]&&A.a.recordEvent(R.name[s.a.get(e,"item.type")],{entityId:i}),C())}(t)}},a.a.createElement(I,{autoResize:!0,disableOnEmpty:!0,isControlled:!0,showEditorActions:!0,content:n,editing:h,loading:E,maxLength:V,saving:b,onCancel:handleCancelEdit,onSave:function handleSaveContent(){if(s.a.get(e,"item.name")!==n)if(u&&u===n)handleCancelEdit();else{var t={collectionId:i,environment:e.currentEnvironmentId?e.currentEnvironmentId:"",markdown:!0,resolve:!0,updateData:{path:DescriptionTitle_generateEntityPath({entityID:s.a.get(e,"item._postman_id"),entityType:"collection",entityObjectPath:"info"}),name:n}};v(!0),w({variables:t})}else handleCancelEdit()},onToggleEdit:function handleToggleEdit(){g(!h)},onUpdate:function handleUpdateContent(e){r(e)}})),a.a.createElement(B.b,{comments:e.comments,teamUsers:e.teamUsers,user:e.user,onCommentCreate:e.onCommentCreate,onCommentDelete:e.onCommentDelete,onCommentUpdate:e.onCommentUpdate}))}function DescriptionTitle(e){var t=s.a.get(e,"item.type");return"head"===t?a.a.createElement(CollectionTitle,e):"folder"===t?a.a.createElement(FolderTitle,e):a.a.createElement(RequestTitle,e)}var Z=n("N/WL"),G=n.n(Z);function editorIcons(e){switch(e.command){case"header":return a.a.createElement("span",null,a.a.createElement("svg",{fill:"none",height:"16",viewBox:"0 0 16 16",width:"16",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("path",{d:"M8.14535 12.8539H6.43605L5.90116 10.4434H3.25L2.71512 12.8539H1L3.57558 3H5.57558L8.14535 12.8539ZM4.57558 4.32944C4.54457 4.53397 4.48643 4.84076 4.40116 5.24982C4.31977 5.65401 4.0562 6.84466 3.61047 8.82177H5.5407C5.08721 6.81544 4.81977 5.61505 4.73837 5.2206C4.66085 4.82615 4.60659 4.5291 4.57558 4.32944Z",fill:"#A9A9A9"}),a.a.createElement("path",{d:"M10.7035 13C10.095 13 9.62016 12.793 9.27907 12.3791C8.93798 11.9603 8.76744 11.3735 8.76744 10.6187C8.76744 9.80058 8.96899 9.17969 9.37209 8.75603C9.77907 8.32749 10.3857 8.10592 11.1919 8.09131L12.4884 8.06209V7.66034C12.4884 7.15875 12.4205 6.77891 12.2849 6.52082C12.1492 6.26272 11.9302 6.13367 11.6279 6.13367C11.345 6.13367 11.1357 6.22376 11 6.40394C10.8682 6.57925 10.7868 6.8617 10.7558 7.25128L9.05233 7.14901C9.26163 5.58583 10.1434 4.80424 11.6977 4.80424C12.4806 4.80424 13.0795 5.04529 13.4942 5.52739C13.9128 6.0095 14.1221 6.71804 14.1221 7.65303V10.5164C14.1221 10.9596 14.1609 11.2664 14.2384 11.4368C14.3198 11.6024 14.4535 11.6852 14.6395 11.6852C14.7636 11.6852 14.8837 11.6706 15 11.6413V12.7516C14.9031 12.7809 14.8159 12.8076 14.7384 12.832C14.6609 12.8563 14.5833 12.8758 14.5058 12.8904C14.4283 12.905 14.345 12.9172 14.2558 12.927C14.1705 12.9367 14.0698 12.9416 13.9535 12.9416C13.5426 12.9416 13.2384 12.8149 13.0407 12.5617C12.8469 12.3085 12.7306 11.936 12.6919 11.4441H12.657C12.4128 11.9944 12.1337 12.3913 11.8198 12.6348C11.5097 12.8783 11.1376 13 10.7035 13ZM12.4884 9.1943L11.7093 9.20891C11.3605 9.21865 11.1066 9.26491 10.9477 9.3477C10.7926 9.42561 10.6744 9.55466 10.593 9.73484C10.5116 9.91015 10.4709 10.1512 10.4709 10.458C10.4709 11.1982 10.7035 11.5683 11.1686 11.5683C11.5446 11.5683 11.8585 11.3832 12.1105 11.0131C12.3624 10.6382 12.4884 10.1658 12.4884 9.59606V9.1943Z",fill:"#A9A9A9"})),a.a.createElement("svg",{fill:"none",height:"16",viewBox:"0 0 16 16",width:"16",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("path",{clipRule:"evenodd",d:"M8 11L4 6L12 6L8 11Z",fill:"#A9A9A9",fillRule:"evenodd"})));case"bold":return a.a.createElement("svg",{fill:"none",height:"12",viewBox:"0 0 12 12",width:"12",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("path",{d:"M10 7.86064C10 8.84458 9.68478 9.61379 9.05434 10.1683C8.4239 10.7228 7.55195 11 6.43851 11H2V0H6.00381C7.11217 0 7.95106 0.23919 8.5205 0.717569C9.09501 1.19051 9.38227 1.87275 9.38227 2.76427C9.38227 3.38942 9.21449 3.91673 8.87893 4.34618C8.54337 4.7702 8.02733 5.06103 7.33079 5.21868C8.20019 5.31653 8.86114 5.59377 9.31363 6.05041C9.77121 6.50704 10 7.11045 10 7.86064ZM7.11725 3.09044C7.11725 2.22066 6.69272 1.78577 5.84366 1.78577H4.24976V4.38695H5.85891C6.69781 4.38695 7.11725 3.95478 7.11725 3.09044ZM7.73499 7.65678C7.73499 7.1784 7.60025 6.81147 7.33079 6.55597C7.06133 6.29503 6.66984 6.16457 6.15634 6.16457H4.24976V9.21423H6.20972C7.22656 9.21423 7.73499 8.69508 7.73499 7.65678Z",fill:"#A9A9A9"}));case"italic":return a.a.createElement("svg",{fill:"none",height:"12",viewBox:"0 0 12 12",width:"12",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("path",{d:"M3.9318 0H10L9.7788 1.27205H7.44885L5.95945 9.72795H8.2894L8.0682 11H2L2.2212 9.72795H4.55115L6.04055 1.27205H3.7106L3.9318 0Z",fill:"#A9A9A9"}));case"underline":return a.a.createElement("svg",{fill:"none",height:"12",viewBox:"0 0 12 12",width:"12",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("path",{d:"M9.06265 5.28074C9.06265 6.375 8.8153 7.17213 8.32059 7.67213C7.82587 8.16803 7.03173 8.41598 5.93816 8.41598C4.87931 8.41598 4.1112 8.17623 3.63385 7.69672C3.16084 7.21311 2.92433 6.44467 2.92433 5.39139V0H4.16762V5.23156C4.16762 6.06762 4.29346 6.64959 4.54516 6.97746C4.80119 7.30123 5.26336 7.46311 5.93165 7.46311C6.63032 7.46311 7.12069 7.29508 7.40277 6.95902C7.68484 6.62295 7.82587 6.02049 7.82587 5.15164V0H9.06265V5.28074Z",fill:"#A9A9A9"}),a.a.createElement("path",{d:"M2 11.4836H10V12H2V11.4836Z",fill:"#A9A9A9"}))}}var J=Z.MarkdownUtil.selectWord;function setHeader(e,t,n){var o=Z.MarkdownUtil.selectWord({text:e.text,selection:e.selection}),a=t.setSelectionRange(o),r=t.replaceSelection(String(n)+a.selectedText);t.setSelectionRange({start:r.selection.end-a.selectedText.length,end:r.selection.end})}function MarkdownEditor_typeof(e){return(MarkdownEditor_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function MarkdownEditor_defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function MarkdownEditor_getPrototypeOf(e){return(MarkdownEditor_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function MarkdownEditor_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function MarkdownEditor_setPrototypeOf(e,t){return(MarkdownEditor_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var X={underlineCommand:{name:"underline",buttonProps:{"aria-label":"Add underline text"},execute:function execute(e,t){var n=J({text:e.text,selection:e.selection}),o=t.setSelectionRange(n),a=t.replaceSelection("<u>".concat(o.selectedText,"</u>"));t.setSelectionRange({start:a.selection.end-o.selectedText.length-4,end:a.selection.end-4})},keyCommand:"underline"},headerCommand:{name:"header",buttonProps:{"aria-label":"Add header"},children:[{name:"header-1",icon:function icon(){return a.a.createElement("p",{className:"header-1"},"Heading 1")},execute:function execute(e,t){return setHeader(e,t,"# ")}},{name:"header-2",icon:function icon(){return a.a.createElement("p",{className:"header-2"},"Heading 2")},execute:function execute(e,t){return setHeader(e,t,"## ")}},{name:"header-3",icon:function icon(){return a.a.createElement("p",{className:"header-3"},"Heading 3")},execute:function execute(e,t){return setHeader(e,t,"### ")}},{name:"header-4",icon:function icon(){return a.a.createElement("p",{className:"header-4"},"Heading 4")},execute:function execute(e,t){return setHeader(e,t,"#### ")}},{name:"header-5",icon:function icon(){return a.a.createElement("p",{className:"header-5"},"Heading 5")},execute:function execute(e,t){return setHeader(e,t,"##### ")}},{name:"header-6",icon:function icon(){return a.a.createElement("p",{className:"header-6"},"Heading 6")},execute:function execute(e,t){return setHeader(e,t,"###### ")}}],keyCommand:"header"}}.headerCommand,ee=Math.ceil(800/24),te=Math.ceil(160/24),ne=function(e){function MarkdownEditor(e){var t;return function MarkdownEditor_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,MarkdownEditor),(t=function MarkdownEditor_possibleConstructorReturn(e,t){return!t||"object"!==MarkdownEditor_typeof(t)&&"function"!=typeof t?MarkdownEditor_assertThisInitialized(e):t}(this,MarkdownEditor_getPrototypeOf(MarkdownEditor).call(this,e))).state={content:t.props.content,mode:t.props.mode,contentHeight:200,cursorPosition:null},t.onContentUpdate=t.onContentUpdate.bind(MarkdownEditor_assertThisInitialized(t)),t.getContentHeight=t.getContentHeight.bind(MarkdownEditor_assertThisInitialized(t)),t.setEditorHeight=t.setEditorHeight.bind(MarkdownEditor_assertThisInitialized(t)),t.onSave=t.onSave.bind(MarkdownEditor_assertThisInitialized(t)),t.onCancel=t.onCancel.bind(MarkdownEditor_assertThisInitialized(t)),t.onEscPress=t.onEscPress.bind(MarkdownEditor_assertThisInitialized(t)),t.getContent=t.getContent.bind(MarkdownEditor_assertThisInitialized(t)),t.onTabChange=t.onTabChange.bind(MarkdownEditor_assertThisInitialized(t)),t.textAreaRef=a.a.createRef(),t}return function MarkdownEditor_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&MarkdownEditor_setPrototypeOf(e,t)}(MarkdownEditor,o["Component"]),function MarkdownEditor_createClass(e,t,n){return t&&MarkdownEditor_defineProperties(e.prototype,t),n&&MarkdownEditor_defineProperties(e,n),e}(MarkdownEditor,[{key:"componentDidUpdate",value:function componentDidUpdate(){"write"===this.state.mode&&this.setEditorHeight(this.textAreaRef)}},{key:"getContent",value:function getContent(){return this.state.content}},{key:"onContentUpdate",value:function onContentUpdate(e){var t=this,n=s.a.get(this.textAreaRef.current,"textAreaRef.selectionStart",0);this.setState({content:e,cursorPosition:n},function(){return t.setEditorHeight(t.textAreaRef)})}},{key:"onSave",value:function onSave(){if(!this.props.displayLoaderOnSaveButton)return this.props.onSave(this.state.content)}},{key:"onCancel",value:function onCancel(){return this.props.onCancel(this.state.content)}},{key:"onEscPress",value:function onEscPress(){this.props.onEscPress()}},{key:"onTabChange",value:function onTabChange(e){var t=this,n="preview"===e;"string"==typeof e&&this.setState({mode:n?"preview":"write"},function(){!n&&s.a.set(t.textAreaRef.current,"textAreaRef.selectionStart",t.state.cursorPosition)})}},{key:"getContentHeight",value:function getContentHeight(){var e=this.state.content,t=this.textAreaRef.current.textAreaRef.scrollHeight/24;return"string"==typeof e?t:ee}},{key:"setEditorHeight",value:function setEditorHeight(e){if(e){e.current.textAreaRef.rows=te;var t=this.getContentHeight();e.current.textAreaRef.rows=Math.max(6,Math.min(t,ee)),e.current.textAreaRef.style.height="auto"}}},{key:"componentDidMount",value:function componentDidMount(){var e=this;s.a.set(this.textAreaRef.current,"textAreaRef.selectionStart",s.a.get(this.textAreaRef.current,"textAreaRef.value.length")),this.setEditorHeight(this.textAreaRef),this.textAreaRef.current.textAreaRef.onkeydown=function(t){t&&"Escape"===t.key&&e.onEscPress()}}},{key:"render",value:function render(){var e="markdown-save-cta".concat(this.props.displayLoaderOnSaveButton?"--loading":""),t=this.props.editElementsRef;return a.a.createElement(o.Fragment,null,a.a.createElement("div",{ref:t||null},a.a.createElement(a.a.Fragment,null,a.a.createElement(G.a,{commands:[{commands:[X,Z.commands.boldCommand,Z.commands.italicCommand]}],generateMarkdownPreview:function generateMarkdownPreview(e){return Promise.resolve(Object(d.mb)(Object(d.lb)(e)))},getIcon:function getIcon(e){return a.a.createElement(editorIcons,{command:e})},l18n:{write:"Markdown",preview:"Preview"},maxEditorHeight:800,minEditorHeight:160,minPreviewHeight:150,ref:this.textAreaRef,selectedTab:this.state.mode,textAreaProps:{autoFocus:!0},value:this.state.content,onChange:this.onContentUpdate,onTabChange:this.onTabChange}))),a.a.createElement("div",{className:"markdown-editor-ctas"},!this.props.hideSaveButton&&a.a.createElement(c.Button,{className:"markdown-save-cta ".concat(e),disabled:this.props.displayLoaderOnSaveButton||this.state.content===this.props.content,onClick:this.onSave},this.props.displayLoaderOnSaveButton?a.a.createElement(c.Loader,{size:"sm"}):"Save"),!this.props.displayLoaderOnSaveButton&&!this.props.hideSaveButton&&a.a.createElement(c.Button,{className:"markdown-cancel-cta",pmStyle:"secondary",size:"sm",onClick:this.onCancel},"Cancel")))}}]),MarkdownEditor}(),oe=n("EXxd"),ae=n("o9Si");var re=Object(i.b)(function DiscardChanges_mapStateToProps(e){return{deleting:e.shared.collections.deleting}},s.a.pick(ae.b,["hideModal"]))(function DiscardChanges(e){var t=s.a.get(e,"event");return a.a.createElement(oe.a,{actionType:"error",body:"<p>There are changes in this page which will be lost if you decide to navigateaway from this page. Are you sure you want to proceed?</p>",cancelLabel:"Cancel",confirmLabel:"Discard Changes",title:"Discard Changes",onCancel:function onCancel(){t.preventDefault(),t.returnValue="",e.hideModal()},onConfirm:function onConfirm(){delete t.returnValue}})});function DescriptionEditor_slicedToArray(e,t){return function DescriptionEditor_arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function DescriptionEditor_iterableToArrayLimit(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],o=!0,a=!1,r=void 0;try{for(var i,l=e[Symbol.iterator]();!(o=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);o=!0);}catch(e){a=!0,r=e}finally{try{o||null==l.return||l.return()}finally{if(a)throw r}}return n}(e,t)||function DescriptionEditor_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function DescriptionEditor_templateObject6(){var e=DescriptionEditor_taggedTemplateLiteral(["\n    mutation($collectionId: String!, $environment: String, $updateData: UpdateDocumentationInfoInput){\n      updateDocumentationInfo(\n          collectionId: $collectionId\n          environment: $environment\n          markdown: false\n          updateData: $updateData,\n          resolve: true\n      ){\n          description\n      }\n    }\n  "]);return DescriptionEditor_templateObject6=function _templateObject6(){return e},e}function DescriptionEditor_templateObject5(){var e=DescriptionEditor_taggedTemplateLiteral(["\n    mutation($collectionId: String!, $environment: String, $updateData: UpdateDocumentationFolderInput){\n      updateDocumentationFolder(\n          collectionId: $collectionId\n          environment: $environment\n          markdown: false\n          updateData: $updateData,\n          resolve: true\n      ){\n          description\n      }\n    }\n  "]);return DescriptionEditor_templateObject5=function _templateObject5(){return e},e}function DescriptionEditor_templateObject4(){var e=DescriptionEditor_taggedTemplateLiteral(["\n    mutation($collectionId: String!, $environment: String, $updateData: UpdateDocumentationRequestInput){\n      updateDocumentationRequest(\n          collectionId: $collectionId\n          environment: $environment\n          markdown: false\n          updateData: $updateData,\n          resolve: true\n      ){\n          description\n      }\n    }\n  "]);return DescriptionEditor_templateObject4=function _templateObject4(){return e},e}function DescriptionEditor_templateObject3(){var e=DescriptionEditor_taggedTemplateLiteral(['\n  query($collectionId: String!, $environment: String, $path: String) {\n    documentation(collectionId: $collectionId, environment: $environment, path: $path,\n      versionTag: "latest", markdown: true) {\n        description\n    }\n  }']);return DescriptionEditor_templateObject3=function _templateObject3(){return e},e}function DescriptionEditor_templateObject2(){var e=DescriptionEditor_taggedTemplateLiteral(['\n  query($collectionId: String!, $environment: String, $path: String!) {\n    documentation(collectionId: $collectionId, environment: $environment, path: $path,\n      versionTag: "latest", markdown: true) {\n        folder(path: $path){\n          description\n      }\n    }\n  }']);return DescriptionEditor_templateObject2=function _templateObject2(){return e},e}function DescriptionEditor_templateObject(){var e=DescriptionEditor_taggedTemplateLiteral(['\n  query($collectionId: String!, $environment: String, $path: String!) {\n    documentation(collectionId: $collectionId, environment: $environment, path: $path,\n      versionTag: "latest", markdown: true) {\n        request(path: $path){\n          description\n      }\n    }\n  }']);return DescriptionEditor_templateObject=function _templateObject(){return e},e}function DescriptionEditor_taggedTemplateLiteral(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var ie=Object(D.b)(DescriptionEditor_templateObject()),le=Object(D.b)(DescriptionEditor_templateObject2()),se=Object(D.b)(DescriptionEditor_templateObject3()),ce=Object(D.b)(DescriptionEditor_templateObject4()),ue=Object(D.b)(DescriptionEditor_templateObject5()),pe=Object(D.b)(DescriptionEditor_templateObject6());function getItemType(e){return"head"===e.type?"info":e.type}function DescriptionEditor(e){var t,n,r,i,l,u,m,h,g,y=Object(o.useRef)(),b=Object(o.useRef)(),v=Object(o.useRef)(),_=Object(o.useRef)(),C=Object(o.useRef)(),E=DescriptionEditor_slicedToArray(Object(o.useState)(e.description),2),w=E[0],O=E[1],P=DescriptionEditor_slicedToArray(Object(o.useState)(""),2),k=P[0],S=P[1],T=DescriptionEditor_slicedToArray(Object(o.useState)(""),2),I=T[0],D=T[1],j=DescriptionEditor_slicedToArray(Object(o.useState)(!1),2),q=j[0],M=j[1],x=DescriptionEditor_slicedToArray(Object(o.useState)(!1),2),L=x[0],F=x[1],U=DescriptionEditor_slicedToArray(Object(o.useState)(!1),2),z=U[0],B=U[1],V=DescriptionEditor_slicedToArray(Object(o.useState)(!1),2),$=V[0],W=V[1],H=DescriptionEditor_slicedToArray(Object(o.useState)(!1),2),K=H[0],Q=H[1],Y=DescriptionEditor_slicedToArray(Object(o.useState)(!1),2),Z=Y[0],G=Y[1],J=DescriptionEditor_slicedToArray(Object(o.useState)(!1),2),X=J[0],ee=J[1],te=DescriptionEditor_slicedToArray(Object(o.useState)(200),2),oe=te[0],ae=te[1],de=DescriptionEditor_slicedToArray(Object(o.useState)(500),2),me=de[0],fe=de[1],he=DescriptionEditor_slicedToArray(Object(o.useState)(""),2),ge=he[0],ye=he[1],be=Object(o.useRef)(z),ve=Object(o.useRef)($),_e=Object(o.useRef)(L),Ce=Object(o.useRef)(I),Ee=Object(o.useRef)(k),we=e.collectionId,Oe=s.a.get(e,"item",{}),Pe=getItemType(Oe),ke=s.a.get(e,"currentEnvironmentId"),Se=[],Te=DescriptionEditor_slicedToArray(Object(N.a)(function querySelector(e){switch(getItemType(e)){case"request":return ie;case"folder":return le;case"info":return se;default:return}}(Oe),{variables:{collectionId:we,path:function composeQueryPath(e){var t=getItemType(e),n=encodeURIComponent("".concat(e.path||"info").concat("request"===t?".request":"",".description")),o="info"===t?"collection":t,a=encodeURIComponent(e._postman_id);return"v=".concat("1.0",":objectPath=").concat(n,"&type=").concat(o,"&uuid=").concat(a)}(Oe)},onCompleted:function onCompleted(e){if(!Z){var t="info"===Pe?s.a.get(e,"documentation.description"):s.a.get(e,["documentation",Pe,"description"]);B(!1),be.current=!1,i(),Q(!1),D(t),Ce.current=t,F(!0),_e.current=!0,g()}},onError:function onError(e){var t=e.graphQLErrors,n=getInlineEditErrorDetails(s.a.get(t,"[0].extensions.code"),"fetch"),o=n.errorName,a=n.errorDescription;window.pm.actions.showToast({type:"error",title:o,body:a}),B(!1),be.current=!1,Q(!1),g()},fetchPolicy:"network-only"}),1)[0],Ie=DescriptionEditor_slicedToArray(Object(N.b)(function mutationSelector(e){switch(getItemType(e)){case"request":return ce;case"folder":return ue;case"info":return pe;default:return}}(Oe),{variables:{collectionId:we,environment:ke||"",resolve:!0,updateData:{path:function composeMutationPath(e){var t=getItemType(e),n=encodeURIComponent("".concat(e.path||"info").concat("request"===t?".request":"")),o="info"===t?"collection":t,a=encodeURIComponent(e._postman_id);return"v=".concat("1.0",":objectPath=").concat(n,"&type=").concat(o,"&uuid=").concat(a)}(Oe),description:k}},onCompleted:function onCompleted(t){if(!Z){var o=s.a.get(t,[function getItemMutation(e,t){return{request:{input:"UpdateDocumentationRequestInput",type:"updateDocumentationRequest"},folder:{input:"UpdateDocumentationFolderInput",type:"updateDocumentationFolder"},info:{input:"UpdateDocumentationInfoInput",type:"updateDocumentationInfo"}}[getItemType(e)][t]}(Oe,"type"),"description"]);O(o),S(""),Ee.current="",D(""),Ce.current="",F(!1),_e.current=!1,W(!1),ve.current=!1,M(!1),i(),Q(!1),window.pm.actions.updateCollectionData({entityCollectionId:we,entityId:s.a.get(e,"item._postman_id"),entityType:s.a.get(Oe,"type"),updateEntityData:o,entityPath:e.path,updatedKey:"description"}),g(),e.onSave&&e.onSave(),n()}},onError:function onError(e){var t=e.graphQLErrors;if(!Z){var n=getInlineEditErrorDetails(s.a.get(t,"[0].extensions.code"),"update").errorDescription;ye(n),W(!1),ve.current=!1,i(),Q(!1),ee(!0),g()}}}),1)[0],Ne="editable-rendered-markdown".concat(e.editable?"--editable":"--non-editable"),De="docs-desc-body".concat(w?"":"--placeholder");function handleUnsavedChanges(){var t=v.current&&"function"==typeof v.current.getContent&&v.current.getContent(),o=Ce.current!==t;if(_e.current){if(n(),o)return S(v.current.getContent()),Ee.current=v.current.getContent(),ee(!1),ye(""),M(o),F(!1),_e.current=!1,void("function"==typeof e.onExit&&e.onExit());F(!1),_e.current=!1,"function"==typeof e.onExit&&e.onExit()}}function discardChanges(e,t){e.preventDefault(),event.returnValue="",t&&window.pm.actions.showModal({children:a.a.createElement(re,{event:e})})}function updateCollectionField(){var e=_.current.clientHeight,t=_.current.clientWidth;S(v.current.getContent()),Ee.current=v.current.getContent(),W(!0),ve.current=!0,ae(e),fe(t),ee(!1),ye("")}function attachExitHandlers(){var e=document.getElementsByClassName("docs-description");s.a.range(0,e.length).forEach(function(n){e[n].addEventListener("click",t)})}return Object(o.useEffect)(function(){$&&(Ie(),h(),r("isSaving"))},[$,Ie,r]),Object(o.useEffect)(function(){z&&r("isLoading")},[z,r]),Object(o.useEffect)(function(){L||0!==s.a.get(k,"length")?l():u()},[u,L,l,k]),n=function detachExitHandlers(){var e=document.getElementsByClassName("docs-description");s.a.range(0,e.length).forEach(function(n){e[n].removeEventListener("click",t)})},t=function wasCurrentElementClicked(e){y.current.contains(e.target)||handleUnsavedChanges()},m=function setLoaderOffset(){C.current.style.top=C.current.style&&"".concat((oe-s.a.get(C.current,"clientHeight",oe))/2,"px")},r=function setupAbort(e){Se.push(setTimeout(function(){if("isLoading"===e&&be.current)return Q(!0),void m();ve.current&&(Q(!0),m())},5e3))},i=function clearAbort(){Se.forEach(function(e){clearTimeout(e)})},l=function setupDiscard(){window.onbeforeunload=discardChanges},u=function clearDiscard(){window.onbeforeunload=null},window.onpopstate=function(){u()},h=function disableClickInTransientState(){var e=document.getElementsByClassName("editable-rendered-markdown editable-rendered-markdown--editable");e&&Object.keys(e).forEach(function(t){e[t].onclick=function(e){e.stopImmediatePropagation()}})},g=function restoreClickOnDescriptions(){var e=document.getElementsByClassName("editable-rendered-markdown editable-rendered-markdown--editable");e&&Object.keys(e).forEach(function(t){e[t].onclick=null})},a.a.createElement("div",{className:"docs-description",ref:y},X?a.a.createElement("div",{className:"description-editor-loader-container description-editor-loader-container--failure",style:{height:oe,width:me,display:"block"}},a.a.createElement("div",{className:"description-editor-loader",ref:C},a.a.createElement("div",{className:"description-editor-loader--text"},a.a.createElement("p",{className:"description-editor-loader"},ge),a.a.createElement("p",{className:"pm-link push--right description-editor-loader",onClick:function onClick(){ee(!1),ye("")}},"Dismiss"),a.a.createElement("p",{className:"pm-link push--right description-editor-loader",onClick:updateCollectionField},"Retry")))):a.a.createElement("div",{className:p()("description-editor-loader-container",{"description-editor-loader-container--timeout":K,"description-editor-loader-container--loading":z}),style:{height:oe,width:me,display:z||$||X?"block":"none"}},a.a.createElement("div",{className:"description-editor-loader",ref:C},a.a.createElement(c.Loader,{pmStyle:"secondary",size:"xl"}),a.a.createElement("div",{className:"description-editor-loader--text"},K&&a.a.createElement(a.a.Fragment,null,a.a.createElement("p",{className:"description-editor-loader"},"This is taking longer than expected"),a.a.createElement("p",{className:"pm-link push--right description-editor-loader",onClick:function abortOperation(){return z&&(B(!1),be.current=!1),$&&(W(!1),ve.current=!1),G(!0),i(),Q(!1),ye(""),g(),n(),e.onAbort&&e.onAbort()}},"Cancel"))))),L?a.a.createElement(ne,{content:I,displayLoaderOnSaveButton:$,editElementsRef:_,hideSaveButton:X,ref:v,onCancel:function handleCancel(){F(!1),_e.current=!1,W(!1),ve.current=!1,B(!1),be=!1,M(!1),S(""),Ee.current="",D(""),Ce.current="",n(),e.onCancel&&e.onCancel()},onEscPress:handleUnsavedChanges,onSave:updateCollectionField}):a.a.createElement("div",{className:"editable-rendered-markdown ".concat(Ne),ref:b,style:z?{height:oe}:{},onClick:function onClick(t){!function activateEditMode(t){if(e.editable&&!Object(f.a)(t)&&"a"!==t.target.tagName.toLowerCase()){var n=b.current.clientHeight,o=b.current.clientWidth;if(G(!1),q||!w)return D(q?k:w),F(!0),_e.current=!0,void attachExitHandlers();if(B(!0),be.current=!0,ae(n>200?n:200),fe(o),h(),Te(),R&&R.description&&R.description[Pe]){var a=s.a.get(Oe,"_postman_id");"info"===Pe&&(a=we),A.a.recordEvent(R.description[Pe],{entityId:a})}e.onEdit&&e.onEdit(),attachExitHandlers()}}(t)}},a.a.createElement(d.Q,{skipMarkdownParsing:!0,className:"docs-desc-body pm-markdown ".concat(De),source:w||e.editable&&"Add a description..."}),q&&a.a.createElement("div",null,a.a.createElement("svg",{fill:"none",height:"16",viewBox:"0 0 16 16",width:"16",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("path",{d:"M8.89441 0.788874C8.52589 0.0518208 7.47408 0.0518208 7.10556 0.788874L0.723593 13.5528C0.391142 14.2177 0.874638 15 1.61802 15H14.382C15.1253 15 15.6088 14.2177 15.2764 13.5528L8.89441 0.788874ZM8.99999 6.00976C8.99999 6.00976 9.01555 5.00002 7.99999 5.00002C6.98442 5.00002 6.99999 6.00976 6.99999 6.00976V9.00002C6.99999 9.00002 6.98741 10 7.99999 10C9.01256 10 8.99999 9.00002 8.99999 9.00002V6.00976ZM8.00018 12.9996C8.55209 12.9996 8.99999 12.5517 8.99999 11.9998C8.99999 11.4479 8.55209 11 8.00018 11C7.44827 11 7.00037 11.4479 7.00037 11.9998C7.00037 12.5517 7.44827 12.9996 8.00018 12.9996Z",fill:"#949494",fillRule:"evenodd"})),a.a.createElement("span",{className:"description-unsaved-changes"},"Unsaved Changes"))))}function DescriptionBody_extends(){return(DescriptionBody_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function DescriptionBody_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function DescriptionBody_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function KeyValueTableRow(e){var t=s.a.get(e,"row",{});return t.key?a.a.createElement("tr",{className:t.disabled?"disabled":""},a.a.createElement("td",{className:"weight--medium"},t.key),a.a.createElement("td",null,t.value,a.a.createElement(d.Q,{skipMarkdownParsing:!0,className:"pm-markdown docs-request-table__desc",source:"string"==typeof t.description?t.description:s.a.get(t,"description.content")}))):null}function KeyValueTable(e){var t=e.rows,n=e.currentEnvironment,o=s.a.get(n,"data.values");return Array.isArray(t)?(Array.isArray(o)&&o.length>0&&(t=t.map(function(e){return function DescriptionBody_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?DescriptionBody_ownKeys(Object(n),!0).forEach(function(t){DescriptionBody_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DescriptionBody_ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{key:e.key,value:e.value,description:e.description})})),a.a.createElement("table",{className:"pm-table docs-request-table"},a.a.createElement("tbody",null,t.map(function(e,t){return a.a.createElement(KeyValueTableRow,{key:t,row:e})})))):null}function GraphqlBody(e){var t=e.content,n=s.a.get(t,"query",""),r=s.a.get(t,"variables","");return a.a.createElement(o.Fragment,null,n&&a.a.createElement(o.Fragment,null,a.a.createElement("h4",{className:"docs-request-body__secondary-regular"},"query"),a.a.createElement("pre",{className:"docs-request-body__graphql-query"},a.a.createElement("code",null,n))),r&&a.a.createElement(o.Fragment,null,a.a.createElement("h4",{className:"docs-request-body__secondary-regular"},"graphql variables"),a.a.createElement("pre",{className:"docs-request-body__graphql-variables"},a.a.createElement("code",null,r))))}function RequestHeaders(e){var t=s.a.get(e,"item.request.header");return Array.isArray(t)&&t.length?a.a.createElement("div",{className:"docs-request-headers"},a.a.createElement("h4",{className:"pm-h4"},"Headers"),a.a.createElement(KeyValueTable,DescriptionBody_extends({rows:t},e))):null}function RequestParams(e){var t=s.a.get(e,"item.request.urlObject.query");return Array.isArray(t)&&t.length?a.a.createElement("div",{className:"docs-request-params"},a.a.createElement("h4",{className:"pm-h4"},"Params"),a.a.createElement(KeyValueTable,DescriptionBody_extends({rows:t},e))):null}function RequestPathVariables(e){var t=s.a.get(e,"item.request.urlObject.variable");return Array.isArray(t)&&t.length?a.a.createElement("div",{className:"docs-request-params"},a.a.createElement("h4",{className:"pm-h4"},"Path Variables"),a.a.createElement(KeyValueTable,DescriptionBody_extends({rows:t},e))):null}function RequestBodyContent(e){var t=s.a.get(e,"body.mode"),n=s.a.get(e,"body.".concat(t));return"file"===t?null:"raw"===t?a.a.createElement("pre",{className:"docs-request-body__raw"},a.a.createElement("code",null,n)):"graphql"===t?a.a.createElement(GraphqlBody,DescriptionBody_extends({content:n},e)):a.a.createElement(KeyValueTable,DescriptionBody_extends({rows:n},e))}function RequestBody(e){var t=s.a.get(e,"item.request.body");return function isRequestBodyEmpty(e){if("graphql"===s.a.get(e,"mode")){var t=s.a.get(e,"graphql.query"),n=s.a.get(e,"graphql.variables");return Boolean(!t&&!n)}return!s.a.get(e,[s.a.get(e,"mode")])}(t)?null:a.a.createElement("div",{className:"docs-request-body"},a.a.createElement("h4",{className:"pm-h4 docs-request-body__title"},"Body"),a.a.createElement("span",{className:"docs-request-body__mode push-half--left"},"raw"===t.mode?function parseBodyModeFromHeaders(e){var t,n=s.a.get(e,"item.request.header");return Array.isArray(n)&&n.length?(t=s.a.find(n,function(e){return!e.disabled&&"string"==typeof e.key&&"content-type"===e.key.toLowerCase()}),"raw (".concat(t&&t.value||"text",")")):"raw (text)"}(e):t.mode),a.a.createElement(RequestBodyContent,DescriptionBody_extends({body:t},e)))}function DescriptionBody(e){var t=s.a.get(e,"item",{}),n="latest"===s.a.get(e,"version")&&(void 0===e.editable||e.editable);if("request"===t.type){var o=""===s.a.get(t,"request.description","");return a.a.createElement("div",{className:"docs-desc-body"},a.a.createElement(DescriptionEditor,DescriptionBody_extends({},e,{displayLoaderOnSaveButton:!0,callMethod:e.callMethod,description:s.a.get(t,"request.description",""),descriptionInEditMode:e.descriptionInEditMode,displayPlaceHolder:!!n&&o,editable:n,itemId:t._postman_id,path:t.path,onCancel:e.onDescriptionCancel,onEdit:e.onDescriptionEdit,onSave:e.onDescriptionSave})),a.a.createElement(RequestHeaders,e),a.a.createElement(RequestParams,e),a.a.createElement(RequestPathVariables,e),a.a.createElement(RequestBody,e))}var r="head"===s.a.get(t,"type"),i=s.a.get(t,"description",""),l=r?i.match(/<body><\/body>/):!i.length,c=l?"":t.description;return a.a.createElement("div",{className:"docs-desc-body"},a.a.createElement(DescriptionEditor,DescriptionBody_extends({},e,{displayLoaderOnSaveButton:!0,callMethod:e.callMethod,description:c,descriptionInEditMode:e.descriptionInEditMode,displayPlaceHolder:!!n&&l,editable:n,itemId:t._postman_id,path:t.path,onCancel:e.onDescriptionCancel,onEdit:e.onDescriptionEdit,onSave:e.onDescriptionSave})))}function Description(e){return a.a.createElement("div",{className:"docs-desc"},a.a.createElement(DescriptionTitle,e),a.a.createElement(DescriptionBody,e))}function Example_typeof(e){return(Example_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Example_defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Example_possibleConstructorReturn(e,t){return!t||"object"!==Example_typeof(t)&&"function"!=typeof t?function Example_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Example_getPrototypeOf(e){return(Example_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Example_setPrototypeOf(e,t){return(Example_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function Example_extends(){return(Example_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function SnippetHeader(e){var t,n,o=e.title,r=e.selectable,i=e.onChange,l=e.selectedExample,u=e.status,p=s.a.get(e,"example",[]);return p.length&&r?p.length>1?(p.map(function(e,t){e._index=t}),t=a.a.createElement("div",{className:"docs-example__response-title docs-example__response-title--flush"},a.a.createElement(c.TextDropdown,{className:"docs-example__response-dropdown pm-select-text--dark pm-select--align-right",label:s.a.get(p,[l,"name"]),labelKey:"name",options:p,size:"sm",valueKey:"_index",onChange:i}))):t=a.a.createElement("span",{className:"docs-example__response-title",title:s.a.get(p,"[0].name")},s.a.get(p,"[0].name")):t=null,u&&(n=a.a.createElement("span",{className:"docs-example__response-status",title:u},u)),a.a.createElement("div",{className:"docs-example__snippet-header"},a.a.createElement("span",{className:"docs-example__snippet-type"},o),t,n)}function ExampleRequest(e){var t=e.selectedExample,n=e.currentLanguage,o=e.preferences,r=s.a.get(e,"example",""),i=s.a.get(r,[t,"snippet",s.a.get(n,"key","")],"")[s.a.get(n,"variant","")],l=s.a.get(o,"wrap");return a.a.createElement("div",{className:"docs-example__request"},a.a.createElement(SnippetHeader,Example_extends({selectable:!0,title:"Example Request"},e)),a.a.createElement(c.Snippet,{code:i,highlightSnippet:e.highlightSnippet,language:n.name,maxLines:15,toggleWrap:function toggleWrap(){e.onPreferenceChange(l)},wrap:l,onExpandOpen:function onExpandOpen(){e.onSnippetExpand({code:i,language:n.name,title:s.a.get(r,[t,"name"])})}}))}function ExampleResponse(e){var t=e.selectedExample,n=e.preferences,o=s.a.get(e,["example",t],{}),r=s.a.get(n,"wrap"),i=s.a.get(o,"response.body"),l=s.a.get(o,"response._postman_previewlanguage"),u=s.a.get(o,"response.code"),p=s.a.get(o,"response.status"),d=u&&p?"".concat(u," ").concat(p):null;return s.a.get(o,"response.body")?a.a.createElement("div",{className:"docs-example__response"},a.a.createElement(SnippetHeader,Example_extends({status:d,title:"Example Response"},e)),a.a.createElement(c.Snippet,{code:i,highlightSnippet:e.highlightSnippet,language:l,toggleWrap:function toggleWrap(){e.onPreferenceChange(r)},wrap:r,onExpandOpen:function onExpandOpen(){e.onSnippetExpand({code:i,language:l,title:s.a.get(o,"name")})}})):null}var de=function(e){function Example(e){var t;return function Example_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Example),(t=Example_possibleConstructorReturn(this,Example_getPrototypeOf(Example).call(this,e))).state={selectedExample:e.activeResponse||0,highlightSnippet:!0},t}return function Example_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Example_setPrototypeOf(e,t)}(Example,o["Component"]),function Example_createClass(e,t,n){return t&&Example_defineProperties(e.prototype,t),n&&Example_defineProperties(e,n),e}(Example,[{key:"UNSAFE_componentWillReceiveProps",value:function UNSAFE_componentWillReceiveProps(e){this.getHighlightSnippetsSetting(e)}},{key:"getHighlightSnippetsSetting",value:function getHighlightSnippetsSetting(e){var t=e.currentLanguage,n=e.documentationSettings,o=s.a.get(n,"languages",[]).filter(function(e){return e.key===t.key&&e.variant===t.variant})[0],a=!0;o&&o.options&&o.options.forEach(function(e){"prettify"===e.id&&(a=e.value)}),this.state.highlightSnippet!==a&&this.setState({highlightSnippet:a})}},{key:"render",value:function render(){var e=this,t=s.a.get(this.props,["examples","byId",this.props.item._postman_id],[]);return this.props.loadingExamples||this.props.errorLoadingExamples?null:a.a.createElement("div",{className:"docs-example"},a.a.createElement(ExampleRequest,Example_extends({},this.props,{example:t,highlightSnippet:this.state.highlightSnippet,selectedExample:this.state.selectedExample,onChange:function onChange(t){e.setState({selectedExample:t._index})}})),Array.isArray(t)&&t.length&&a.a.createElement(ExampleResponse,Example_extends({},this.props,{example:t,highlightSnippet:this.state.highlightSnippet,selectedExample:this.state.selectedExample})))}}]),Example}();function DocItem(e){var t=e.item,n=t.type,o=t._postman_id;return a.a.createElement("div",{className:"docs-item",id:o},a.a.createElement(Description,e),"request"===n&&a.a.createElement(de,e))}function ConfigBar_typeof(e){return(ConfigBar_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ConfigBar_defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ConfigBar_getPrototypeOf(e){return(ConfigBar_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ConfigBar_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ConfigBar_setPrototypeOf(e,t){return(ConfigBar_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var me=function(e){function EnvironmentSelector(e){var t;return function ConfigBar_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,EnvironmentSelector),(t=function ConfigBar_possibleConstructorReturn(e,t){return!t||"object"!==ConfigBar_typeof(t)&&"function"!=typeof t?ConfigBar_assertThisInitialized(e):t}(this,ConfigBar_getPrototypeOf(EnvironmentSelector).call(this,e))).state={selectedEnvironment:t.props.currentEnvironment.label},t.handleSelectEnvironment=t.handleSelectEnvironment.bind(ConfigBar_assertThisInitialized(t)),t}return function ConfigBar_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ConfigBar_setPrototypeOf(e,t)}(EnvironmentSelector,o["Component"]),function ConfigBar_createClass(e,t,n){return t&&ConfigBar_defineProperties(e.prototype,t),n&&ConfigBar_defineProperties(e,n),e}(EnvironmentSelector,[{key:"handleSelectEnvironment",value:function handleSelectEnvironment(e){var t=this;this.setState({selectedEnvironment:e.label},function(){t.props.onEnvironmentChange(e)})}},{key:"render",value:function render(){var e=this;return a.a.createElement("div",{className:"docs-config__selector environment-selector"},a.a.createElement("label",null,"Environment"),a.a.createElement(c.SelectDropdown,{searchable:!0,className:"environment-selector",label:"Search Environment",labelKey:"label",options:this.props.environments,size:"md",value:this.state.selectedEnvironment,valueKey:"label",onBlur:function onBlur(){e.setState({selectedEnvironment:e.props.currentEnvironment.label})},onChange:this.handleSelectEnvironment,onFocus:function onFocus(){e.setState({selectedEnvironment:""})}}))}}]),EnvironmentSelector}();function LayoutSelector(e){var t=[{label:"Single Column",value:"single"},{label:"Double Column",value:"double"}];return a.a.createElement("div",{className:"docs-config__selector docs-config__selector--layout"},a.a.createElement("label",null,"Layout"),a.a.createElement(c.TextDropdown,{label:"single"===e.layout?t[0].label:t[1].label,options:t,size:"md",value:e.layout,onChange:function onChange(t){e.onLayoutChange(t.value)}}))}function ConfigBar(e){return a.a.createElement("div",{className:"docs-config"},a.a.createElement(me,{currentEnvironment:e.currentEnvironment,environments:e.environments,onEnvironmentChange:e.onEnvironmentChange}),a.a.createElement(LayoutSelector,{collectionId:e.collectionId,layout:e.layout,onLayoutChange:e.onLayoutChange}))}function LanguageConfigBar_typeof(e){return(LanguageConfigBar_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function LanguageConfigBar_defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function LanguageConfigBar_getPrototypeOf(e){return(LanguageConfigBar_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function LanguageConfigBar_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function LanguageConfigBar_setPrototypeOf(e,t){return(LanguageConfigBar_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var fe=function(e){function LanguageConfigBar(e){var t;return function LanguageConfigBar_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,LanguageConfigBar),(t=function LanguageConfigBar_possibleConstructorReturn(e,t){return!t||"object"!==LanguageConfigBar_typeof(t)&&"function"!=typeof t?LanguageConfigBar_assertThisInitialized(e):t}(this,LanguageConfigBar_getPrototypeOf(LanguageConfigBar).call(this,e))).state={selectedLanguage:t.props.selectedLanguage,languageSelectorPlaceHolder:t.props.currentLanguage.name},t.handleSelectLanguage=t.handleSelectLanguage.bind(LanguageConfigBar_assertThisInitialized(t)),t}return function LanguageConfigBar_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&LanguageConfigBar_setPrototypeOf(e,t)}(LanguageConfigBar,o["Component"]),function LanguageConfigBar_createClass(e,t,n){return t&&LanguageConfigBar_defineProperties(e.prototype,t),n&&LanguageConfigBar_defineProperties(e,n),e}(LanguageConfigBar,[{key:"handleSelectLanguage",value:function handleSelectLanguage(e){var t=this;this.setState({selectedLanguage:e,languageSelectorPlaceHolder:e.name},function(){t.props.onLanguageChange(e)})}},{key:"render",value:function render(){var e=this,t=this.props,n=t.documentationSettings,o=t.loadingExamples,r=n.languages;return a.a.createElement("div",{className:"docs-config"},a.a.createElement("div",{className:p()("docs-config__selector",{"loading-examples":this.props.loadingExamples})},a.a.createElement("label",null," Language "),a.a.createElement(c.SelectDropdown,{searchable:!0,className:"language-selector",disabled:o,label:"Search Language",labelKey:"name",options:r,placeholder:"Search Language",size:"md",value:this.state.languageSelectorPlaceHolder,valueKey:"name",onBlur:function onBlur(){e.setState({languageSelectorPlaceHolder:e.props.currentLanguage.name})},onChange:function onChange(t){e.handleSelectLanguage(t)},onFocus:function onFocus(){e.setState({languageSelectorPlaceHolder:""})}})),a.a.createElement(c.Icon,{className:"language-settings",languages:this.props.languages,name:"settings",size:"sm",onClick:this.props.onShowLanguageSettingsModal}))}}]),LanguageConfigBar}();var he=Object(i.b)(function LanguageConfigBar_mapStateToProps(e){return{loadingExamples:(s.a.get(e,"collection.documenter")||{}).loadingExamples,userData:s.a.get(e,"shared.userData.user")||{}}})(fe);function DocBody_extends(){return(DocBody_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function DocBody_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function DocBody_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?DocBody_ownKeys(Object(n),!0).forEach(function(t){DocBody_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DocBody_ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function DocBody_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function DocBody_typeof(e){return(DocBody_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function DocBody(e){var t=e.collectionInfo,n=e.items,o=e.collectionResponses,r=e.location,i=e.flattenedCollection,l=e.params&&e.params.id,u=e.currentEnvironment&&e.currentEnvironment.id,p=Array.isArray(n)&&!n.length,m=function findResponseIndex(e,t){var n={};return"object"===DocBody_typeof(e)&&Object.keys(e).every(function(o){var a=e[o].indexOf(t);return!(a>-1&&(n.index=a,n.request=o,1))}),n}(o,r.hash.replace("#",""));return e.changingEnvironment?a.a.createElement("div",{className:"docs-body"},a.a.createElement(d.M,null)):a.a.createElement("div",{className:"docs-body docs-body--".concat(e.layout,"-col")},a.a.createElement("div",{className:"docs-configs"},a.a.createElement(ConfigBar,{collectionId:l,currentEnvironment:e.currentEnvironment,currentLanguage:e.currentLanguage,environments:e.environments,languages:e.languages,layout:e.layout,onEnvironmentChange:e.onEnvironmentChange,onLanguageChange:e.onLanguageChange,onLayoutChange:e.onLayoutChange}),a.a.createElement("div",{className:"language-config-settings"},a.a.createElement(he,{currentLanguage:e.currentLanguage,documentationSettings:e.documentationSettings,languages:e.languages,onLanguageChange:e.onLanguageChange,onShowLanguageSettingsModal:e.onShowLanguageSettingsModal}))),a.a.createElement(DocItem,{collectionId:l,comments:DocBody_objectSpread({},e.comments,{data:e.comments.data.filter(function(e){return!e.anchor})}),currentEnvironmentId:u,documentationSettings:e.documentationSettings,editable:e.editable,editableDocumentation:e.editableDocumentation,item:DocBody_objectSpread({type:"head"},t),teamUsers:e.teamUsers,user:e.user,version:s.a.get(e,"location.query.version"),onCommentCreate:e.onCommentCreate,onCommentDelete:e.onCommentDelete,onCommentUpdate:e.onCommentUpdate}),e.loadingExamples&&a.a.createElement("div",{className:"docs-body__example-loader"},a.a.createElement(c.Loader,{pmStyle:"secondary",size:"md"})),p?a.a.createElement(NoRequestsBody,null):i.map(function(t){var n="request"===t.type?{user:e.user,comments:DocBody_objectSpread({},e.comments,{data:e.comments.data.filter(function(e){return e.anchor==="request/".concat(t._postman_id)})}),onCommentCreate:e.onCommentCreate,onCommentDelete:e.onCommentDelete,onCommentUpdate:e.onCommentUpdate}:{};return a.a.createElement(DocItem,DocBody_extends({activeResponse:m.request===t._postman_id?m.index:0,collectionId:e.params.id,currentEnvironmentId:e.currentEnvironment.id,item:t,key:"".concat(t._postman_id,"-").concat(t.name),path:t.path,version:s.a.get(e,"location.query.version")},e,n))}))}function OverlaySidenav_typeof(e){return(OverlaySidenav_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function OverlaySidenav_extends(){return(OverlaySidenav_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function OverlaySidenav_defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function OverlaySidenav_possibleConstructorReturn(e,t){return!t||"object"!==OverlaySidenav_typeof(t)&&"function"!=typeof t?function OverlaySidenav_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function OverlaySidenav_getPrototypeOf(e){return(OverlaySidenav_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function OverlaySidenav_setPrototypeOf(e,t){return(OverlaySidenav_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var ge=function(e){function OverlaySidenav(e){var t;return function OverlaySidenav_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,OverlaySidenav),(t=OverlaySidenav_possibleConstructorReturn(this,OverlaySidenav_getPrototypeOf(OverlaySidenav).call(this,e))).state={overlayOpen:!1},t}return function OverlaySidenav_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&OverlaySidenav_setPrototypeOf(e,t)}(OverlaySidenav,o["Component"]),function OverlaySidenav_createClass(e,t,n){return t&&OverlaySidenav_defineProperties(e.prototype,t),n&&OverlaySidenav_defineProperties(e,n),e}(OverlaySidenav,[{key:"render",value:function render(){var e=this;return a.a.createElement("div",{className:"overlay-sidenav"},a.a.createElement(OverlayButton,OverlaySidenav_extends({isOverlayOpen:this.state.overlayOpen},this.props,{onClick:function onClick(){e.setState({overlayOpen:!0})}})),a.a.createElement(OverlayContent,OverlaySidenav_extends({isOpen:this.state.overlayOpen,onOverlayItemClick:function onOverlayItemClick(){e.setState({overlayOpen:!1})},onSidebarClose:function onSidebarClose(){e.setState({overlayOpen:!1})}},this.props)))}}]),OverlaySidenav}();function OverlayButton(e){var t=e.onClick,n=e.isOverlayOpen;return a.a.createElement(c.Button,{className:n?"overlay-sidenav__invoke-btn--clicked":"overlay-sidenav__invoke-btn",icon:"sort",iconSize:"sm",size:"lg",onClick:t})}function OverlayContent(e){var t=e.isOpen,n=e.emptyMessage,r=e.noItem,i=e.children,l=e.onOverlayItemClick,s=e.heading,u=e.onSidebarClose,p=e.noTitle;return a.a.createElement("div",{className:t?"overlay-sidenav__content--open":"overlay-sidenav__content"},a.a.createElement("div",{className:"overlay-sidenav__header"},a.a.createElement("h2",{className:p?"overlay-sidenav__no-title":"overlay-sidenav__title"},s),a.a.createElement(c.Button,{className:"overlay-sidenav__close-btn",icon:"close-big",iconSize:"sm",pmStyle:"secondary",size:"md",onClick:u})),a.a.createElement("div",{className:"overlay-sidenav__navigator"},r?a.a.createElement("div",{className:"overlay-sidenav__empty"},n):a.a.createElement("div",null,Object(o.cloneElement)(i,{onOverlayItemClick:l}))))}function documenter_typeof(e){return(documenter_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function documenter_extends(){return(documenter_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function documenter_defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function documenter_possibleConstructorReturn(e,t){return!t||"object"!==documenter_typeof(t)&&"function"!=typeof t?function documenter_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function documenter_getPrototypeOf(e){return(documenter_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function documenter_setPrototypeOf(e,t){return(documenter_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var ye=function(e){function Documentation(){return function documenter_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Documentation),documenter_possibleConstructorReturn(this,documenter_getPrototypeOf(Documentation).apply(this,arguments))}return function documenter_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&documenter_setPrototypeOf(e,t)}(Documentation,o["Component"]),function documenter_createClass(e,t,n){return t&&documenter_defineProperties(e.prototype,t),n&&documenter_defineProperties(e,n),e}(Documentation,[{key:"render",value:function render(){var e=this.props.items,t=void 0===e?[]:e,n=!t||0===t.length,r=this.props.flattenedCollection;return a.a.createElement(o.Fragment,null,a.a.createElement(ge,{emptyMessage:"This is where requests saved in your collections would appear.",heading:this.props.collectionName,noItem:n},a.a.createElement(z,{inOverlay:!0,collectionInfo:this.props.collectionInfo,editableDocumentation:this.props.editable,expandedCollectionFolders:this.props.expandedCollectionFolders,items:t})),a.a.createElement(z,documenter_extends({},this.props,{collectionInfo:this.props.collectionInfo,editableDocumentation:this.props.editable,expandedCollectionFolders:this.props.expandedCollectionFolders,items:t})),a.a.createElement(DocBody,documenter_extends({},this.props,{flattenedCollection:r,onEnvironmentChange:this.props.onEnvironmentChange,onLanguageChange:this.props.onLanguageChange,onLayoutChange:this.props.onLayoutChange,onShowLanguageSettingsModal:this.props.onShowLanguageSettingsModal})))}}]),Documentation}();function LanguageSettingsModal_typeof(e){return(LanguageSettingsModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function LanguageSettingsModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function LanguageSettingsModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?LanguageSettingsModal_ownKeys(Object(n),!0).forEach(function(t){LanguageSettingsModal_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LanguageSettingsModal_ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function LanguageSettingsModal_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LanguageSettingsModal_defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function LanguageSettingsModal_getPrototypeOf(e){return(LanguageSettingsModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function LanguageSettingsModal_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function LanguageSettingsModal_setPrototypeOf(e,t){return(LanguageSettingsModal_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var be=function(e){function LanguageSettingsModal(e){var t;return function LanguageSettingsModal_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,LanguageSettingsModal),(t=function LanguageSettingsModal_possibleConstructorReturn(e,t){return!t||"object"!==LanguageSettingsModal_typeof(t)&&"function"!=typeof t?LanguageSettingsModal_assertThisInitialized(e):t}(this,LanguageSettingsModal_getPrototypeOf(LanguageSettingsModal).call(this,e))).languagesListRef=a.a.createRef(),t.state={filterText:null,documentationSettings:t.props.documentationSettings,languagesList:t.props.documentationSettings.languages,selectedLanguage:t.fetchSettings(),updatedLanguages:[]},t.handleSaveSettings=t.handleSaveSettings.bind(LanguageSettingsModal_assertThisInitialized(t)),t.handleSettingsChange=t.handleSettingsChange.bind(LanguageSettingsModal_assertThisInitialized(t)),t.handleLanguageSelect=t.handleLanguageSelect.bind(LanguageSettingsModal_assertThisInitialized(t)),t}return function LanguageSettingsModal_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&LanguageSettingsModal_setPrototypeOf(e,t)}(LanguageSettingsModal,o["Component"]),function LanguageSettingsModal_createClass(e,t,n){return t&&LanguageSettingsModal_defineProperties(e.prototype,t),n&&LanguageSettingsModal_defineProperties(e,n),e}(LanguageSettingsModal,[{key:"componentDidMount",value:function componentDidMount(){this.scrollSelectedLanguageIntoView()}},{key:"scrollSelectedLanguageIntoView",value:function scrollSelectedLanguageIntoView(){var e=this.languagesListRef&&this.languagesListRef.current.getElementsByClassName("selected");e&&e[0]&&e[0].scrollIntoView()}},{key:"handleLanguageSelect",value:function handleLanguageSelect(e){if(!this.props.updatingDocumentationSettings){var t=this.processLanguageSettings(e);this.setState({selectedLanguage:t})}}},{key:"fetchSettings",value:function fetchSettings(){var e=this,t=this.props&&this.props.documentationSettings.languages.filter(function(t){return t.key===e.props.currentLanguage.key&&t.variant===e.props.currentLanguage.variant});return this.processLanguageSettings(t[0])}},{key:"handleSettingsChange",value:function handleSettingsChange(e,t){var n=LanguageSettingsModal_objectSpread({},e);if("boolean"===n.type.toLowerCase())n.value=!n.value;else if("positiveInteger"===n.type){var o=parseInt(t);s.a.isFinite(o)?n.value=o:n.value=0}else"enum"===n.type&&(n.value=t.value);var a=this.state.selectedLanguage.options.map(function(e){return e.id===n.id?n:e}),r=LanguageSettingsModal_objectSpread({},this.state.selectedLanguage);r.options=a,this.setState({selectedLanguage:r})}},{key:"processLanguageSettings",value:function processLanguageSettings(e){var t=e.options.map(function(e){if("enum"===e.type){var t=e.availableOptions.map(function(e){return{label:e,value:e}});return e.options=t,e}return e});return e.options=t,e}},{key:"handleFilterLanguages",value:function handleFilterLanguages(e){e&&""!==e?this.setState({filterText:e,languagesList:s.a.filter(this.props.documentationSettings.languages,function(t){return t.name.toLowerCase().includes(e.toLowerCase())})}):this.setState({filterText:e,languagesList:this.props.documentationSettings.languages})}},{key:"handleSaveSettings",value:function handleSaveSettings(){for(var e=this,t=LanguageSettingsModal_objectSpread({},this.state.documentationSettings),n=this.state.updatedLanguages,o=0;o<t.languages.length;o++)if(t.languages[o].name===this.state.selectedLanguage.name){t.languages[o]=this.state.selectedLanguage;break}n.push(this.state.selectedLanguage.name),this.setState({documentationSettings:t,updatedLanguages:n},function(){window.pm.actions.updateDocumentationSettings({collectionId:e.props.entity.collectionId,userId:e.props.entity.userId,documentationSettings:t,updatedLanguages:e.state.updatedLanguages,updatedLanguage:e.state.selectedLanguage.name})})}},{key:"render",value:function render(){var e=this;return a.a.createElement(c.Card,{className:"language-settings-container"},a.a.createElement("div",{className:"language-settings-header"},a.a.createElement("h2",{className:"title"}," Language Settings "),a.a.createElement("div",{className:"language-settings-actions"},a.a.createElement("div",{className:"actions"},a.a.createElement("h3",{className:"contribute-github"},a.a.createElement("a",{className:"contribute-github pm-link",href:"https://github.com/postmanlabs/postman-code-generators",rel:"noopener noreferrer",target:"_blank"},"Contribute on Github")),a.a.createElement(c.Button,{className:"language-settings-close-btn",disabled:this.props.updatingDocumentationSettings,icon:"close-big",iconSize:"sm",pmStyle:"alternate",size:"sm",onClick:this.props.onCancel})))),a.a.createElement("div",{className:"language-list-settings"},a.a.createElement("div",{className:"language-list-container"},a.a.createElement(c.Field,{icon:"search",placeholder:"Filter languages",size:"sm",value:this.state.filterText||"",onChange:function onChange(t){e.handleFilterLanguages(t.target.value)}}),a.a.createElement("div",{className:p()("languages-list",{updating:this.props.updatingDocumentationSettings}),ref:this.languagesListRef},this.state.languagesList.map(function(t){return a.a.createElement("div",{className:p()("languages-list-item",{selected:e.state.selectedLanguage&&e.state.selectedLanguage.name===t.name}),key:t.name,onClick:function onClick(){e.handleLanguageSelect(t)}},t.name)}))),a.a.createElement("div",{className:"language-settings"},a.a.createElement("h2",{className:"language-settings-heading"},"Settings for ",a.a.createElement("span",{className:"language-title"},this.state.selectedLanguage.name)),a.a.createElement("div",{className:"language-settings-content"},this.state.selectedLanguage&&this.state.selectedLanguage.options.map(function(t){var n=t.type,o=t.value;if("positiveInteger"===n){var r=parseInt(o);o=s.a.isFinite(r)?r:0}return a.a.createElement("div",{className:"setting",key:t.id},a.a.createElement("div",{className:"question"},a.a.createElement("h3",null," ",t.name," "),a.a.createElement("p",null," ",t.description," ")),a.a.createElement("div",{className:"setting-values"},t&&"positiveInteger"===n&&a.a.createElement(c.Field,{min:0,placeholder:o,size:"sm",type:"number",value:o,onChange:function onChange(n){e.handleSettingsChange(t,n.target.value)}}),t&&("boolean"===n||"Boolean"===n)&&a.a.createElement("div",{className:"setting-".concat(t.value?"on":"off")},a.a.createElement(c.Switch,{inline:!0,checked:t.value,label:"".concat(t.value?"ON":"OFF"),size:"sm",onChange:function onChange(n){e.handleSettingsChange(t,n.target.value)}})),t&&"enum"===n&&a.a.createElement(c.SelectDropdown,{block:!0,className:"setting-enum",options:t.options,searchable:!1,value:t.value,onChange:function onChange(n){e.handleSettingsChange(t,n)}})))})),a.a.createElement("div",{className:"language-settings-footer"},a.a.createElement(c.Button,{disabled:this.props.updatingDocumentationSettings,pmStyle:"primary",size:"sm",onClick:this.handleSaveSettings},this.props.updatingDocumentationSettings&&a.a.createElement(c.Loader,null)," Save Settings")))))}}]),LanguageSettingsModal}();be.defaultProps={inputProps:{}};var ve=Object(i.b)(function LanguageSettingsModal_mapStateToProps(e){return{updatingDocumentationSettings:(s.a.get(e,"collection.documenter")||{}).updatingDocumentationSettings,userData:s.a.get(e,"shared.userData.user")||{}}},s.a.pick(ae.b,["hideModal"]))(be),_e=n("9JAY");function getInlineEditStatus_templateObject(){var e=function getInlineEditStatus_taggedTemplateLiteral(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["query(\n          $collectionId: String!,\n          $path: String,\n          $environment: String,\n          $versionTag: String,\n          $markdown: Boolean\n          ) {\n            documentation(\n              collectionId: $collectionId\n              path: $path\n              environment: $environment\n              versionTag: $versionTag\n              markdown: $markdown\n              ) {\n                description\n              }\n          }"]);return getInlineEditStatus_templateObject=function _templateObject(){return e},e}function getInlineEditStatus(e){var t=e.params&&e.params.id,n=t&&t.substring(t.indexOf("-")+1),o=encodeURIComponent("1.0"),r=encodeURIComponent("collection"),i=encodeURIComponent("info.description"),l="v=".concat(o,":objectPath=").concat(i,"&type=").concat(r,"&uuid=").concat(n),c=Object(D.b)(getInlineEditStatus_templateObject()),u=s.a.get(e,"getInlineEditStatusCallback");return Object(N.c)(c,{variables:{collectionId:t,path:l,markdown:!0},onCompleted:function onCompleted(e){var t=s.a.has(e,"documentation","description");u&&u(t)},onError:function onError(){u&&u(!1)},fetchPolicy:"network-only"}),a.a.createElement("div",null)}function Documenter_extends(){return(Documenter_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function Documenter_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function Documenter_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Documenter_ownKeys(Object(n),!0).forEach(function(t){Documenter_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Documenter_ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Documenter_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Documenter_defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Documenter_getPrototypeOf(e){return(Documenter_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Documenter_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Documenter_setPrototypeOf(e,t){return(Documenter_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function Documenter_typeof(e){return(Documenter_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function scrollToHash(e,t){var n,o=e.hash,a=s.a.get(e,"query.anchor");o&&"string"==typeof o?(n=o.replace("#",""),"object"===Documenter_typeof(t)&&Object.keys(t).forEach(function(e){t[e].indexOf(n)>-1&&(n=e)})):a&&"string"==typeof a&&(n=a.split("/")[1]),n&&setTimeout(function(){var e=document.getElementById(n);e&&e.scrollIntoView()},0)}var Ce=function(e){function Documenter(e){var t;return function Documenter_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Documenter),(t=function Documenter_possibleConstructorReturn(e,t){return!t||"object"!==Documenter_typeof(t)&&"function"!=typeof t?Documenter_assertThisInitialized(e):t}(this,Documenter_getPrototypeOf(Documenter).call(this,e))).state={loadingInlineEditStatus:!0,inlineEditOnline:!1},t.handleEnvironmentChange=t.handleEnvironmentChange.bind(Documenter_assertThisInitialized(t)),t.handleLanguageChange=t.handleLanguageChange.bind(Documenter_assertThisInitialized(t)),t.handleLayoutChange=t.handleLayoutChange.bind(Documenter_assertThisInitialized(t)),t.handleCommentCreate=t.handleCommentCreate.bind(Documenter_assertThisInitialized(t)),t.handleCommentDelete=t.handleCommentDelete.bind(Documenter_assertThisInitialized(t)),t.handleCommentUpdate=t.handleCommentUpdate.bind(Documenter_assertThisInitialized(t)),t.handleShowLanguageSettingModal=t.handleShowLanguageSettingModal.bind(Documenter_assertThisInitialized(t)),t.handleCloseLanguageSettingsModal=t.handleCloseLanguageSettingsModal.bind(Documenter_assertThisInitialized(t)),t.updateInlineEditStatus=t.updateInlineEditStatus.bind(Documenter_assertThisInitialized(t)),t.showErrorToasts=t.showErrorToasts.bind(Documenter_assertThisInitialized(t)),t}return function Documenter_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Documenter_setPrototypeOf(e,t)}(Documenter,o["Component"]),function Documenter_createClass(e,t,n){return t&&Documenter_defineProperties(e.prototype,t),n&&Documenter_defineProperties(e,n),e}(Documenter,[{key:"componentDidMount",value:function componentDidMount(){m.a.recordEvent("documentationView",{meta:{url:window.location.href}}),m.a.recordEvent("documentationPrivateView",{meta:{url:window.location.href},entityId:this.props.params.id}),window.pm.actions.getWorkspaceEnvironments({workspaceId:this.props.activeWorkspace}),window.pm.actions.getDocumentation({collectionId:this.props.params.id,environmentId:this.props.currentEnvironment.id,versionId:this.props.location.query.version}),window.pm.actions.getExamples({collectionId:this.props.params.id,language:this.props.currentLanguage,environmentId:this.props.currentEnvironment.id,versionId:this.props.location.query.version}),window.pm.actions.getComments({modelId:this.props.params.id,model:"collection"}),window.pm.actions.getDocumentationSettings({collectionId:this.props.params.id,userId:this.props.user.id})}},{key:"componentDidUpdate",value:function componentDidUpdate(e){var t=this.props,n=t.location,o=t.loading,a=t.collectionResponses,r=t.collectionName;n.query.anchor&&n.hash&&window.pm.actions.replace(Documenter_objectSpread({},n,{query:s.a.omit(n.query,["comment","anchor"])})),this.props.location.query.version!==e.location.query.version&&(window.pm.actions.getDocumentation({collectionId:this.props.params.id,environmentId:this.props.currentEnvironment.id,versionId:this.props.location.query.version}),window.pm.actions.getExamples({collectionId:this.props.params.id,language:this.props.currentLanguage,environmentId:this.props.currentEnvironment.id,versionId:this.props.location.query.version}),window.pm.actions.getDocumentationSettings({collectionId:this.props.params.id,userId:this.props.user.id})),e.loading&&!o&&scrollToHash(n,a),e.collectionName!==this.props.collectionName&&(document.title=r?r+" - Documentation":"Collection - Documentation"),this.props.errorLoadingDocumentation||this.props.loading||!e.loading||this.showErrorToasts(),this.props.errorLoadingDocumentation||this.props.errorUpdatingDocumentationSettings===e.errorUpdatingDocumentationSettings||this.showErrorToasts()}},{key:"handleCommentCreate",value:function handleCommentCreate(e,t,n){window.pm.actions.createComment({body:e,anchor:n,tags:t,model:"collection",modelId:this.props.params.id,creator:this.props.user})}},{key:"handleCommentUpdate",value:function handleCommentUpdate(e){window.pm.actions.updateComment(e)}},{key:"handleCommentDelete",value:function handleCommentDelete(e){window.pm.actions.showModal({actionType:"error",type:"confirm",title:"Delete comment",body:"Are you sure you want to delete this comment? This cannot be undone.",confirmLabel:"Delete",onCancel:function onCancel(e){e&&e.preventDefault(),e&&e.stopPropagation(),e&&e.nativeEvent&&e.nativeEvent.stopImmediatePropagation(),window.pm.actions.hideModal()},onConfirm:function onConfirm(t){t&&t.preventDefault(),t&&t.stopPropagation(),t&&t.nativeEvent&&t.nativeEvent.stopImmediatePropagation(),window.pm.actions.hideModal(),window.pm.actions.deleteComment({commentId:e})}})}},{key:"handleEnvironmentChange",value:function handleEnvironmentChange(e){e.id!==this.props.currentEnvironment.id&&(window.pm.actions.changeEnvironment({collectionId:this.props.params.id,environment:e,versionId:this.props.location.query.version}),window.pm.actions.getExamples({collectionId:this.props.params.id,language:this.props.currentLanguage,environmentId:e.id,versionId:this.props.location.query.version}))}},{key:"handleLayoutChange",value:function handleLayoutChange(e){if(e!==this.props.layout){var t={layout:e};window.pm.actions.setDocumentationLayout({collectionId:this.props.params.id,userId:this.props.user.id,documentationSettings:t})}}},{key:"handleLanguageChange",value:function handleLanguageChange(e){e.key===this.props.currentLanguage.key&&e.variant===this.props.currentLanguage.variant||(m.a.recordEvent("documentationSelectLanguage"),m.a.recordEvent("documentationChangeLanguage",{entityId:this.props.params.id}),window.pm.actions.getExamples({language:e,collectionId:this.props.params.id,environmentId:this.props.currentEnvironment.id,versionId:this.props.location.query.version}),window.pm.actions.changeLanguage(e))}},{key:"handleShowLanguageSettingModal",value:function handleShowLanguageSettingModal(){var e={type:"language",name:this.props.params.name,id:this.props.params.id,collectionId:this.props.params.id,userId:this.props.user.id};window.pm.actions.showModal({children:a.a.createElement(ve,{currentLanguage:this.props.currentLanguage,documentationSettings:this.props.documentationSettings,entity:e,onCancel:this.handleCloseLanguageSettingsModal})})}},{key:"handleCloseLanguageSettingsModal",value:function handleCloseLanguageSettingsModal(){window.pm.actions.hideModal();var e=this.props.currentLanguage.label+" - "+this.props.currentLanguage.variant;this.props.updatedDocumentationSettings&&this.props.updatedLanguages.includes(e)&&window.pm.actions.getExamples({collectionId:this.props.params.id,language:this.props.currentLanguage,environmentId:this.props.currentEnvironment.id,versionId:this.props.location.query.version})}},{key:"updateInlineEditStatus",value:function updateInlineEditStatus(e){this.setState({loadingInlineEditStatus:!1,inlineEditOnline:e})}},{key:"showErrorToasts",value:function showErrorToasts(){this.props.errorLoadingExamples&&window.pm.actions.showToast({type:"error",title:"Something went wrong",body:"We couldnâ€™t find the documentation examples. Try refreshing the page."}),this.props.errorLoadingDocumentationSettings&&window.pm.actions.showToast({type:"error",title:"Something went wrong",body:"Unable to load document settings and languages. Try refreshing the page."}),this.props.errorUpdatingDocumentationSettings&&window.pm.actions.showToast({type:"error",title:"Unable to save",body:"We hit a snag while saving your settings. Try that again."}),this.props.errorLoadingPublicInfo&&window.pm.actions.showToast({type:"error",title:"Something went wrong",body:"We couldnâ€™t load the publication status for this documentation. Try refreshing the page."})}},{key:"render",value:function render(){var e="latest"===s.a.get(this.props,"location.query.version");return this.props.loading||this.state.loadingInlineEditStatus?a.a.createElement(a.a.Fragment,null,a.a.createElement(getInlineEditStatus,Documenter_extends({getInlineEditStatusCallback:this.updateInlineEditStatus},this.props)),a.a.createElement(c.Loader,{className:"pm-page-center",pmStyle:"secondary",size:"xl"})):this.props.errorLoadingDocumentation?403===this.props.errorLoadingDocumentation.statusCode?a.a.createElement(_e.a,{accessMode:this.props.collectionAccessMode,entityType:"collection",location:this.props.location}):a.a.createElement(d.C,{description:this.props.errorLoadingDocumentation.message||"We were unable to load documentation. Please try again.",statusCode:this.props.errorLoadingDocumentation.statusCode}):a.a.createElement(ye,Documenter_extends({},this.props,{documentationSettings:this.props.documentationSettings,editable:this.props.hasEditorRole&&e&&this.state.inlineEditOnline,editableDocumentation:this.props.hasEditorRole&&e&&this.state.inlineEditOnline,environmentId:this.props.currentEnvironment.id,expandedCollectionFolders:this.props.expandedCollectionFolders,focusedAnchor:this.props.location.query.anchor,onCommentCreate:this.handleCommentCreate,onCommentDelete:this.handleCommentDelete,onCommentUpdate:this.handleCommentUpdate,onEnvironmentChange:this.handleEnvironmentChange,onLanguageChange:this.handleLanguageChange,onLayoutChange:this.handleLayoutChange,onPreferenceChange:function onPreferenceChange(e){window.pm.actions.toggleWrapPreference(e)},onShowLanguageSettingsModal:this.handleShowLanguageSettingModal,onSnippetExpand:function onSnippetExpand(e){window.pm.actions.showModal(Documenter_objectSpread({},e,{type:"code"}))}}))}}]),Documenter}();var Ee=Object(i.b)(function Documenter_mapStateToProps(e,t){var n=e.shared.workspaces||{},o=n.active,a=s.a.get(n,["byId",o]),r=s.a.get(a,"dependencies.environments")||[],i=s.a.get(e,"collection.documenter")||{},l=i.documentationSettings,c=i.data,u=s.a.get(i,"expandedCollectionFolders",[]),p=i.updatingDocumentationSettings,d=i.updatedDocumentationSettings,f=i.updatedLanguages,h=e.workspace.environments||{},g=s.a.get(i,"languages"),y=r.reduce(function(e,t){return h.byId[t]&&e.push(h.byId[t]),e},[]),b=s.a.get(e,"shared.userData.user")||{},v={id:s.a.get(e,"shared.userData.identity.user"),friendly:b.name||b.username||b.email,profilePicUrl:b.profile_pic_url},_=s.a.get(e,"collection.comments"),C=(y||[]).find(function(e){return e.id===s.a.get(i,"currentEnvironment.id")}),E=s.a.get(e,"collection.permissions.UPDATE_COLLECTION.allowed",!1);return g&&g.map(function(e){e.key="".concat(e.target,"-").concat(e.client)}),y.sort(function(e){return s.a.includes(e.name,".template")?-1:1}),y.forEach(function(e){e.label=s.a.get(e,"name")}),y.unshift({data:{values:[]},id:null,label:"No Environment"}),{activeWorkspace:o,items:s.a.get(c.collection,"item"),collectionInfo:s.a.get(c.collection,"info"),environments:y,expandedCollectionFolders:u,languages:s.a.get(c,"languages"),currentLanguage:e.collection.documenter.currentLanguage,layout:s.a.get(e,"collection.documenter.layout")||"double",currentEnvironment:C||y[0],errorLoadingDocumentation:i.error,errorLoadingExamples:i.errorExample,errorLoadingPublicInfo:s.a.get(e,"collection.meta.errorLoadingPublicInfo"),errorLoadingDocumentationSettings:i.errorLoadingDocumentationSettings,errorUpdatingDocumentationSettings:i.errorUpdatingDocumentationSettings,loading:i.loadingPreferences||i.loadingDocumentation||s.a.get(e,"collection.meta.loading"),changingEnvironment:i.changingEnvironment,loadingExamples:i.loadingExamples,flattenedCollection:i.flattenedCollection,examples:i.examples,preferences:s.a.get(e,"shared.preferences"),collectionName:s.a.get(e,"collection.meta.name"),collectionResponses:i.responses,teamId:s.a.get(e,"shared.userData.identity.team"),user:v,comments:Documenter_objectSpread({},s.a.omit(_,["ids","byId"]),{data:Object.values(_.byId).filter(function(e){return"collection"===e.model&&e.modelId===t.params.id}).sort(function(e,t){return e.id-t.id})}),teamUsers:s.a.get(e,"shared.team.users.byId",{}),collectionAccessMode:m.o.getCollectionAccessControlMode(s.a.get(e,"shared.userData.account.planName")),documentationSettings:l,updatingDocumentationSettings:p,updatedDocumentationSettings:d,updatedLanguages:f,collectionPermissions:s.a.get(e,["shared","permissions","collection",t.params.id]),hasEditorRole:E}})(Ce),we=n("CO7U");function TagCollectionModal_typeof(e){return(TagCollectionModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function TagCollectionModal_defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function TagCollectionModal_getPrototypeOf(e){return(TagCollectionModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function TagCollectionModal_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function TagCollectionModal_setPrototypeOf(e,t){return(TagCollectionModal_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var Oe=function(e){function TagCollectionModal(e){var t;return function TagCollectionModal_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,TagCollectionModal),(t=function TagCollectionModal_possibleConstructorReturn(e,t){return!t||"object"!==TagCollectionModal_typeof(t)&&"function"!=typeof t?TagCollectionModal_assertThisInitialized(e):t}(this,TagCollectionModal_getPrototypeOf(TagCollectionModal).call(this,e))).state={selectedApiId:null,selectedVersionId:null,selectedElementName:null},t.handleApiSelect=t.handleApiSelect.bind(TagCollectionModal_assertThisInitialized(t)),t.handleVersionSelect=t.handleVersionSelect.bind(TagCollectionModal_assertThisInitialized(t)),t.handleTagCollection=t.handleTagCollection.bind(TagCollectionModal_assertThisInitialized(t)),t.handleElementSelect=t.handleElementSelect.bind(TagCollectionModal_assertThisInitialized(t)),t}return function TagCollectionModal_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&TagCollectionModal_setPrototypeOf(e,t)}(TagCollectionModal,o["Component"]),function TagCollectionModal_createClass(e,t,n){return t&&TagCollectionModal_defineProperties(e.prototype,t),n&&TagCollectionModal_defineProperties(e,n),e}(TagCollectionModal,[{key:"componentDidMount",value:function componentDidMount(){window.pm.actions.getTaggableCollectionApis({collectionId:this.props.collectionId,workspaceId:this.props.currentWorksapceId})}},{key:"handleApiSelect",value:function handleApiSelect(e){this.setState({selectedApiId:e&&e.value})}},{key:"handleVersionSelect",value:function handleVersionSelect(e){this.setState({selectedVersionId:e&&e.value})}},{key:"handleElementSelect",value:function handleElementSelect(e){this.setState({selectedElementName:e&&e.value})}},{key:"handleTagCollection",value:function handleTagCollection(){window.pm.actions.createCollectionVersion({revisionId:this.props.revisionId,collectionId:this.props.collectionId,apiId:this.state.selectedApiId,versionId:this.state.selectedVersionId,relationType:this.state.selectedElementName,hideModal:!0})}},{key:"render",value:function render(){var e=this,t=((this.props.taggableApis||[]).find(function(t){return t.id===e.state.selectedApiId})||{}).versions||[],n=!this.state.selectedApiId||!this.state.selectedVersionId||!this.state.selectedElementName,r=null;return r=this.props.loading?a.a.createElement(c.Loader,{className:"pm-absolute-center",pmStyle:"secondary",size:"md"}):this.props.error?a.a.createElement(d.C,{description:s.a.get(this.props,"error.message")||"Something went wrong while fetching entities of API",statusCode:s.a.get(this.props,"error.statusCode")}):a.a.createElement(o.Fragment,null,a.a.createElement("h5",{className:"pm-h5"},"Select API"),a.a.createElement(c.SelectDropdown,{block:!0,className:"push-half--top",label:"Select an API",options:(this.props.taggableApis||[]).map(function(e){return{label:e.name,value:e.id}}),searchable:!1,size:"md",value:this.state.selectedApiId,onChange:this.handleApiSelect,onConfirm:this.handleConfirm}),a.a.createElement("h5",{className:"pm-h5"},"Select version"),a.a.createElement(c.SelectDropdown,{block:!0,className:"push-half--top",disabled:!this.state.selectedApiId,label:"Select an API version",noResultsText:"All versions of selected API are tagged with this collection",options:(t||[]).map(function(e){return{label:e.name,value:e.id}}),searchable:!1,size:"md",value:this.state.selectedVersionId,onChange:this.handleVersionSelect,onConfirm:this.handleConfirm}),a.a.createElement("h5",{className:"pm-h5"},"Add to API as"),a.a.createElement(c.SelectDropdown,{block:!0,searchable:!0,className:"push-half--top",disabled:!this.state.selectedApiId,label:"Add to API as",labelKey:"label",options:we.a,size:"md",value:this.state.selectedElementName,valueKey:"value",onChange:this.handleElementSelect,onConfirm:this.handleConfirm}),a.a.createElement(c.FormActions,{className:"push-triple--top",confirmDisabled:n,confirming:this.props.tagging,confirmText:"Tag Collection",size:"md",onCancel:this.props.hideModal,onConfirm:this.handleTagCollection})),a.a.createElement(c.Card,{className:"collection-tag"},a.a.createElement("h3",{className:"pm-h3"},"Add a version tag"),a.a.createElement(c.Button,{className:"collection-tag__close",icon:"close-big",pmStyle:"alternate",size:"sm",onClick:this.props.hideModal}),a.a.createElement("hr",{className:"push--ends"}),a.a.createElement("p",{className:"collection-tag__description"},"Link this collection revision to a specific API version."),r)}}]),TagCollectionModal}();var Pe=Object(i.b)(function TagCollectionModal_mapStateToProps(e){var t=s.a.get(e,"collection.taggableApis"),n=s.a.get(e,["shared","workspaces","active"]),o=s.a.get(e,"collection.versions")||{};return{taggableApis:t.data||[],loading:t.loading,error:t.error,tagging:o.creating,currentWorksapceId:n}},s.a.pick(ae.b,["hideModal"]))(Oe);function CollectionActivity_typeof(e){return(CollectionActivity_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function CollectionActivity_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function CollectionActivity_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?CollectionActivity_ownKeys(Object(n),!0).forEach(function(t){CollectionActivity_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CollectionActivity_ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function CollectionActivity_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function CollectionActivity_defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function CollectionActivity_getPrototypeOf(e){return(CollectionActivity_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function CollectionActivity_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function CollectionActivity_setPrototypeOf(e,t){return(CollectionActivity_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function LoadMore(e){var t=e.params,n=e.maxId,o=e.loadingMore;return a.a.createElement("div",{className:"text--center"},a.a.createElement("div",{className:"pm-link",onClick:function onClick(){window.pm.actions.getMoreCollectionActivity({collectionId:t.id,maxId:n})}},o?a.a.createElement(c.Loader,{pmStyle:"secondary"}):"Load More"))}var ke=function(e){function CollectionActivity(e){var t;return function CollectionActivity_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,CollectionActivity),(t=function CollectionActivity_possibleConstructorReturn(e,t){return!t||"object"!==CollectionActivity_typeof(t)&&"function"!=typeof t?CollectionActivity_assertThisInitialized(e):t}(this,CollectionActivity_getPrototypeOf(CollectionActivity).call(this,e))).handleTagVersion=t.handleTagVersion.bind(CollectionActivity_assertThisInitialized(t)),t.handleRemoveTag=t.handleRemoveTag.bind(CollectionActivity_assertThisInitialized(t)),t.handleActivityFeedClick=t.handleActivityFeedClick.bind(CollectionActivity_assertThisInitialized(t)),t}return function CollectionActivity_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&CollectionActivity_setPrototypeOf(e,t)}(CollectionActivity,o["Component"]),function CollectionActivity_createClass(e,t,n){return t&&CollectionActivity_defineProperties(e.prototype,t),n&&CollectionActivity_defineProperties(e,n),e}(CollectionActivity,[{key:"componentDidMount",value:function componentDidMount(){window.pm.actions.getCollectionActivity({collectionId:this.props.params.id}),window.pm.actions.getWorkspaceApis({workspaceId:this.props.activeWorkspaceId}),m.a.recordEvent("viewChangeLog",{entityId:this.props.params.id})}},{key:"componentDidUpdate",value:function componentDidUpdate(e){e.collectionName!==this.props.collectionName&&(document.title=this.props.collectionName?this.props.collectionName+" - Changelog":"Collection - Changelog")}},{key:"handleTagVersion",value:function handleTagVersion(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m.a.recordEvent("initiateVersionTagCreate",{entityId:this.props.params.id}),window.pm.actions.showModal({children:a.a.createElement(Pe,{collectionId:this.props.params.id,revisionId:e.revisionId})})}},{key:"handleActivityFeedClick",value:function handleActivityFeedClick(e){var t=e.target;t&&"A"===t.nodeName&&m.a.recordEvent("changelogAction",{entityId:this.props.params.id})}},{key:"handleRemoveTag",value:function handleRemoveTag(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m.a.recordEvent("versionTagDelete",{entityId:this.props.params.id}),window.pm.actions.deleteCollectionVersion({collectionId:this.props.params.id,versionTagId:e.versionTagId})}},{key:"render",value:function render(){var e=this.props,t=e.data,n=e.loading,o=e.userData,r=e.params,i=e.maxId,l=e.loadingMoreActivity,s=e.moreActivity,u=e.teamUsers,p=e.error;return n?a.a.createElement(c.Loader,{className:"pm-page-center",pmStyle:"secondary",size:"xl"}):p?a.a.createElement(d.C,{description:p.message||"We were unable to fetch activity. Please try again.",statusCode:p.statusCode}):a.a.createElement(d.t,{className:"docs__activity"},a.a.createElement("div",{onClickCapture:this.handleActivityFeedClick},a.a.createElement(d.e,{isHoverable:!0,activityFeed:t,filter:{query:""},teamUsers:u,userData:o,onRemoveTag:this.handleRemoveTag,onTagVersion:this.handleTagVersion})),a.a.createElement("div",{className:"docs-activity__footer"},s?a.a.createElement(LoadMore,{loadingMore:l,maxId:i,params:r}):a.a.createElement("div",{className:"text--center pm-link disabled"},"No more activity.")))}}]),CollectionActivity}();var Se=Object(i.b)(function CollectionActivity_mapStateToProps(e){var t=e.shared.userData,n=s.a.get(e,["shared","workspaces","active"]),o=e.collection.versions||{},a=o.data||[],r=s.a.get(e,"collection.activity",{});return CollectionActivity_objectSpread({},r,{activeWorkspaceId:n,data:(r.data||[]).map(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(e.tags||[]).find(function(e){return"latest"===e.id}),n=CollectionActivity_objectSpread({},e,{tags:a.filter(function(t){return t.revision===e.id}).map(function(e){return CollectionActivity_objectSpread({},e,{deleting:o.deleting.includes(e.id)})})});return t&&(n.tags||[]).push(t),n}),loading:r.loading||s.a.get(e,"collection.meta.loading"),userData:t,teamUsers:s.a.get(e,"shared.team.users"),collectionName:s.a.get(e,"collection.meta.name"),error:r.error})})(ke),Te=n("s4NR"),Ie=n.n(Te),Ne="".concat("https://static.postman.co/img","/team-public-profile-skeleton.svg"),De="".concat("https://static.postman.co/img","/team-public-profile-skeleton.svg"),je="".concat("https://static.postman.co/img","/api-network-listing-skeleton.svg");function ProfilePreview(e){var t="user"===e.type?De:Ne,n="user"===e.type?"Add a summary to help users understand what you do.":"Add a team summary to help users understand what your team does.";return a.a.createElement("div",{className:"collection-publish-profile-preview pm-row"},a.a.createElement("div",{className:"collection-publish-profile-preview__logo pm-col-md-2 pm-col-xs-2"},e.logo),a.a.createElement("div",{className:"collection-publish-profile-preview-info pm-col-md-10 pm-col-xs-10"},a.a.createElement("h2",{className:"pm-h2",title:e.name},e.name),a.a.createElement("span",{className:p()({"collection-publish-profile-preview-info__description--empty":!e.description})},e.description||n)),a.a.createElement("div",{className:"collection-publish-profile-preview-skeleton pm-row"},a.a.createElement("img",{className:"pm-col-md-12 pm-col-xs-12",src:t})))}function ListingPreview(e){var t=e.name,n=e.summary,o=e.description,r=e.type,i=e.maxLengths,l="network"===r?"API":"template";return a.a.createElement("div",{className:"collection-publish-listing-preview"},a.a.createElement("div",{className:"pm-col-md-8 pm-col-xs-8"},a.a.createElement("h2",{className:"pm-h2",title:t},t),a.a.createElement("div",{className:p()("collection-publish-listing-preview__summary",{"collection-publish-listing-preview__summary--empty":!n})},s.a.truncate(n,{length:i.listingSummary})||"Your ".concat(l," summary will show up here")),a.a.createElement("div",{className:p()("collection-publish-listing-preview__description",{"collection-publish-listing-preview__description--empty":!o})},o?a.a.createElement(d.Q,{className:"pm-markdown",source:o}):"Your ".concat(l," description will show up here"))),a.a.createElement("img",{className:"pm-col-md-4 pm-col-xs-4",src:je}))}function PreviewPopover(e){return a.a.createElement(c.Popover,{closeOnClickOutside:!0,closeOnEscape:!0,align:"bottom",className:"collection-publish__preview-popover",content:e.content},function(t){return a.a.createElement("div",{className:"collection-publish__preview",ref:t.triggerRef,onClick:t.onClick},a.a.createElement(c.Icon,{name:"preview",pmStyle:"primary",size:"sm"}),e.label)})}function EntityPreview(e){var t=e.entity,n=e.entityId;if("user"!==t&&"team"!==t)return null;var o="user"===t,i=a.a.createElement(r.c,{className:"pm-link",to:"/settings/".concat(o?"me":"team","/public")},"Public Profile Settings."),l=o?a.a.createElement(c.UserIcon,{className:p()("collection-publish-entity-preview__image--user","collection-publish-entity-preview__image"),size:"sm",url:e.logo,userId:n}):a.a.createElement("img",{className:"collection-publish-entity-preview__image",src:e.logo}),s=a.a.createElement(PreviewPopover,{content:a.a.createElement(ProfilePreview,{description:e.description,logo:l,name:e.name,type:o?"user":"team"}),label:"Preview ".concat(o?"User":"Team"," profile")}),u=o?null:a.a.createElement("div",{className:"collection-publish-entity-preview__metrics"},a.a.createElement("span",{className:"entity-metric"},a.a.createElement("span",{className:"entity-metric__label"},"APIs:Â "),a.a.createElement("span",{className:"entity-metric__value"},e.metrics&&e.metrics.apiCount)),a.a.createElement("span",{className:"entity-metric"},a.a.createElement("span",{className:"entity-metric__label"},"Imports: "),a.a.createElement("span",{className:"entity-metric__value"},e.metrics&&e.metrics.importCount)));return a.a.createElement("div",{className:"collection-publish__two-col"},a.a.createElement("div",{className:"collection-publish-entity-preview"},l&&l,a.a.createElement("h2",{className:"collection-publish-entity-preview__name",title:e.name},e.name),u),a.a.createElement("p",{className:"collection-publish__description"},"A public profile is required to publish this collection to the API Network. If your team doenâ€™t have one, it will be created for you. You can customise it from ",i,s))}function CategoryCloud(e){var t=e.categorySelecthandler,n=e.allCategories,o=e.selectedCategories.map(function(e){return e.id});return a.a.createElement("div",{className:"collection-publish-categories"},n.map(function(e){return a.a.createElement(c.Badge,{clickable:!0,key:e.id,pmStyle:o.indexOf(e.id)>-1?"success":"secondary",value:e.id,onClick:function onClick(){t(e)}},e.name)}))}function PublishToNetworkForm(e){var t=e.apiName,n=e.apiSummary,o=e.apiDescription,r=e.maxLengths,i=Boolean(""===t||s.a.size(t)>r.listingName),l=Boolean(""===n||s.a.size(n)>r.listingSummary),u="API name cannot be empty or cannot exceed ".concat(r.listingName," characters"),p="API summary cannot be empty or cannot exceed ".concat(r.listingSummary," characters"),d=a.a.createElement(PreviewPopover,{content:a.a.createElement(ListingPreview,{description:o,maxLengths:r,name:t,summary:n,type:"network"}),label:"Preview Listing"}),m={apiCount:e.teamInformation.apiCount,importCount:e.teamInformation.importCount};return a.a.createElement("div",{className:"push-one-half--left"},a.a.createElement("label",{className:"collection-publish__label"},"Publish as"),a.a.createElement(EntityPreview,{description:e.teamInformation.description,entity:"team",logo:"".concat(e.teamInformation.logo,"?fp=").concat((new Date).getTime()),metrics:m,name:e.teamInformation.name}),a.a.createElement("label",{className:"collection-publish__label"},"Listing Name",a.a.createElement("span",null,s.a.size(t),"/",r.listingName)),a.a.createElement("div",{className:"collection-publish__two-col"},a.a.createElement(c.Field,{block:!0,className:"pm-select--block",message:i?u:null,placeholder:"Eg. Link Checker",size:"md",status:i?"error":null,value:t,onChange:function onChange(t){e.onNameChange(t.target.value)}}),a.a.createElement("p",{className:"collection-publish__description"},"This is the name your collection will have on the API Network.",d)),a.a.createElement("label",{className:"collection-publish__label"},"Listing Summary",a.a.createElement("span",null,s.a.size(n),"/",r.listingSummary)),a.a.createElement("div",{className:"collection-publish__two-col"},a.a.createElement(c.Field,{block:!0,className:"pm-select--block",message:l?p:null,size:"md",status:l?"error":null,value:n,onChange:function onChange(t){e.onSummaryChange(t.target.value)}}),a.a.createElement("p",{className:"collection-publish__description"},"Briefly state what the collection can do. This summary will appear on your team's public profile page.")),a.a.createElement("label",{className:"collection-publish__label"},"Listing Description"),a.a.createElement("div",{className:"collection-publish__two-col"},a.a.createElement(c.TextArea,{className:"pm-select--block",rows:"5",size:"md",value:o,onChange:function onChange(t){e.onDescriptionChange(t.target.value)}}),a.a.createElement("p",{className:"collection-publish__description"},"Give more details about the collection, such as:",a.a.createElement("br",null),"â€¢ What the collection provides (a feature overview),",a.a.createElement("br",null),"â€¢ Who the collection is for.",a.a.createElement("br",null),"The description will appear on the collectionâ€™s detail page. Markdown supported.")),a.a.createElement("label",{className:"collection-publish__label"},"Categories"),a.a.createElement(CategoryCloud,{allCategories:e.allCategories,categorySelecthandler:e.categorySelecthandler,selectedCategories:e.selectedCategories}),a.a.createElement("p",{className:"collection-publish__message"},"Choose up to ",e.maxSelectableCategories," categories that best describe your API."))}function PublishToTemplate(e){var t=e.templateName,n=e.templateSummary,o=e.templateDescription,r=e.teamInformation,i=e.userInformation,l=e.selectedPublisher,u=e.teamId,p=e.maxLengths,d=e.userId,m=[{label:"User (".concat(i.name,")"),value:"user"}],f="team"===l?r:i,h=Boolean(""===t||s.a.size(t)>p.listingName),g=Boolean(""===n||s.a.size(n)>p.listingSummary),y="Template name cannot be empty or cannot exceed ".concat(p.listingName," characters"),b="Template summary cannot be empty or cannot exceed\n      ".concat(p.listingSummary," characters"),v=a.a.createElement(PreviewPopover,{content:a.a.createElement(ListingPreview,{description:o,maxLengths:p,name:t,summary:n,type:"template"}),label:"Preview Listing"}),_="team"===l?{apiCount:f.apiCount,importCount:f.importCount}:{templateCount:f.templateCount,importCount:f.importCount};return u&&m.push({label:"Team (".concat(r.name,")"),value:"team"}),a.a.createElement("div",{className:"push-one-half--left"},a.a.createElement("label",{className:"collection-publish__label"},"Publish as"),a.a.createElement(c.SelectDropdown,{block:!0,options:m,searchable:!1,size:"md",value:l,onChange:e.onPublisherSelect}),a.a.createElement(EntityPreview,{description:f.description,entity:l,entityId:"user"===l?d:u,logo:f.logo||f.profile_pic_url,metrics:_,name:f.name}),a.a.createElement("label",{className:"collection-publish__label"},"Template Name",a.a.createElement("span",null,s.a.size(t),"/",p.listingName)),a.a.createElement("div",{className:"collection-publish__two-col"},a.a.createElement(c.Field,{block:!0,className:"pm-select--block",message:h?y:null,size:"md",status:h?"error":null,value:t,onChange:function onChange(t){e.onNameChange(t.target.value)}}),a.a.createElement("p",{className:"collection-publish__description"},"Enter a name for the template.",v)),a.a.createElement("label",{className:"collection-publish__label"},"Template Summary",a.a.createElement("span",null,s.a.size(n),"/",p.listingSummary)),a.a.createElement("div",{className:"collection-publish__two-col"},a.a.createElement(c.Field,{block:!0,className:"pm-select--block",message:g?b:null,size:"md",status:g?"error":null,value:n,onChange:function onChange(t){e.onSummaryChange(t.target.value)}}),a.a.createElement("p",{className:"collection-publish__description"},"Briefly state what the template does. The summary will appear on the Templates page.")),a.a.createElement("label",{className:"collection-publish__label"},"Template Description"),a.a.createElement("div",{className:"collection-publish__two-col"},a.a.createElement(c.TextArea,{className:"pm-select--block",rows:"5",size:"md",value:o,onChange:function onChange(t){e.onDescriptionChange(t.target.value)}}),a.a.createElement("p",{className:"collection-publish__description"},"Enter a detailed description about how the template can be used. Description supports markdown.")),a.a.createElement("label",{className:"collection-publish__label"},"Categories"),a.a.createElement(CategoryCloud,{allCategories:e.allCategories,categorySelecthandler:e.categorySelecthandler,selectedCategories:e.selectedCategories}),a.a.createElement("p",{className:"collection-publish__message"},"Choose up to ",e.maxSelectableCategories," categories that best describe your Template."))}function PublishNetworkSection(e){return Object(o.useEffect)(function(){(new Image).src=De,(new Image).src=Ne,(new Image).src=je},[]),a.a.createElement("div",{className:"collection-publish__publishing-type-content"},"network"===e.publishType&&a.a.createElement(PublishToNetworkForm,{allCategories:e.apiCategories,apiDescription:e.apiDescription,apiName:e.apiName,apiSummary:e.apiSummary,categorySelecthandler:e.onCategorySelect,maxLengths:e.maxLengths,maxSelectableCategories:e.maxSelectableCategories,selectedCategories:e.selectedCategories,teamInformation:e.teamInformation,onDescriptionChange:e.onApiDescriptionChange,onNameChange:e.onApiNameChange,onSummaryChange:e.onApiSummaryChange}),"template"===e.publishType&&a.a.createElement(PublishToTemplate,{allCategories:e.templateCategories,categorySelecthandler:e.onCategorySelect,maxLengths:e.maxLengths,maxSelectableCategories:e.maxSelectableCategories,selectedCategories:e.selectedCategories,selectedPublisher:e.selectedPublisher,teamId:e.teamId,teamInformation:e.teamInformation,templateDescription:e.templateDescription,templateName:e.templateName,templateSummary:e.templateSummary,userId:e.userId,userInformation:e.userInformation,onDescriptionChange:e.onTemplateDescriptionChange,onNameChange:e.onTemplateNameChange,onPublisherSelect:e.onPublisherSelect,onSummaryChange:e.onTemplateSummaryChange}))}function MultiCheckboxPopover(e){var t=e.selected||[];return a.a.createElement("div",{className:"pm-multi-checkbox__popover-container"},e.options.map(function(n){var o=t.indexOf(n.value)>-1;return a.a.createElement(c.Checkbox,{block:e.block,checked:o,className:"pm-multi-checkbox__list-item",disabled:o&&1===e.selected.length,key:n.value,label:n.label,size:"md",value:n.value,onClick:e.onCheckboxClick.bind(null,n.value)})}))}function MultiCheckboxDropdown(e){var t=a.a.createElement(MultiCheckboxPopover,{options:e.options,selected:e.selected,onCheckboxClick:e.onCheckboxClick});return a.a.createElement(c.Popover,{closeOnClickOutside:!0,hideCaret:!0,align:"bottom-left",className:"pm-multi-checkbox__popover",content:t},function(t){return a.a.createElement("div",{className:"pm-multi-checkbox",ref:t.triggerRef,onClick:t.onClick},a.a.createElement("span",{className:p()({"pm-multi-checkbox__select-placeholder":0===s.a.get(e,"selected.length"),"pm-multi-checkbox__select-text":s.a.get(e,"selected.length")>0})},function getPlaceholderText(e){var t=e.selected;if(!Array.isArray(t)||0===t.length)return"No Versions";if(Array.isArray(t)&&1===t.length){var n=e.options.find(function(e){return e&&e.value===t[0]});return s.a.get(n,"label")}return"Multiple versions (".concat(t.length,")")}(e)),a.a.createElement(c.Icon,{className:"pm-multi-checkbox__select-icon",name:t.open?"up":"down",size:"sm"}))})}function CustomDomainHelperText(e){var t=e.domain,n=e.currentlyPublishedDomainId,o=e.currentUserId,i=e.domains,l=s.a.get(t,"publishData.owner"),u=s.a.get(t,"publishData.collectionId"),p=s.a.get(t,"id"),d={unavailableDefault:a.a.createElement(c.Alert,{pmStyle:"error"},a.a.createElement(c.AlertBody,null,"Someone else on your team has already published a documentation with this domain. Ask them to unpublish their documentation before publishing yours.")),unavailableOwner:a.a.createElement(c.Alert,{pmStyle:"error"},a.a.createElement(c.AlertBody,null,a.a.createElement(r.c,{className:"pm-link",to:"/collections/".concat(l,"-").concat(u)},"Another published documentation"),"Â is already using this custom domain. Please unpublish that before attempting to publish another documentation using this domain.")),unverified:a.a.createElement(c.Alert,{pmStyle:"warning"},a.a.createElement(c.AlertBody,null,"Once domain ownership is verified, your documentation will be accessible from this URL.Â ",a.a.createElement(r.c,{className:"pm-link",to:"/settings/domains/".concat(p)},"Verify Now")))};if(null!==p&&i&&i.length>1){if(null!==s.a.get(t,"upstream")&&p!==n)return"".concat(l)==="".concat(o)?d.unavailableOwner:d.unavailableDefault;if(!s.a.get(t,"verified"))return d.unverified}return null}function CustomDomainSelector(e){var t=this,n=e.customDomains,o=e.customDomainsOptionRenderer,r=e.handleCustomDomainChange,i=e.selectedCustomDomain,l=e.collection,u=e.userId,p=e.isFree,d=e.isForeverTrial,m=e.loading,f=e.error;return a.a.createElement("div",{className:"collection-publish__two-col"},a.a.createElement(c.Tooltip,{className:"collection-publish__tooltip",content:"This feature is only available for paid plans.",show:p||d},function(e){return a.a.createElement("div",{ref:e.triggerRef,onMouseOut:e.onMouseOut,onMouseOver:e.onMouseOver},a.a.createElement(c.SelectDropdown,{block:!0,disabled:f||p||d,label:f?"Could not load custom domains":"No custom domain",labelKey:"fqdn",loading:m,optionRenderer:o.bind(t,l.customDomainId),options:n,searchable:!1,size:"md",value:s.a.get(i,"id"),valueKey:"id",valueRenderer:o.bind(t,l.customDomainId),onChange:r}))}),a.a.createElement("p",{className:"collection-publish__description"},"The published collection will be made available at the selected domain"),a.a.createElement(CustomDomainHelperText,{currentlyPublishedDomainId:l.customDomainId,currentUserId:u,domain:i,domains:n}))}function DoubleColumnPreview(e){var t=e.highlightColor,n=e.topBarColor,o=e.sidebarColor,r=e.teamLogoUrl,i={opacity:.05},l={opacity:.1},s={opacity:.1};return a.a.createElement("svg",{id:"documenter-preview-double-col",width:"100%",height:"130px"},a.a.createElement("rect",{x:"0",y:"0",width:"100%",height:"170",stroke:"#d8d8d8",style:{strokeWidth:1}}),a.a.createElement("rect",{x:"0",y:30,width:"100%",height:"130",fill:"#ffffff"}),a.a.createElement("rect",{x:"0",y:30,width:"30%",height:"130",fill:"#303030",style:{opacity:.05}}),a.a.createElement("rect",{x:"2%",y:"40",width:"26%",height:"10",rx:"3",ry:"3",fill:"#000000",style:i}),a.a.createElement("rect",{x:"2%",y:"55",width:"15%",height:"10",rx:"3",ry:"3",fill:"#000000",style:i}),a.a.createElement("rect",{x:"2%",y:"80",width:"26%",height:"10",rx:"3",ry:"3",fill:"#000000",style:i}),a.a.createElement("rect",{x:"2%",y:"95",width:"15%",height:"10",rx:"3",ry:"3",fill:"#000000",style:i}),a.a.createElement("rect",{x:"32%",y:"40",width:"41%",height:"10",rx:"3",ry:"3",fill:"#000000",style:i}),a.a.createElement("rect",{x:"32%",y:"55",width:"15%",height:"10",rx:"3",ry:"3",fill:"#000000",style:i}),a.a.createElement("rect",{x:"32%",y:"80",width:"15%",height:"10",rx:"3",ry:"3",fill:t}),a.a.createElement("rect",{x:"75%",y:30,width:"25%",height:"130",fill:o}),a.a.createElement("rect",{x:"75%",y:"40",width:"25%",height:"20",fill:"#ffffff",style:l}),a.a.createElement("rect",{x:"75%",y:"80",width:"25%",height:"10",fill:"#ffffff",style:l}),a.a.createElement("rect",{x:"0",y:"0",width:"100%",height:30,fill:n,stroke:"#000000",style:{strokeWidth:.5,strokeOpacity:.3}}),a.a.createElement("image",{xlinkHref:r,preserveAspectRatio:"xMinYMin",x:"10",y:"5",width:"57",height:"20"}),a.a.createElement("rect",{x:"83%",y:"7",width:"15%",height:"16",rx:"3",ry:"3",fill:"#000000",style:s}),a.a.createElement("rect",{x:"66%",y:"7",width:"15%",height:"16",rx:"3",ry:"3",fill:"#000000",style:s}))}function SingleColumnPreview(e){var t=e.highlightColor,n=e.topBarColor,o=e.sidebarColor,r=e.teamLogoUrl,i={opacity:.05},l={opacity:.1};return a.a.createElement("svg",{id:"documenter-preview-single-col",width:"100%",height:"130px"},a.a.createElement("rect",{x:"0",y:"0",width:"100%",height:"170",stroke:"#d8d8d8",style:{strokeWidth:1}}),a.a.createElement("rect",{x:"0",y:30,width:"100%",height:"130",fill:"#ffffff"}),a.a.createElement("rect",{x:"0",y:30,width:"30%",height:"130",fill:"#303030",style:{opacity:.05}}),a.a.createElement("rect",{x:"2%",y:"40",width:"26%",height:"10",rx:"3",ry:"3",fill:"#000000",style:i}),a.a.createElement("rect",{x:"2%",y:"55",width:"15%",height:"10",rx:"3",ry:"3",fill:"#000000",style:i}),a.a.createElement("rect",{x:"2%",y:"80",width:"26%",height:"10",rx:"3",ry:"3",fill:"#000000",style:i}),a.a.createElement("rect",{x:"2%",y:"95",width:"15%",height:"10",rx:"3",ry:"3",fill:"#000000",style:i}),a.a.createElement("rect",{x:"2%",y:"135",width:"15%",height:"10",rx:"3",ry:"3",fill:"#000000",style:i}),a.a.createElement("rect",{x:"37%",y:"40",width:"45%",height:"10",rx:"3",ry:"3",fill:"#000000",style:i}),a.a.createElement("rect",{x:"37%",y:"55",width:"35%",height:"10",rx:"3",ry:"3",fill:t}),a.a.createElement("rect",{x:"30%",y:"85",width:"70%",height:"50",fill:o}),a.a.createElement("rect",{x:"37%",y:"85",width:"56%",height:"50",rx:"3",ry:"3",fill:"#ffffff",style:{opacity:.1}}),a.a.createElement("rect",{x:"0",y:"0",width:"100%",height:30,fill:n,stroke:"#000000",style:{strokeWidth:.5,strokeOpacity:.3}}),a.a.createElement("image",{xlinkHref:r,preserveAspectRatio:"xMinYMin",x:"10",y:"5",width:"57",height:"20"}),a.a.createElement("rect",{x:"83%",y:"7",width:"15%",height:"16",rx:"3",ry:"3",fill:"#000000",style:l}),a.a.createElement("rect",{x:"66%",y:"7",width:"15%",height:"16",rx:"3",ry:"3",fill:"#000000",style:l}))}function PublishViewPreview(e){switch(e.defaultLayout){case"classic-double-column":return a.a.createElement(DoubleColumnPreview,e);case"classic-single-column":return a.a.createElement(SingleColumnPreview,e);default:return a.a.createElement(DoubleColumnPreview,e)}}function ColorPicker(e){var t=e.colorHex,n=e.onColorChange,o={background:t};return a.a.createElement("div",{className:"color-picker"},a.a.createElement(c.Field,{size:"md",value:t,onChange:n}),a.a.createElement("div",{className:"color-picker__preview",style:o}))}function CustomStyleSelector(e){var t=e.self,n=e.customColors,o=e.defaultLayout,r=e.publishedCustomColors,i=void 0===r?{}:r,l=e.onColorChange,s=e.onDefaultLayoutChange,u=e.teamLogoUrl,p=e.onResetCustomColors;return a.a.createElement("div",{className:"collection-publish__custom-styles"},a.a.createElement(PublishViewPreview,{defaultLayout:o,highlightColor:n.highlight,sidebarColor:n["right-sidebar"],teamLogoUrl:u,topBarColor:n["top-bar"]}),a.a.createElement("div",{className:"default-layout-selector"},a.a.createElement("h5",{className:"pm-h5"}," Default layout "),a.a.createElement(c.Toggle,{className:"collection-publish__layout",items:[{label:"Double Column",key:"classic-double-column"},{label:"Single Column",key:"classic-single-column"}],value:o,onChange:s})),a.a.createElement("h5",{className:"pm-h5"},"Header background color",i["top-bar"].toLowerCase()!==n["top-bar"].toLowerCase()?a.a.createElement("span",{className:"collection-publish__reset-styles",onClick:function onClick(){p(i,"top-bar")}},"Reset"):null),a.a.createElement(ColorPicker,{colorHex:n["top-bar"],onColorChange:l.bind(t,"top-bar")}),a.a.createElement("h5",{className:"pm-h5"},"Code background color",i["right-sidebar"].toLowerCase()!==n["right-sidebar"].toLowerCase()?a.a.createElement("span",{className:"collection-publish__reset-styles",onClick:function onClick(){p(i,"right-sidebar")}},"Reset"):null),a.a.createElement(ColorPicker,{colorHex:n["right-sidebar"],onColorChange:l.bind(t,"right-sidebar")}),a.a.createElement("h5",{className:"pm-h5"},"Highlight color",i.highlight.toLowerCase()!==n.highlight.toLowerCase()?a.a.createElement("span",{className:"collection-publish__reset-styles",onClick:function onClick(){p(i,"highlight")}},"Reset"):null),a.a.createElement(ColorPicker,{colorHex:n.highlight,onColorChange:l.bind(t,"highlight")}))}function SidebarNavigation(e){var t=e.heading,n=e.options,o=e.className;return a.a.createElement("div",{className:p()("pm-sidebar-navigation",o)},a.a.createElement("h2",{className:"pm-sidebar-navigation__heading"},t),a.a.createElement("ul",null,Array.isArray(n)&&n.map(function(t,n){var o=e.activeItem===s.a.get(t,"hash");return a.a.createElement("li",{className:p()({"active-item":o}),key:n},a.a.createElement("a",{className:p()("pm-sidebar-navigation__item",{"pm-sidebar-navigation__item--active":o}),href:t.hash},t.label))})))}function PublishForm_typeof(e){return(PublishForm_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function PublishForm_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function PublishForm_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?PublishForm_ownKeys(Object(n),!0).forEach(function(t){PublishForm_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PublishForm_ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function PublishForm_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function PublishForm_defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function PublishForm_getPrototypeOf(e){return(PublishForm_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function PublishForm_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function PublishForm_setPrototypeOf(e,t){return(PublishForm_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function PreviewDocumentation(e){var t=e.onClick,n=e.content;return a.a.createElement(c.Tooltip,{align:"right",content:n,size:"lg"},function(e){return a.a.createElement("div",{className:"pm-sidebar-navigation__preview-link",ref:e.triggerRef,onClick:t,onMouseOut:e.onMouseOut,onMouseOver:e.onMouseOver},a.a.createElement(c.Icon,{name:"preview",pmStyle:"primary",size:"sm"}),a.a.createElement("span",null,"Preview Documentation"))})}function PublishSwitcher(e){var t=e.publishType,n=e.onChange,o=e.isPublishedToNetwork,r=e.publishToNetwork,i=e.teamId,l=!i||o,s=o,u=r&&!l&&"network"===t,d=r&&!s&&"template"===t;function getPublishSwitcherTooltip(){return i?o&&"network"===t?"To change this, remove this collection from the API Network first.":o&&"template"===t?"To change this, remove this collection from Postman Templates first.":null:"You need to be a part of a team to publish to API Network."}return a.a.createElement("div",{className:"collection-publish-type-switcher pm-row push--right"},a.a.createElement(c.Tooltip,{className:"collection-publish__tooltip",content:getPublishSwitcherTooltip(),show:Boolean(r)&&l&&"network"!==t},function(e){return a.a.createElement("div",{className:"pm-col-md-6 collection-publish-type-switcher__item-wrapper",ref:e.triggerRef,onMouseOut:e.onMouseOut,onMouseOver:e.onMouseOver},a.a.createElement("div",{className:p()("collection-publish-type-switcher__item",{active:u,disabled:l}),onClick:function onClick(){n("network")}},a.a.createElement(c.Radio,{checked:u,className:"collection-publish-type-switcher__radio",disabled:l,key:"api-network",label:"Add to API Network",name:"api-network",size:"md",value:"api-network"}),a.a.createElement("p",{className:"collection-publish-type-switcher__description"},"Get featured on a curated list of API publishers and share your API with millions of Postman users.")))}),a.a.createElement(c.Tooltip,{className:"collection-publish__tooltip",content:getPublishSwitcherTooltip(),show:Boolean(r)&&s&&"template"!==t},function(e){return a.a.createElement("div",{className:"pm-col-md-6 collection-publish-type-switcher__item-wrapper",ref:e.triggerRef,onMouseOut:e.onMouseOut,onMouseOver:e.onMouseOver},a.a.createElement("div",{className:p()("collection-publish-type-switcher__item",{active:d,disabled:s}),onClick:function onClick(){n("template")}},a.a.createElement(c.Radio,{checked:d,className:"collection-publish-type-switcher__radio",disabled:s,key:"template",label:"Add to Postman Templates",name:"template",size:"md",value:"template"}),a.a.createElement("p",{className:"collection-publish-type-switcher__description"},"Share an interesting collection with the community. It could be a bunch of useful APIs or a way to automate a workflow.")))}))}var Re=function(e){function PublishForm(e){var t;!function PublishForm_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,PublishForm);var n=e.collection,o=e.teamId?"network":"template",a=s.a.get(n,"name")||null,r=s.a.get(n,"description")||null,i=s.a.get(n,"publishType")||o;return(t=function PublishForm_possibleConstructorReturn(e,t){return!t||"object"!==PublishForm_typeof(t)&&"function"!=typeof t?PublishForm_assertThisInitialized(e):t}(this,PublishForm_getPrototypeOf(PublishForm).call(this,e))).defaultCustomColors={"top-bar":"#ffffff","right-sidebar":"#303030",highlight:"#ef5b25"},t.state={templateName:s.a.get(n,"templateName")||a,templateSummary:s.a.get(n,"templateSummary")||null,templateDescription:s.a.get(n,"templateDescription")||r,apiName:s.a.get(n,"apiName")||a,apiSummary:s.a.get(n,"apiSummary")||null,apiDescription:s.a.get(n,"apiDescription")||r,customColors:s.a.get(n,"customColor")||t.defaultCustomColors,defaultLayout:s.a.get(n,"documentationLayout")||"classic-double-column",selectedCustomDomain:s.a.find(e.customDomains,{id:n.customDomainId||null}),selectedEnvironmentTemplate:s.a.find(e.environmentTemplates,{value:n.environmentTemplateId}),publishToNetwork:s.a.get(n,"publishedToNetwork")||e.addToAPINetwork,publishType:i,selectedCategories:s.a.get(e,"selectedCategories")||[],selectedVersions:t.getSelectedVersion(e),selectedPublisher:s.a.get(n,"publishedBy.type","network"===i?"team":"user"),collectionVersions:s.a.get(t.props,"availableCollectionVersions",[]).map(function(e){return{value:e.id,label:e.apiVersion.name}}),previewHotReloadIsSupported:function getPostMessageSupport(e){var t=new Boolean("postMessage"in window);if("function"==typeof window.postMessage){t.structuredclones=!1;try{window.postMessage({toString:function toString(){}},e)}catch(e){t.structuredclones="DataCloneError"===e.name}return t.structuredclones}return!1}([t.props.documentationConfig.protocol,t.props.documentationConfig.host].join("://")),maxLengths:{listingName:70,listingSummary:140}},t.handleEnvironmentTemplateChange=t.handleEnvironmentTemplateChange.bind(PublishForm_assertThisInitialized(t)),t.handleCustomColorChange=t.handleCustomColorChange.bind(PublishForm_assertThisInitialized(t)),t.handleCustomDomainChange=t.handleCustomDomainChange.bind(PublishForm_assertThisInitialized(t)),t.customDomainsOptionRenderer=t.customDomainsOptionRenderer.bind(PublishForm_assertThisInitialized(t)),t.togglePublishToNetwork=t.togglePublishToNetwork.bind(PublishForm_assertThisInitialized(t)),t.handleCategorySelect=t.handleCategorySelect.bind(PublishForm_assertThisInitialized(t)),t.onPublish=t.onPublish.bind(PublishForm_assertThisInitialized(t)),t.resetCustomColors=t.resetCustomColors.bind(PublishForm_assertThisInitialized(t)),t.handleTemplateSummaryChange=t.handleTemplateSummaryChange.bind(PublishForm_assertThisInitialized(t)),t.handleDescriptionChange=t.handleDescriptionChange.bind(PublishForm_assertThisInitialized(t)),t.handleTemplateNameChange=t.handleTemplateNameChange.bind(PublishForm_assertThisInitialized(t)),t.handleApiDescriptionChange=t.handleApiDescriptionChange.bind(PublishForm_assertThisInitialized(t)),t.handleApiNameChange=t.handleApiNameChange.bind(PublishForm_assertThisInitialized(t)),t.handleApiSummaryChange=t.handleApiSummaryChange.bind(PublishForm_assertThisInitialized(t)),t.handleVersionCheckboxClick=t.handleVersionCheckboxClick.bind(PublishForm_assertThisInitialized(t)),t.getSelectedVersion=t.getSelectedVersion.bind(PublishForm_assertThisInitialized(t)),t.handlePreview=t.handlePreview.bind(PublishForm_assertThisInitialized(t)),t.previewWindow=null,t.handlePublisherSelect=t.handlePublisherSelect.bind(PublishForm_assertThisInitialized(t)),t.handlePublishTypeChange=t.handlePublishTypeChange.bind(PublishForm_assertThisInitialized(t)),t.handleDefaultLayoutChange=t.handleDefaultLayoutChange.bind(PublishForm_assertThisInitialized(t)),t}return function PublishForm_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&PublishForm_setPrototypeOf(e,t)}(PublishForm,o["Component"]),function PublishForm_createClass(e,t,n){return t&&PublishForm_defineProperties(e.prototype,t),n&&PublishForm_defineProperties(e,n),e}(PublishForm,[{key:"componentDidMount",value:function componentDidMount(){!function PublishForm_scrollToHash(e){var t,n=e.hash;n&&"string"==typeof n&&(t=n.replace("#","")),t&&setTimeout(function(){var e=document.getElementById(t);e&&e.scrollIntoView()},0)}(this.props.location)}},{key:"getSelectedVersion",value:function getSelectedVersion(e){if(e.collection.published)return s.a.get(e,"collection.publishedVersions",[]).map(function(e){return e.versionTagId});var t=e.location.query.version,n=s.a.get(e,"availableCollectionVersions",[]).map(function(e){return e.id});return t&&n.indexOf(t)>-1?[t]:[n[0]]}},{key:"UNSAFE_componentWillReceiveProps",value:function UNSAFE_componentWillReceiveProps(e){s.a.get(this.props,"collection.publishedVersions")===s.a.get(e,"collection.publishedVersions")&&s.a.get(this.props,"availableCollectionVersions")===s.a.get(e,"availableCollectionVersions")||this.setState({collectionVersions:s.a.get(e,"availableCollectionVersions",[]).map(function(e){return{value:e.id,label:e.apiVersion.name}}),selectedVersions:this.getSelectedVersion(e)})}},{key:"handleEnvironmentTemplateChange",value:function handleEnvironmentTemplateChange(e){var t=this;this.setState({selectedEnvironmentTemplate:e},function(){t.handlePreview()})}},{key:"handleCustomDomainChange",value:function handleCustomDomainChange(e){this.setState({selectedCustomDomain:e})}},{key:"customDomainsOptionRenderer",value:function customDomainsOptionRenderer(e,t){var n=t.fqdn,o="".concat(t.fqdn," (unverified)"),a="".concat(t.fqdn," (unavailable)");return t.id?null!==t.upstream&&t.id!==e?a:t.verified?n:o:"No custom domain"}},{key:"handleCustomColorChange",value:function handleCustomColorChange(e,t,n){var o=this,a=n.target.value;m.t.isHexColor(a)&&this.setState({customColors:PublishForm_objectSpread({},e,PublishForm_defineProperty({},t,a))},function(){o.handlePreview()})}},{key:"togglePublishToNetwork",value:function togglePublishToNetwork(){this.setState(function(e){return{publishToNetwork:!e.publishToNetwork}})}},{key:"handleTemplateNameChange",value:function handleTemplateNameChange(e){this.setState({templateName:e})}},{key:"handleTemplateSummaryChange",value:function handleTemplateSummaryChange(e){this.setState({templateSummary:e})}},{key:"handleDescriptionChange",value:function handleDescriptionChange(e){this.setState({templateDescription:e})}},{key:"handleApiDescriptionChange",value:function handleApiDescriptionChange(e){this.setState({apiDescription:e})}},{key:"handleApiNameChange",value:function handleApiNameChange(e){this.setState({apiName:e})}},{key:"handleApiSummaryChange",value:function handleApiSummaryChange(e){this.setState({apiSummary:e})}},{key:"handleDefaultLayoutChange",value:function handleDefaultLayoutChange(e){var t=this;this.setState({defaultLayout:e},function(){t.handlePreview()})}},{key:"handleCategorySelect",value:function handleCategorySelect(e){this.setState(function(t){var n=t.selectedCategories;return s.a.find(n,function(t){return t.id===e.id})?n=n.filter(function(t){return e.id!==t.id}):n.length<3&&(n=n.concat(e)),{selectedCategories:n}})}},{key:"resetCustomColors",value:function resetCustomColors(e,t){var n=this;this.setState(function(n){return n.customColors[t]=e[t],n},function(){n.handlePreview()})}},{key:"onPublish",value:function onPublish(){var e=this.props,t=e.collection,n=e.documentationConfig,o=e.teamId,a=e.userId,r=this.state,i=r.customColors,l=r.defaultLayout,s=r.selectedCustomDomain,c=r.selectedCategories,u=r.publishToNetwork,p=r.selectedEnvironmentTemplate,d=r.publishType,m=r.templateName,f=r.templateSummary,h=r.templateDescription,g=r.apiName,y=r.apiSummary,b=r.apiDescription,v=r.selectedVersions,_=r.selectedPublisher,C=t.owner;!u&&t.publishedToNetwork?window.pm.actions.showModal({type:"confirm",title:"template"===d?"Remove from Postman Templates":"Unpublish from the API Network",actionType:"error",confirmLabel:"Yes",body:"template"===d?"Are you sure you want to remove this collection from Postman Templates?\n        This collection would still be available at the public URL but not discoverable through Postman Templates.":"Are you sure you want to unpublish this collection from the API Network?\n           This collection would still be available at the public URL but not discoverable through the API Network",onConfirm:function onConfirm(){window.pm.actions.publishCollection({collection:t,customColors:i,defaultLayout:l,domain:s,ownerId:C,template:p,publishToNetwork:u,publishType:d,selectedCategories:c,documentationConfig:n,templateName:m,templateSummary:f,templateDescription:h,apiName:g,apiSummary:y,apiDescription:b,collectionVersions:v}),window.pm.actions.hideModal()}}):window.pm.actions.publishCollection(PublishForm_objectSpread({collection:t,customColors:i,defaultLayout:l,domain:s,ownerId:C,template:p,templateName:m,templateSummary:f,templateDescription:h,publishType:d,publishToNetwork:u,selectedCategories:c,documentationConfig:n,apiName:g,apiSummary:y,apiDescription:b,collectionVersions:v,userId:a},"team"===_?{teamId:o}:{}))}},{key:"handleVersionCheckboxClick",value:function handleVersionCheckboxClick(e){var t=this,n=this.state.selectedVersions,o=n.indexOf(e),a=o>-1?n.slice(0,o).concat(n.slice(o+1,n.length)):n.concat(e);this.setState({selectedVersions:a},function(){t.handlePreview()})}},{key:"getVersionInfoForPreview",value:function getVersionInfoForPreview(){var e,t=this,n=this.state.collectionVersions.map(function(e){return-1!==t.state.selectedVersions.indexOf(e.value)&&e}),o=[],a=[];return n.forEach(function(e){e&&(a.push(e.value),o.push(e.label))}),e=a[0]||"",o=o.join(","),{versionTag:a=a.join(","),apiName:o,selectedVersionTag:e}}},{key:"updatePreviewWindow",value:function updatePreviewWindow(e){var t=this.getVersionInfoForPreview(),n=t.versionTag,o=t.apiName,a={versionTag:n,version:t.selectedVersionTag,apiName:o,"top-bar":s.a.get(this.state,"customColors.top-bar","").slice(1),"right-sidebar":s.a.get(this.state,"customColors.right-sidebar","").slice(1),highlight:s.a.get(this.state,"customColors.highlight","").slice(1),environment:s.a.get(this.state,"selectedEnvironmentTemplate.value"),documentationLayout:s.a.get(this.state,"defaultLayout")};!function transmitMessage(e,t,n){return e.postMessage(JSON.stringify(n),t)}(this.previewWindow,e,a)}},{key:"handlePreview",value:function handlePreview(e){var t=this,n=this.props.documentationConfig,o=[n.protocol,n.host].join("://"),a=this.state.previewHotReloadIsSupported;if(this.previewWindow&&!this.previewWindow.closed&&a)this.updatePreviewWindow(o);else if("userRequestedPreview"===e){var r=s.a.get(this.props,"collection.owner")+"-"+s.a.get(this.props,"collection.id"),i=s.a.get(this.state,"selectedEnvironmentTemplate.value"),l=s.a.get(this.state,"defaultLayout"),c=Object.keys(this.state.customColors).map(function(e){return Ie.a.stringify(PublishForm_defineProperty({},e,t.state.customColors[e].slice(1)))}).join("&"),u=this.getVersionInfoForPreview(),p={environment:i,versionTag:u.versionTag,apiName:u.apiName,version:u.selectedVersionTag,documentationLayout:l},d={};Object.keys(p).forEach(function(e){p[e]&&(d[e]=p[e])});var f=[Ie.a.stringify(d),c].join("&"),h=o.concat("/preview/".concat(r,"?").concat(f));m.a.recordEvent("documentationPublicPreview",{entityId:"".concat(s.a.get(this.props,"collection.owner"),"-").concat(s.a.get(this.props,"collection.id"))}),this.previewWindow=window.open(h,"Preview","height=".concat(window.innerHeight,",width=").concat(window.innerWidth))}}},{key:"handlePublisherSelect",value:function handlePublisherSelect(e){this.setState({selectedPublisher:s.a.get(e,"value")})}},{key:"handlePublishTypeChange",value:function handlePublishTypeChange(e){this.state.publishToNetwork?this.state.publishType!==e&&this.setState({publishType:e,selectedCategories:[],selectedPublisher:"network"===e?"team":"user"}):this.setState({publishToNetwork:!0,publishType:e})}},{key:"render",value:function render(){var e=this,t=this.state,n=t.selectedCustomDomain,r=t.customColors,i=t.defaultLayout,l=t.publishType,u=t.publishToNetwork,p=t.apiName,f=t.apiDescription,h=t.apiSummary,g=t.templateName,y=t.templateDescription,b=t.templateSummary,v=t.selectedVersions,_=t.previewHotReloadIsSupported,C=this.props,E=C.collection,w=C.environmentTemplates,O=C.publishing,P=C.customDomains,k=C.exploreConfig,S=C.teamInformation,T=C.userInformation,I=C.apiCategories,N=C.templateCategories,D=C.location,j=C.teamId,R=this.defaultCustomColors,A=_?"Opens a live preview of the documentation in another window, which reloads on any change.":"Get a preview of your documentation.",q=a.a.createElement(d.v,{className:"pm-link",extUrl:"".concat(k.protocol,"://").concat(k.host),target:"_blank"},k.host),M=s.a.get(E,"id"),x=s.a.get(E,"owner"),L=!0;return s.a.isEmpty(v)&&(L=!1),n&&null!==n.id&&null!==s.a.get(n,"upstream")&&M!==s.a.get(n,"publishData.collectionId")&&(L=!1),u&&"network"===l&&(L=Boolean(p&&f&&h&&s.a.size(p)<this.state.maxLengths.listingName&&s.a.size(h)<this.state.maxLengths.listingSummary)),u&&"template"===l&&(L=Boolean(g&&y&&b&&s.a.size(g)<this.state.maxLengths.listingName&&s.a.size(b)<this.state.maxLengths.listingSummary)),a.a.createElement(o.Fragment,null,a.a.createElement("div",{className:"collection-publish-sidebar"},a.a.createElement("h4",{className:"pm-h4 publish-collection-name",title:E.name},E.name),a.a.createElement(SidebarNavigation,{activeItem:D.hash||"#content",heading:"Publish collection",location:D,options:[{label:"Content",hash:"#content"},{label:"URL",hash:"#url"},{label:"Styling",hash:"#styling"},{label:"Collection Discovery",hash:"#collection-discovery"}]}),a.a.createElement("div",{className:"pm-sidebar-navigation__documentation-preview-button"},a.a.createElement(PreviewDocumentation,{content:A,onClick:function onClick(){e.handlePreview("userRequestedPreview")}}))),a.a.createElement("div",{className:"collection-publish"},a.a.createElement("div",{className:"push-double--top",id:"content"},a.a.createElement("h4",{className:"pm-h4"},"Content"),this.state.collectionVersions.length>0&&a.a.createElement(o.Fragment,null,a.a.createElement("label",{className:"collection-publish__label"},"Collection version"),a.a.createElement("div",{className:"collection-publish__two-col"},a.a.createElement(MultiCheckboxDropdown,{block:!0,options:this.state.collectionVersions,selected:this.state.selectedVersions,onCheckboxClick:this.handleVersionCheckboxClick}),a.a.createElement("p",{className:"collection-publish__description"},"Select one or more collection states to publish. Â ",a.a.createElement("a",{className:"pm-link",href:"https://go.pstmn.io/public-documentation-versioning",rel:"noopener noreferrer",target:"_blank"},"Learn more"),"Â  about version tags"))),a.a.createElement("label",{className:"collection-publish__label"},"Environment"),a.a.createElement("div",{className:"collection-publish__two-col"},a.a.createElement(c.SelectDropdown,{block:!0,label:"No Environment",options:w,searchable:!1,size:"md",value:s.a.get(this.state.selectedEnvironmentTemplate,"value"),onChange:this.handleEnvironmentTemplateChange}),a.a.createElement("p",{className:"collection-publish__description"},"This will publish your environment variables and values, making your collection easier to consume. Make sure there's no sensitive information in your variable values."))),a.a.createElement("div",{className:"push-double--top",id:"url"},a.a.createElement("h4",{className:"pm-h4"},"URL"),a.a.createElement("label",{className:"collection-publish__label"},"Custom domain"),a.a.createElement(CustomDomainSelector,{collection:E,customDomains:P,customDomainsOptionRenderer:this.customDomainsOptionRenderer,error:this.props.errorLoadingDomain,handleCustomDomainChange:this.handleCustomDomainChange,isForeverTrial:this.props.isForeverTrial,isFree:this.props.isFree,loading:this.props.domainLoading,selectedCustomDomain:this.state.selectedCustomDomain})),a.a.createElement("div",{className:"push-double--top",id:"styling"},a.a.createElement("h4",{className:"pm-h4"},"Styling"),a.a.createElement(CustomStyleSelector,{customColors:r,defaultLayout:i,publishedCustomColors:R,self:this,teamLogoUrl:S.logo,onColorChange:this.handleCustomColorChange.bind(this,r),onDefaultLayoutChange:this.handleDefaultLayoutChange,onResetCustomColors:this.resetCustomColors})),a.a.createElement("div",{className:"collection-publish__two-col push-double--bottom push-double--top",id:"collection-discovery"},a.a.createElement("h4",{className:"pm-h4"},"Collection discovery"),a.a.createElement("span",null,"Expand your outreach by letting users discover this collection in ",q),a.a.createElement(c.Switch,{checked:u,className:"collection-publish__switch",label:u?"Enabled":"Disabled",size:"sm",onChange:this.togglePublishToNetwork})),a.a.createElement(PublishSwitcher,{isPublishedToNetwork:E.publishedToNetwork,publishToNetwork:this.state.publishToNetwork,publishType:l,teamId:j,onChange:this.handlePublishTypeChange}),this.state.publishToNetwork&&a.a.createElement(PublishNetworkSection,{apiCategories:I,apiDescription:f,apiName:p,apiSummary:h,isPublishedToNetwork:E.publishedToNetwork,maxLengths:this.state.maxLengths,maxSelectableCategories:3,publishToNetwork:u,publishType:this.state.publishType,selectedCategories:this.state.selectedCategories,selectedPublisher:this.state.selectedPublisher,teamId:j,teamInformation:S,templateCategories:N,templateDescription:y,templateName:g,templateSummary:b,userId:this.props.userId,userInformation:T,onApiDescriptionChange:this.handleApiDescriptionChange,onApiNameChange:this.handleApiNameChange,onApiSummaryChange:this.handleApiSummaryChange,onCategorySelect:this.handleCategorySelect,onPublisherSelect:this.handlePublisherSelect,onTemplateDescriptionChange:this.handleDescriptionChange,onTemplateNameChange:this.handleTemplateNameChange,onTemplateSummaryChange:this.handleTemplateSummaryChange}),a.a.createElement("hr",{className:"push-double--top"}),a.a.createElement("div",{className:"collection-publish__two-col"},a.a.createElement(c.FormActions,{cancelButtonClass:"pm-modal-transfer__cancel",cancelText:"Cancel",className:"collection-publish__actions",confirmButtonClass:"pm-modal-transfer__confirm",confirmDisabled:!L,confirming:O,confirmText:E.published?"Save and republish collection":"Publish Collection",size:"md",onCancel:function onCancel(){E.published?e.props.onEdit(!1,!1):m.s.goToRoute("/collections/".concat(x,"-").concat(E.id))},onConfirm:this.onPublish}),a.a.createElement("p",{className:"collection-publish__description"},"Completing this step will make your collection available at a public URL."))))}}]),PublishForm}();function AddCollectionDiscovery(e){var t=a.a.createElement(c.Button,{className:"collection-published__add-network",pmStyle:"primary",size:"md",onClick:function onClick(){e.onEdit(!0,!0)}},"Allow collection discovery");return a.a.createElement(d.x,{action:t,body:"Add this collection to the API Network or Postman Templates to share it with millions of developers who use Postman",imageSrc:"".concat("https://static.postman.co/img","/team.svg")})}function PublishedActions(e){return a.a.createElement("div",{className:"collection-published__actions pm-col-md-6"},a.a.createElement(c.Button,{className:"edit-btn",pmStyle:"secondary",size:"md",onClick:function handleEdit(){m.a.recordEvent("documentationEditPublished",{entityId:"".concat(e.ownerId,"-").concat(e.collectionId)}),e.onEdit(!0,e.addToAPINetwork)}},"Edit settings"),a.a.createElement(c.Button,{block:!0,className:"unpublish-btn",disabled:e.unpublishing,pmStyle:"error",size:"md",onClick:function onClick(){e.onUnpublish()}},e.unpublishing?a.a.createElement(c.Loader,null):"Unpublish"))}function AddToAPINetwork(e){return a.a.createElement("div",{className:"collection-published__bordered collection-published__bordered--empty-state"},a.a.createElement(AddCollectionDiscovery,{onEdit:e.onEdit}))}function PublishedBy(e){var t=e.id,n=e.logo,o=e.publicProfile,i=e.name,l="user"===e.type,s=a.a.createElement(r.c,{className:"pm-link collection-publish-entity-preview__link",target:"_blank",title:o,to:o},o),u=a.a.createElement(r.c,{className:"pm-link",to:l?"/settings/me/public":"/settings/team/public"},l?"User Settings":"Team Settings"),d=l?a.a.createElement(c.UserIcon,{className:p()("collection-published-entity-preview__image--user","collection-published-entity-preview__image"),size:"sm",url:n,userId:t}):a.a.createElement("img",{className:"collection-published-entity-preview__image",src:n});return a.a.createElement("div",{className:"collection-publish__two-col"},a.a.createElement("div",{className:"collection-published-entity-preview"},d&&d,a.a.createElement("h2",{className:"collection-published-entity-preview__name"},i)),a.a.createElement("p",{className:"collection-publish__description"},"Your public profile is at ",a.a.createElement("br",null),s,"Customize the profile from ",u))}function AddedToAPINetwork(e){var t=e.networkName,n=e.networkSummary,i=e.selectedCategories,l=e.apiNetworkStatus,s=e.publishType,u=e.publishedBy,p=e.listingPublicURL,d=i.map(function(e,t){return a.a.createElement(c.Badge,{className:"collection-published__category",key:t},e.name)}),m=p&&a.a.createElement(r.c,{className:"pm-link",target:"_blank",to:e.listingPublicURL},e.listingPublicURL),f="template"===s?"Postman Templates":"API Network";return a.a.createElement(o.Fragment,null,a.a.createElement("h4",{className:"pm-h4"},f),a.a.createElement("div",{className:"collection-publish__two-col"},a.a.createElement("div",{className:"collection-published__bordered"},a.a.createElement("div",{className:"collection-published__network-info"},a.a.createElement(c.Icon,{name:"collection",size:"sm"}),a.a.createElement("span",{title:t},t)),a.a.createElement("p",{className:"collection-published__network-summary"},n),a.a.createElement("div",{className:"collection-published__category-listing"},d)),a.a.createElement("p",{className:"collection-published__edit-info"},"To make changes to the listing, edit your published collection and republish it."),a.a.createElement("p",{className:"collection-published__publish-status"},"unverified"===l&&a.a.createElement(o.Fragment,null,a.a.createElement(c.Badge,{className:"publish-status--in-review"},"In Review"),a.a.createElement("span",{className:"publish-status-description"},"Your listing is being reviewed")),("published"===l||"updated"===l)&&a.a.createElement(o.Fragment,null,a.a.createElement(c.Badge,{className:"publish-status--published"},"Published"),m&&a.a.createElement("span",{className:"publish-status-description"},"Your listing is published at ",a.a.createElement("br",null),m)),"rejected"===l&&a.a.createElement(o.Fragment,null,a.a.createElement(c.Badge,{className:"publish-status--not-published"},"Not Published"),a.a.createElement("span",{className:"publish-status-description"},"Your listing could not be published")),"archived"===l&&a.a.createElement(o.Fragment,null,a.a.createElement(c.Badge,{className:"publish-status--deleted"},"Deleted")))),u.isPublic&&a.a.createElement(o.Fragment,null,a.a.createElement("h4",{className:"pm-h4"},"Publisher profile"),a.a.createElement(PublishedBy,{id:u.id,logo:u.profileURL,name:u.publicName,publicProfile:u.publicURL,type:u.type})))}function PublishedToNetworkSection(e){var t=e.collection,n=e.selectedCategories,o=e.publishedToNetwork,r=e.publishType,i=e.apiNetworkStatus,l=e.loading,s="template"===r?t.templateName:t.apiName,u="template"===r?t.templateSummary:t.apiSummary,p=t.publishedBy;return a.a.createElement("div",{className:"collection-published__segment"},a.a.createElement("h2",{className:"pm-h2"},"Collection discovery",o&&a.a.createElement("div",{className:"pull-right"},a.a.createElement(c.Button,{className:"push-half--left",icon:"edit",pmStyle:"secondary",onClick:function onClick(){e.onEdit(!0,!0)}}),a.a.createElement(c.Button,{className:"push-half--left",disabled:e.loading,icon:"delete",pmStyle:"secondary",onClick:function onClick(){e.onAPINetworkUnpublish(r)}}))),!o&&a.a.createElement(AddToAPINetwork,{isFree:e.isFree,loading:l,onEdit:e.onEdit}),o&&a.a.createElement(AddedToAPINetwork,{apiNetworkStatus:i,listingPublicURL:e.listingPublicURL,loading:l,networkName:s,networkSummary:u,publishedBy:p,publishType:r,selectedCategories:n,onEdit:e.onEdit}))}function PublishedToDocSection(e){var t=s.a.get(e,"collection.publishedVersions",[]).map(function(t){var n=e.availableCollectionVersions&&e.availableCollectionVersions.find(function(e){return e.id===t.versionTagId});return s.a.get(n,"apiVersion.name")});return a.a.createElement("div",null,a.a.createElement("div",{className:"collection-published__segment"},a.a.createElement("h3",{className:"pm-h3"},"Content"),a.a.createElement("p",{className:"collection-published__name"},e.collection.name,"Â ",a.a.createElement("span",{className:"collection-published__name__version"},"Versions: ",t.join(", "))," ",a.a.createElement("br",null),a.a.createElement("br",null),e.template&&e.template.label||"No Environment"),a.a.createElement("h3",{className:"pm-h3"},"URL"),a.a.createElement("div",{className:"collection-published__public-url"},a.a.createElement("p",{"data-url":e.publishedUrl,onClick:function handleClick(t){m.a.recordEvent("documentationPublicViewAfterPublished",{entityId:"".concat(s.a.get(e,"collection.owner"),"-").concat(s.a.get(e,"collection.id"))}),m.s.goToNewWindow(t.currentTarget.dataset.url)}},e.publishedUrl)),a.a.createElement("h3",{className:"pm-h3"},"Styling"),a.a.createElement(PublishViewPreview,{defaultLayout:e.defaultLayout,highlightColor:e.customColors.highlight,sidebarColor:e.customColors["right-sidebar"],teamLogoUrl:e.teamLogoUrl,topBarColor:e.customColors["top-bar"]})))}function PublishedForm(e){var t=e.addToAPINetwork,n=e.collection,o=e.template,r=e.unpublishing,i=e.publishedUrl,l=e.publishedToNetwork,u=e.selectedCategories,p=e.publishType,d=e.availableCollectionVersions,m=s.a.get(n,"customColor")||{"top-bar":"#ffffff","right-sidebar":"#303030",highlight:"#ef5b25"},f=s.a.get(n,"documentationLayout")||"classic-double-column",h=s.a.get(e,"teamInformation.logo");return a.a.createElement("div",{className:"collection-published"},a.a.createElement("div",{className:"collection-published__header pm-row"},a.a.createElement("h1",{className:"pm-h1 pm-col-md-6"},"Collection is published",a.a.createElement(c.Icon,{className:"collection-published__success-icon",name:"success",pmStyle:"white",size:"sm"})),a.a.createElement(PublishedActions,{addToAPINetwork:t,collectionId:n.id,ownerId:n.owner,unpublishing:e.unpublishing,onEdit:e.onEdit,onUnpublish:e.onUnpublish})),a.a.createElement("hr",{className:"push-half--top"}),a.a.createElement(PublishedToDocSection,{availableCollectionVersions:d,collection:n,customColors:m,defaultLayout:f,ownerId:n.owner,publishedUrl:i,teamLogoUrl:h,template:o,unpublishing:r,onEdit:e.onEdit,onUnpublish:e.onUnpublish}),a.a.createElement(PublishedToNetworkSection,{apiNetworkStatus:e.apiNetworkStatus,collection:n,isFree:e.isFree,listingPublicURL:e.listingPublicURL,loading:e.publishingToNetwork||r,publishedToNetwork:l,publishType:p,selectedCategories:u,onAPINetworkUnpublish:e.onAPINetworkUnpublish,onEdit:e.onEdit}))}function CollectionPublish_typeof(e){return(CollectionPublish_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function CollectionPublish_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function CollectionPublish_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function CollectionPublish_extends(){return(CollectionPublish_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function CollectionPublish_defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function CollectionPublish_getPrototypeOf(e){return(CollectionPublish_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function CollectionPublish_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function CollectionPublish_setPrototypeOf(e,t){return(CollectionPublish_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var Ae=function(e){function CollectionPublish(e){var t;return function CollectionPublish_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,CollectionPublish),(t=function CollectionPublish_possibleConstructorReturn(e,t){return!t||"object"!==CollectionPublish_typeof(t)&&"function"!=typeof t?CollectionPublish_assertThisInitialized(e):t}(this,CollectionPublish_getPrototypeOf(CollectionPublish).call(this,e))).onUnpublish=t.onUnpublish.bind(CollectionPublish_assertThisInitialized(t)),t.onAPINetworkUnpublish=t.onAPINetworkUnpublish.bind(CollectionPublish_assertThisInitialized(t)),t.showErrorToasts=t.showErrorToasts.bind(CollectionPublish_assertThisInitialized(t)),t}return function CollectionPublish_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&CollectionPublish_setPrototypeOf(e,t)}(CollectionPublish,o["Component"]),function CollectionPublish_createClass(e,t,n){return t&&CollectionPublish_defineProperties(e.prototype,t),n&&CollectionPublish_defineProperties(e,n),e}(CollectionPublish,[{key:"componentDidMount",value:function componentDidMount(){var e=this.props,t=e.collection,n=e.userId,o=e.teamId;document.title=t&&t.published?"Edit Published Collection":"Publish Collection",window.pm.actions.getCollectionVersions({collectionId:this.props.params.id}),window.pm.actions.getCollectionMeta({collectionId:this.props.params.id}),window.pm.actions.getApiNetworkCategories(),window.pm.actions.getPublicCollectionInfo({collectionUid:this.props.params.id}),window.pm.actions.getWorkspaceEnvironments({workspaceId:this.props.activeWorkspace}),window.pm.actions.getTemplateCategories(),window.pm.actions.getUserPublicProfile({userId:n}),o&&window.pm.actions.getTeamPublicProfile({teamId:o}),t.publishedToNetwork||window.pm.actions.getCollectionQuality({collectionId:this.props.params.id}),this.props.isFree||window.pm.actions.getDomains()}},{key:"componentDidUpdate",value:function componentDidUpdate(e){this.props.errorLoadingDocumentation||this.props.loading||!e.loading||this.showErrorToasts()}},{key:"UNSAFE_componentWillReceiveProps",value:function UNSAFE_componentWillReceiveProps(e){var t=e.collection,n=s.a.get(this.props,"collection.published");t&&t.published!==n&&(document.title=t.published?"Edit Published Collection":"Publish Collection")}},{key:"onAPINetworkUnpublish",value:function onAPINetworkUnpublish(e){var t=this.props.collection,n="network"===e?"Are you sure you want to remove this collection from the API Network?\n      This collection would still be available through the published documentation but not\n      discoverable through the API Network":"Are you sure you want to remove this collection from Postman Templates? This collection\n      would still be available through the published documentation but not discoverable through Postman Templates.",o="network"===e?"Unpublish collection from the API Network":"Remove from Postman Templates";window.pm.actions.showModal({type:"confirm",title:o,actionType:"error",confirmLabel:"network"===e?"Yes":"Remove from Postman Templates",body:n,onConfirm:function onConfirm(){"network"===e?window.pm.actions.unpublishFromNetwork({collection:t}):window.pm.actions.removeTemplate({collection:t}),window.pm.actions.hideModal()}})}},{key:"onUnpublish",value:function onUnpublish(){var e=this.props,t=e.collection,n=e.customDomains,o=e.documentationConfig,a=t.owner,r=t.publishedToNetwork,i=t.publishType,l="".concat("network"===i?" and will be removed from the API Network.":" and corresponding template will be removed."),c=s.a.find(n,function(e){return e.id===t.customDomainId}),u=Object(f.g)(t,c,o);window.pm.actions.showModal({type:"confirm",title:"Unpublish collection",actionType:"error",confirmLabel:"Unpublish",body:"Are you sure you want to unpublish this collection? This collection would\n      no longer be available at the public URL".concat(r?"".concat(l):"."),onConfirm:function onConfirm(){window.pm.actions.unpublishCollection({collection:t,ownerId:a,publishType:i,url:u}),window.pm.actions.hideModal()}})}},{key:"onEdit",value:function onEdit(e,t){window.pm.actions.editPublishedCollection({editing:e,addToAPINetwork:t})}},{key:"showErrorToasts",value:function showErrorToasts(){this.props.errorLoadingPublicInfo&&window.pm.actions.showToast({type:"error",title:"Something went wrong",body:"We couldnâ€™t load the publication status for this documentation. Try refreshing the page."})}},{key:"render",value:function render(){var e=this.props,t=e.collection,n=e.customDomains,o=e.documentationConfig,r=e.userInformation,i=e.teamInformation,l=t.publishedToNetwork,u=t.publishType,p=s.a.find(n,function(e){return e.id===t.customDomainId}),m=s.a.find(this.props.environmentTemplates,{value:t.environmentTemplateId}),h=Object(f.g)(t,p,o),g={name:this.props.userPublicName||r.name,logo:this.props.userPublicProfilePicture||r.logo,description:this.props.userPublicDescription,templateCount:this.props.userTemplateCount,importCount:this.props.userImportCount},y={name:this.props.teamPublicName||i.name,logo:this.props.teamPublicProfilePicture||i.logo,description:this.props.teamPublicDescription,apiCount:this.props.teamAPICount,importCount:this.props.teamImportCount};return this.props.loading?a.a.createElement(c.Loader,{className:"pm-page-center",pmStyle:"secondary",size:"xl"}):a.a.createElement(d.t,{name:t.published&&!this.props.editing?"published":"publish"},(!t.published||this.props.editing)&&a.a.createElement(Re,CollectionPublish_extends({},s.a.pick(this.props,["apiCategories","templateCategories","collection","customDomains","exploreConfig","environmentTemplates","addToAPINetwork","selectedCategories","documentationConfig","isFree","isForeverTrial","activeWorkspace","availableCollectionVersions","location","domainLoading","errorLoadingDomain","teamId","userId"]),{publishedToNetwork:l,publishing:this.props.publishingCollection||this.props.publishingToNetwork,publishType:u,teamInformation:y,userInformation:g,onEdit:this.onEdit})),t.published&&!this.props.editing&&a.a.createElement(PublishedForm,{addToAPINetwork:this.props.addToAPINetwork,apiNetworkStatus:this.props.apiNetworkStatus,availableCollectionVersions:this.props.availableCollectionVersions,collection:this.props.collection,isFree:this.props.isFree,listingPublicURL:this.props.listingPublicURL,publishedToNetwork:l,publishedUrl:h,publishingToNetwork:this.props.publishingToNetwork,publishType:u,selectedCategories:this.props.selectedCategories,teamInformation:i,template:m,unpublishing:this.props.publishingCollection,userInformation:g,onAPINetworkUnpublish:this.onAPINetworkUnpublish,onEdit:this.onEdit,onUnpublish:this.onUnpublish}))}}]),CollectionPublish}();var qe=Object(i.b)(function CollectionPublish_mapStateToProps(e,t){var n=e.shared.workspaces||{},o=e.workspace.environments||{},a=e.settings,r=n.active,i=s.a.get(n,["byId",r]),l=s.a.get(i,"dependencies.environments")||[],c=Object(f.c)(t.params.id),u=s.a.get(e,"collection.meta")||{},p=s.a.get(e,"shared.userData.identity")||{},d=s.a.get(e,"collection.versions")||{},h=l.reduce(function(e,t){var n=o.byId[t];return n&&e.push({value:n.id,label:n.name,ownerId:n.owner}),e},[]),g=Array.isArray(u.allApiCategories)?u.allApiCategories.filter(function(e){return e.approved}):[],y=Array.isArray(u.templateCategories)?u.templateCategories.filter(function(e){return e.approved}):[];return{activeWorkspace:r,collection:function CollectionPublish_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?CollectionPublish_ownKeys(Object(n),!0).forEach(function(t){CollectionPublish_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CollectionPublish_ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({id:c,owner:s.a.get(u,"owner.id")},s.a.pick(u,["name","description","templateName","templateDescription","templateSummary","published","environmentTemplateId","apiName","apiDescription","apiSummary","customDomainId","customColor","documentationLayout","publishedId","publishedToNetwork","publishType","apiNetworkId","templateId","publishedVersions","publishedBy"])),loadingStatus:u.loading||u.loadingPublicInfo||o.loading||s.a.get(e,"settings.domains.loading"),publishingCollection:u.publishing||u.unpublishing,publishingToNetwork:u.publishingToNetwork||u.unpublishingFromNetwork,customDomains:[{fqdn:null,id:null}].concat(Object.values(s.a.get(e,"settings.domains.byId")||{})),documentationConfig:s.a.get(e,"shared.userData.config.postmanServices.doc"),exploreConfig:s.a.get(e,"shared.userData.config.postmanServices.apiNetwork",{}),environmentTemplates:[{value:"",label:"No Environment",ownerId:""}].concat(h),errorLoadingPublicInfo:s.a.get(e,"collection.meta.errorLoadingPublicInfo"),loading:u.loading||u.loadingPublicInfo||o.loading||u.loadingCategories||u.loadingTemplateCategories||d.loading||u.loadingCollectionQuality,domainLoading:s.a.get(e,"settings.domains.loading"),errorLoadingDomain:s.a.get(e,"settings.domains.error"),teamId:p.team,availableCollectionVersions:d.data,userId:p.user,editing:u.editing,addToAPINetwork:u.addToAPINetwork,apiNetworkStatus:u.apiNetworkStatus,apiNetworkId:u.apiNetworkId,templateId:u.templateId,teamInformation:s.a.get(e,"shared.team.information"),userInformation:s.a.get(e,"shared.userData.user"),isFree:m.o.isFree(s.a.get(e,"shared.userData.account.planName")),isForeverTrial:m.o.isForeverTrial(s.a.get(e,"shared.userData.account.planName")),selectedCategories:u.selectedCategories,apiCategories:g,templateCategories:y,listingPublicURL:u.listingPublicURL,userPublicName:s.a.get(a,"userPublicProfile.publicName"),userPublicDescription:s.a.get(a,"userPublicProfile.description"),userPublicProfilePicture:s.a.get(a,"userPublicProfile.publicProfilePicture"),userImportCount:s.a.get(a,"userPublicProfile.importCount"),userTemplateCount:s.a.get(a,"userPublicProfile.templateCount"),teamPublicName:s.a.get(a,"team.publicName"),teamPublicDescription:s.a.get(a,"team.publicDescription"),teamPublicProfilePicture:s.a.get(a,"team.publicProfilePicture"),teamImportCount:s.a.get(a,"team.importCount"),teamAPICount:s.a.get(a,"team.apiCount")}})(Ae),Me=n("NTYG");function MockDocs(e){return a.a.createElement("a",{className:"pm-link",href:"https://www.getpostman.com/docs/postman/mock_servers/setting_up_mock",rel:"noopener noreferrer",target:"_blank"},e.children)}function MockDescription(){return a.a.createElement("div",null,"Create a ",a.a.createElement(MockDocs,null,"mock server")," to simulate each endpoint and its corresponding environment in a Postman Collection, before sending the actual request.")}function CreateMock(e){var t=e.workspace,n=void 0===t?{}:t,o=e.collection;return a.a.createElement(c.Button,{size:"md",onClick:function onClick(){m.a.recordEvent("mockInitiateCreate",{label:"collection_mocks_listing_empty_state"}),e.isMember?m.s.goToRoute("/mocks/create?collection=".concat(o,"&origin=collection_mocks_listing_empty_state")):window.pm.actions.showModal({children:a.a.createElement(Me.a,{successPath:"/mocks/create?collection=".concat(o),workspace:n}),overlayClickHide:!1})}},"Create a mock server on this collection")}function NoMocks(e){return a.a.createElement(d.x,{action:a.a.createElement(CreateMock,e),body:a.a.createElement(MockDescription,null),className:"collection-mocks__empty",imageSrc:"".concat("https://static.postman.co/img","/mock.svg"),title:"There are no mocks for this collection in this workspace"})}var xe=n("OQZp");function CollectionMocks_typeof(e){return(CollectionMocks_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function CollectionMocks_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function CollectionMocks_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function CollectionMocks_extends(){return(CollectionMocks_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function CollectionMocks_defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function CollectionMocks_possibleConstructorReturn(e,t){return!t||"object"!==CollectionMocks_typeof(t)&&"function"!=typeof t?function CollectionMocks_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function CollectionMocks_getPrototypeOf(e){return(CollectionMocks_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function CollectionMocks_setPrototypeOf(e,t){return(CollectionMocks_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var Le=function(e){function CollectionMocks(){return function CollectionMocks_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,CollectionMocks),CollectionMocks_possibleConstructorReturn(this,CollectionMocks_getPrototypeOf(CollectionMocks).apply(this,arguments))}return function CollectionMocks_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&CollectionMocks_setPrototypeOf(e,t)}(CollectionMocks,o["Component"]),function CollectionMocks_createClass(e,t,n){return t&&CollectionMocks_defineProperties(e.prototype,t),n&&CollectionMocks_defineProperties(e,n),e}(CollectionMocks,[{key:"componentDidMount",value:function componentDidMount(){window.pm.actions.getMocks({collectionId:this.props.params.id,userId:this.props.userId,teamId:this.props.teamId,workspaceId:this.props.workspaceId,populate:!0})}},{key:"componentDidUpdate",value:function componentDidUpdate(e){e.collectionName!==this.props.collectionName&&(document.title=this.props.collectionName?this.props.collectionName+" - Mocks":"Collection - Mocks")}},{key:"render",value:function render(){var e=this.props.mocks;return this.props.loading?a.a.createElement(c.Loader,{className:"pm-page-center",pmStyle:"secondary",size:"xl"}):this.props.error?a.a.createElement(d.C,{description:this.props.error.message||"There was an error while fetching mocks for\n        this collection. Please try again after some time.",statusCode:this.props.error.statusCode}):Array.isArray(e)&&e.length?a.a.createElement(d.t,{className:"collection-mocks"},a.a.createElement(d.G,{className:"collection-mocks__table",columns:["name","versionTag","environment","title","actions"],deleting:this.props.deleting,mocks:e,origin:"collection_mocks_listing",teamMembers:this.props.teamMembers,userId:this.props.userId})):a.a.createElement(NoMocks,CollectionMocks_extends({},s.a.pick(this.props,["workspace","isMember"]),{collection:this.props.params.id}))}}]),CollectionMocks}();var Fe=Object(i.b)(function CollectionMocks_mapStateToProps(e,t){var n=s.a.get(e,"shared.mocks")||{},o=s.a.get(e,"shared.workspaces.active"),a=e.shared.workspaces||{},r=s.a.get(a,["byId",o])||{},i=s.a.get(e,["shared","workspaces","byId",o,"dependencies","mocks"])||[],l=s.a.get(e,"shared.userData.identity.user");return{workspaceId:o,workspace:r,loading:n.loading||s.a.get(e,"collection.meta.loading"),deleting:n.deleting,error:n.error,mocks:n.ids.reduce(function(o,a){return i.indexOf(a)>-1&&o.push(function CollectionMocks_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?CollectionMocks_ownKeys(Object(n),!0).forEach(function(t){CollectionMocks_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CollectionMocks_ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},n.byId[a],{permissions:s.a.get(e,["shared","permissions","collection",t.params.id]),collectionOwner:s.a.get(e,"collection.meta.owner.id"),environmentName:s.a.get(n,["byId",a,"environment","name"]),environmentId:s.a.get(n,["byId",a,"environment","id"])})),o},[]),permissions:s.a.get(e,"collection.meta.permissions"),ownerId:s.a.get(e,"collection.meta.owner.id"),userId:l,teamId:s.a.get(e,"shared.userData.identity.team"),teamMembers:s.a.get(e,"shared.team.users"),collectionName:s.a.get(e,"collection.meta.name"),isMember:Object(xe.e)(r,l)}})(Le);function MonitorDocs(e){return a.a.createElement("a",{className:"pm-link",href:"https://www.getpostman.com/docs/postman/monitors/intro_monitors",rel:"noopener noreferrer",target:"_blank"},e.children)}function MonitorDescription(){return a.a.createElement("span",null,"Monitor your APIs for performance and response. ",a.a.createElement(MonitorDocs,null,"Postman monitors")," can be used to schedule automated tests, based on your Postman collections.")}function CreateMonitor(e){var t=e.workspace,n=void 0===t?{}:t,o=e.collectionId;return a.a.createElement(c.Button,{size:"md",onClick:function onClick(){e.isMember?m.s.goToRoute("/monitors/create?workspace=".concat(n.id,"&collection=").concat(o)):window.pm.actions.showModal({children:a.a.createElement(Me.a,{successPath:"/monitors/create?workspace=".concat(n.id,"&collection=").concat(o),workspace:n}),overlayClickHide:!1})}},"Monitor this collection")}function NoMonitors(e){return a.a.createElement(d.x,{action:a.a.createElement(CreateMonitor,e),body:a.a.createElement(MonitorDescription,null),className:"workspace__empty",imageSrc:"".concat("https://static.postman.co/img","/monitor.svg"),title:"There are no monitors for this collection in this workspace"})}function AddMonitor(e){var t=e.workspace,n=e.collectionId,o=e.isMember;return a.a.createElement(c.Button,{className:"primary monitor-list-actions__create",size:"sm",onClick:function onClick(){m.a.recordEvent("monitorInitiateCreate",{entityId:n,entityType:"collection",label:"collection_monitors_listing"}),o?m.s.goToRoute("/monitors/create?collection=".concat(n,"&workspace=").concat(t.id)):window.pm.actions.showModal({children:a.a.createElement(Me.a,{successPath:"/monitors/create?workspace=".concat(t.id,"&collection=").concat(n),workspace:t}),overlayClickHide:!1})}},"Add Monitor")}function CollectionMonitors_typeof(e){return(CollectionMonitors_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function CollectionMonitors_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function CollectionMonitors_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function CollectionMonitors_defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function CollectionMonitors_getPrototypeOf(e){return(CollectionMonitors_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function CollectionMonitors_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function CollectionMonitors_setPrototypeOf(e,t){return(CollectionMonitors_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var Ue=function(e){function CollectionMonitors(e){var t;return function CollectionMonitors_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,CollectionMonitors),(t=function CollectionMonitors_possibleConstructorReturn(e,t){return!t||"object"!==CollectionMonitors_typeof(t)&&"function"!=typeof t?CollectionMonitors_assertThisInitialized(e):t}(this,CollectionMonitors_getPrototypeOf(CollectionMonitors).call(this,e))).handleTimeframeChange=t.handleTimeframeChange.bind(CollectionMonitors_assertThisInitialized(t)),t}return function CollectionMonitors_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&CollectionMonitors_setPrototypeOf(e,t)}(CollectionMonitors,o["Component"]),function CollectionMonitors_createClass(e,t,n){return t&&CollectionMonitors_defineProperties(e.prototype,t),n&&CollectionMonitors_defineProperties(e,n),e}(CollectionMonitors,[{key:"componentDidMount",value:function componentDidMount(){var e=this.props.collectionMeta;document.title=e&&e.name?e.name+" - Monitors":"Collection - Monitors",window.pm.actions.getMonitorMetrics({timeframe:this.getTimeframe()}),window.pm.actions.getWorkspace({workspaceId:this.props.workspaceId})}},{key:"componentDidUpdate",value:function componentDidUpdate(e){var t=s.a.get(this.props,"collectionMeta.name");t!==s.a.get(e,"collectionMeta.name")&&(document.title=t?t+" - Monitors":"Collection - Monitors")}},{key:"UNSAFE_componentWillReceiveProps",value:function UNSAFE_componentWillReceiveProps(e){var t=this.getTimeframe(),n=e.location.query.timeframe,o=e.location.query.view,a=this.props.location.pathname;o&&!s.a.includes(m.f.MONITOR_VIEWS,o)&&m.s.goToRoute("".concat(a,"?view=").concat(m.f.DEFAULT_MONITOR_VIEW,"&timeframe=").concat(n)),n&&!s.a.includes(m.f.MONITOR_TIMEFRAMES,n)&&m.s.goToRoute("".concat(a,"?view=").concat(o,"&timeframe=").concat(m.f.DEFAULT_MONITOR_TIMEFRAME)),n&&n!==t&&window.pm.actions.getMonitorMetrics({timeframe:n})}},{key:"handleTimeframeChange",value:function handleTimeframeChange(e){var t=this.props.location.pathname;m.a.recordEvent("monitoringTimeframeChange",{entityId:this.props.params.id,entityType:"collection",label:"collection_monitors_listing_to_".concat(e.value)}),m.s.goToRoute("".concat(t,"?timeframe=").concat(e.value))}},{key:"getView",value:function getView(){return s.a.get(this.props.collectionMeta,"permissions.team.access")?"shared":"private"}},{key:"getTimeframe",value:function getTimeframe(){return this.props.location.query.timeframe||m.f.DEFAULT_MONITOR_TIMEFRAME}},{key:"render",value:function render(){var e=this.getView(),t=this.getTimeframe(),n=m.i.pathValueFilter("jobTemplate.collection.shared","shared"===e),o=this.props.monitors.filter(n),r=this.props.workspaceId;return this.props.loading?a.a.createElement(c.Loader,{className:"pm-page-center",pmStyle:"secondary",size:"xl"}):this.props.error?a.a.createElement(d.C,{description:this.props.error.message||"There was an error fetching monitors for this collection.\n        Please try again after some time.",statusCode:this.props.error.statusCode}):Array.isArray(o)&&o.length?(o.forEach(function(e){e.workspaceId=r}),a.a.createElement(d.t,{className:"collection-monitors"},a.a.createElement("div",{className:"monitor-list-actions"},a.a.createElement(d.J,{timeframe:t,onTimeframeChange:this.handleTimeframeChange}),a.a.createElement(AddMonitor,{collectionId:this.props.params.id,isMember:this.props.isMember,workspace:this.props.currentWorkspace})),a.a.createElement(d.K,{monitors:o,parentId:this.props.params.id,parentType:"collection"}))):a.a.createElement(d.t,{className:"collection-monitors"},a.a.createElement(NoMonitors,{collectionId:this.props.params.id,isMember:this.props.isMember,workspace:this.props.currentWorkspace}))}}]),CollectionMonitors}();var ze=Object(i.b)(function CollectionMonitors_mapStateToProps(e,t){var n=t.params.id,o=s.a.get(e,"shared.monitors.metrics")||[],a=s.a.get(e,"shared.workspaces.active"),r=s.a.get(e,["shared","workspaces","byId",a]),i=s.a.get(e,["shared","workspaces","byId",a,"dependencies","monitors"])||[],l=s.a.get(e,"shared.userData.identity.user"),c=s.a.get(e,["shared","permissions","collection",n]),u=o.reduce(function(e,t){return s.a.get(t,"jobTemplate.collection.id")===n&&i.indexOf(s.a.get(t,"jobTemplate.id"))>-1&&e.push(function CollectionMonitors_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?CollectionMonitors_ownKeys(Object(n),!0).forEach(function(t){CollectionMonitors_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CollectionMonitors_ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t,{permissions:c})),e},[]);return{loading:s.a.get(e,"shared.monitors.loadingMetrics")||s.a.get(e,"collection.meta.loading"),error:s.a.get(e,"shared.monitors.errorMetrics"),monitors:u,collectionMeta:s.a.get(e,"collection.meta"),workspaceId:a,isMember:Boolean(s.a.get(r,["members","users",l])),currentWorkspace:r}})(Ue);function parseDiffDescription(e){if(!e)return"";if("moved"===e.type)return"This ".concat(e.itemType," has been moved from it's original position");if("deleted"===e.type)return"This ".concat(e.itemType," has been deleted from collection");switch(e.property){case"name":return"Name changed to ".concat(e.source);case"order":return"Reordered requests in this ".concat(e.itemType);case"folders_order":return"Reordered folders in this ".concat(e.itemType);default:return"".concat({added:"Added",modified:"Changed",deleted:"Deleted"}[e.diffType]||""," ").concat(e.propertyName||"")}}function SidebarProp(e){var t=p()("collection-diff-nav__prop",{"collection-diff-nav__prop--conflict":e.conflict}),n=e.conflict?"collection-diff-nav__type--conflict":"collection-diff-nav__type--".concat(e.type),o=e.conflict?"C":(e.type||"m").charAt(0).toUpperCase();return a.a.createElement("a",{className:t,href:"#".concat(e.itemId)},a.a.createElement("span",{className:"collection-diff-nav__type ".concat(n)},o),a.a.createElement("span",{className:"collection-diff-nav__name",title:e.property},e.property),a.a.createElement("span",{className:"collection-diff-nav__diff",title:e.itemDiffDescription},e.itemDiffDescription))}function SidebarTitle(e){return a.a.createElement("a",{className:p()("collection-diff-nav__header",{"collection-diff-nav__header--selected":e.isSelected}),href:"#".concat(e.itemId)},a.a.createElement("span",{className:"collection-diff-nav__type collection-diff-nav__type--".concat(e.type)},"string"==typeof e.type?(e.type||"m").charAt(0).toUpperCase():"M"),a.a.createElement("span",{className:"collection-diff-nav__item-name",title:e.title},e.itemType,": ",e.title),a.a.createElement("span",{className:"float--right"},e.length||1))}function diff_Sidebar_Sidebar(e){var t=e.diff;return a.a.createElement("div",{className:"collection-diff-nav"},Object.keys(t).map(function(e,n){var o=s.a.get(t,[e,"isNestedDiff"]);return a.a.createElement("div",{className:"push--bottom",key:n},a.a.createElement(SidebarTitle,{itemId:e,itemType:s.a.get(t,[e,"itemType"]),length:s.a.get(t,[e,"diff","length"]),title:s.a.get(t,[e,"name"]),type:s.a.get(t,[e,"type"],"modified")}),t[e].diff.map(function(t,n){return s.a.isEmpty(t)?null:o&&s.a.get(t,"isSection")?a.a.createElement(SidebarProp,{itemDiffDescription:parseDiffDescription(t),itemId:e,key:n,property:t.name,type:t.type}):a.a.createElement(SidebarProp,{conflict:t.conflict,itemDiffDescription:parseDiffDescription(t),itemId:e,key:n,property:t.propertyName,type:t.diffType})}))}))}function TopbarActions(e){var t=e.canMergeCollection?e.hasConflicts?"Please resolve all the conflicts before merging the collection":"":"You don't have permissions to merge this collection",n=e.pullChanges?"Pull changes":"Merge all changes";return a.a.createElement("div",{className:"collection-diff-topbar__actions"},a.a.createElement(c.Button,{pmStyle:"secondary",size:"sm",onClick:function onClick(){m.s.goToRoute("/workspaces/".concat(e.activeWorkspace,"/collections"))}},"Cancel"),a.a.createElement(c.Tooltip,{align:"left",content:t,show:e.hasConflicts||!e.canMergeCollection},function(t){return a.a.createElement("div",{ref:t.triggerRef,onMouseOut:t.onMouseOut,onMouseOver:t.onMouseOver},a.a.createElement(c.Button,{disabled:e.merging||e.hasConflicts||!e.canMergeCollection,pmStyle:"primary",size:"sm",onClick:e.onMerge},e.loading?a.a.createElement(c.Loader,null):n))}))}function TopbarDescription(e){return a.a.createElement("div",{className:"collection-diff-topbar__description"},a.a.createElement(c.UserIcon,{className:"collection-diff-topbar__icon",size:"sm",url:e.profilePicUrl,userId:e.userId}),a.a.createElement("div",{className:"collection-diff-topbar__collection-name"},a.a.createElement(r.c,{className:"collection-conflict-source",title:"".concat(e.forkedCollection.name," [").concat(e.forkedCollection.label,"]"),to:"/collections/".concat(e.forkedCollection.id)},a.a.createElement("span",null,"SOURCE")," ",e.forkedCollection.name," [",e.forkedCollection.label,"]"),a.a.createElement("div",{className:"collection-diff-topbar__seperator"},a.a.createElement(c.Icon,{name:"forward",size:"sm"})),a.a.createElement(r.c,{className:"collection-conflict-dest",title:"".concat(e.baseCollection.name," [").concat(e.baseCollection.label,"]"),to:"/collections/".concat(e.baseCollection.id)},a.a.createElement("span",null,"DESTINATION")," ",e.baseCollection.name," [",e.baseCollection.label,"]")))}function Topbar_Topbar(e){return a.a.createElement("div",{className:"collection-diff-topbar"},a.a.createElement(TopbarDescription,{baseCollection:e.baseCollection,forkedCollection:e.forkedCollection,profilePicUrl:e.profilePicUrl,userId:e.userId,userName:e.userName}),a.a.createElement(TopbarActions,{activeWorkspace:e.activeWorkspace,canMergeCollection:e.canMergeCollection,hasConflicts:e.hasConflicts,merging:e.merging,pullChanges:e.pullChanges,onMerge:e.onMerge}))}function Body_slicedToArray(e,t){return function Body_arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function Body_iterableToArrayLimit(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],o=!0,a=!1,r=void 0;try{for(var i,l=e[Symbol.iterator]();!(o=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);o=!0);}catch(e){a=!0,r=e}finally{try{o||null==l.return||l.return()}finally{if(a)throw r}}return n}(e,t)||function Body_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function DiffItemLabel(e){return"request"===e.itemType?a.a.createElement(w.a,{className:"collection-diff-body__request-label",method:s.a.get(e.itemMeta,"method")||""}):a.a.createElement(c.Icon,{className:"push-half--right",name:"response"===e.itemType?"example":e.itemType,size:"sm"})}function DiffItemTitle(e){var t;return"added"===e.diffType?t="success":"deleted"===e.diffType?t="error":"conflict"===e.diffType?t="warning":"moved"===e.diffType&&(t="info"),a.a.createElement("h3",{className:"collection-diff-body__heading ".concat(e.className),id:e.itemId,onClick:e.onClick},a.a.createElement(DiffItemLabel,{itemMeta:e.itemMeta,itemType:e.itemType}),a.a.createElement("span",{className:"push-half--right",title:e.itemName},e.itemName),a.a.createElement(c.Badge,{pmStyle:t,size:"sm"},e.diffType),"moved"===e.diffType&&a.a.createElement(d.E,{align:"right",className:"push-half--left pm-collection-list-item__write",content:"This ".concat(e.itemType," has been moved to\n            ").concat(s.a.get(e,"to.model")," ").concat(s.a.get(e,"to.name")),name:"warning",size:"sm"}))}function DiffItemProperty(e){return a.a.createElement("div",{className:"collection-diff-body__title"},e.propertyName,e.conflict&&a.a.createElement(c.Badge,{className:"push-half--left",pmStyle:"warning",size:"sm"},"Conflict"))}function NestedDiffItemSection(e){return a.a.createElement("div",{className:"pm-conflict collection-diff-body__nested-section pm-conflict--".concat(e.conflictType)},a.a.createElement(Be,{diffItem:e.diff,disableConflictResolution:e.disableConflictResolution,itemId:e.itemId}),e.conflictType&&a.a.createElement(d.s,{disableConflictResolution:e.disableConflictResolution,type:e.conflictType,onResolveConflicts:function onResolveConflicts(){e.onResolveConflicts(e.conflictType)}}))}function DiffItemSection(e){var t=e.diff;return t&&"function"!=typeof t.getDiff?null:a.a.createElement("div",{className:"collection-diff-body__section",id:"".concat(t.itemId)},a.a.createElement(DiffItemProperty,{conflict:t.conflict,disableConflictResolution:e.disableConflictResolution,propertyName:t.propertyName}),"words"===t.type&&a.a.createElement(d.ib,{diff:t,disableConflictResolution:e.disableConflictResolution,updateConflictCount:e.updateConflictCount}),"code"===t.type&&a.a.createElement(d.k,{diff:t,disableConflictResolution:e.disableConflictResolution,updateConflictCount:e.updateConflictCount}),"table"===t.type&&a.a.createElement(d.bb,{diff:t,disableConflictResolution:e.disableConflictResolution,showDescriptionColumn:"variables"!==t.propertyName||"response headers"!==t.propertyName,showEnabledColumn:"variables"!==t.propertyName||"response headers"!==t.propertyName,updateConflictCount:e.updateConflictCount}),"sentences"===t.type&&a.a.createElement(d.W,{diff:t,disableConflictResolution:e.disableConflictResolution,updateConflictCount:e.updateConflictCount}))}function NestedDiff(e){var t=e.diffItem,n=Body_slicedToArray(Object(o.useState)(t.diff),2),r=n[0],i=n[1],l=(r||[]).map(function(n,o){if(s.a.get(n,"isSection"))return a.a.createElement(NestedDiffItemSection,{conflictType:n.conflictType,diff:n,disableConflictResolution:e.disableConflictResolution,itemId:t.itemId,key:o,onResolveConflicts:function onResolveConflicts(n){i(t.resolveConflicts(n)),e.updateConflictCount()}})});return a.a.createElement(a.a.Fragment,null,l)}var Be=Object(d.jb)(function(e){var t=e.itemId,n=e.diffItem,o=e.updateConflictCount,r=e.disableConflictResolution,i=e.expanded,l=e.toggleExpanded,s=e.enableComments,c=e.commentComponent,u=e.commentModelObject;if(!n)return null;var d=c,m=n.isNestedDiff,f=(n.diff||[]).length>0;return a.a.createElement("div",{className:"collection-diff-body__collapsible"},a.a.createElement(DiffItemTitle,{className:p()("collection-diff-body__toggle",{"is-visible":i&&f}),diffType:n.type,itemId:t,itemMeta:n.meta,itemName:n.name,itemType:n.itemType,to:n.to,onClick:l}),s&&a.a.createElement(d,{anchor:"".concat(n.itemType,"/").concat(t),commentClassName:"pull-request__diff-comments",commentType:"inline",containerClassName:"pull-request__diff-comments-container",model:"pullRequest",modelId:u.id}),i&&m&&a.a.createElement(NestedDiff,{diffItem:n,disableConflictResolution:r,updateConflictCount:o}),i&&!m&&(n.diff||[]).map(function(e,t){return a.a.createElement(DiffItemSection,{diff:e,disableConflictResolution:r,itemId:n.itemId,itemType:n.itemType,key:t,updateConflictCount:o})}))});function Body(e){var t=e.diff,n=void 0===t?{}:t;return a.a.createElement("div",{className:p()("collection-diff-body",e.className,{"collection-diff__nav-item":!e.centered})},Object.keys(n).map(function(t,o){return a.a.createElement(Be,{commentComponent:e.commentComponent,commentModelObject:e.commentModelObject,diffItem:n[t],disableConflictResolution:e.disableConflictResolution,enableComments:e.enableComments,itemId:t,key:o,updateConflictCount:e.updateConflictCount})}))}function MergeCollectionModal_typeof(e){return(MergeCollectionModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function MergeCollectionModal_defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function MergeCollectionModal_getPrototypeOf(e){return(MergeCollectionModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function MergeCollectionModal_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function MergeCollectionModal_setPrototypeOf(e,t){return(MergeCollectionModal_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var Ve=[{label:"Merge changes",name:"default",description:"The destination will be updated with the changes",allowed:!0},{label:"Merge changes and update source",name:"updateSourceWithDestination",description:"Both the source and destination will be updated",allowed:!0},{label:"Merge changes and delete source",name:"deleteSource",description:"The destination will be updated and the source will be deleted",allowed:!0}],$e=function(e){function MergeCollection(e){var t;return function MergeCollectionModal_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,MergeCollection),(t=function MergeCollectionModal_possibleConstructorReturn(e,t){return!t||"object"!==MergeCollectionModal_typeof(t)&&"function"!=typeof t?MergeCollectionModal_assertThisInitialized(e):t}(this,MergeCollectionModal_getPrototypeOf(MergeCollection).call(this,e))).state={selectedMergeStrategy:"default"},t.handleMergeStrategyChange=t.handleMergeStrategyChange.bind(MergeCollectionModal_assertThisInitialized(t)),t.handleConfirm=t.handleConfirm.bind(MergeCollectionModal_assertThisInitialized(t)),t}return function MergeCollectionModal_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&MergeCollectionModal_setPrototypeOf(e,t)}(MergeCollection,o["Component"]),function MergeCollectionModal_createClass(e,t,n){return t&&MergeCollectionModal_defineProperties(e.prototype,t),n&&MergeCollectionModal_defineProperties(e,n),e}(MergeCollection,[{key:"handleMergeStrategyChange",value:function handleMergeStrategyChange(e){this.setState({selectedMergeStrategy:e.target.value})}},{key:"handleConfirm",value:function handleConfirm(){var e="default"===this.state.selectedMergeStrategy?null:this.state.selectedMergeStrategy;this.props.onConfirm(e),"updateSourceWithDestination"===this.state.selectedMergeStrategy?m.a.recordEvent("initiateMergeChangeUpdate"):"deleteSource"===this.state.selectedMergeStrategy?m.a.recordEvent("initiateMergeChangeDelete"):m.a.recordEvent("initiateMergeChange")}},{key:"render",value:function render(){var e=this;return a.a.createElement(c.Card,{className:"collection-merge"},a.a.createElement("h3",{className:"pm-h3"},"Confirm merge"),a.a.createElement("p",{className:"collection-merge__name"},s.a.get(this.props,"entity.name")||"Collection"),a.a.createElement(c.Button,{className:"collection-merge__close",icon:"close-big",pmStyle:"alternate",size:"sm",onClick:this.props.hideModal}),a.a.createElement("hr",{className:"push--ends"}),a.a.createElement("label",{className:"collection-merge__label"},"Choose how you want to proceed",this.props.changes&&a.a.createElement("p",{className:"collection-merge__label-summary"},"You're merging ",this.props.changes,' changes into "',s.a.get(this.props,"entity.name"),'"')),(this.props.mergeStrategies||Ve).map(function(t,n){return a.a.createElement("div",{className:p()("collection-merge__option",{"collection-merge__option--active":e.state.selectedMergeStrategy===t.name}),key:n},a.a.createElement(c.Radio,{checked:e.state.selectedMergeStrategy===t.name&&t.allowed,className:"collection-merge__radio",disabled:!t.allowed,label:s.a.get(t,"label"),name:"merge-strategy",size:"md",value:t.name,onChange:e.handleMergeStrategyChange}),a.a.createElement("p",{className:"collection-merge__strategy-description"},s.a.get(t,"description")))}),a.a.createElement(c.FormActions,{cancelButtonClass:"collection-merge__cancel",cancelText:"Cancel",className:"collection-merge__actions",confirmDisabled:!this.state.selectedMergeStrategy,confirming:this.props.merging,confirmText:"Merge",size:"md",onCancel:this.props.hideModal,onConfirm:this.handleConfirm}))}}]),MergeCollection}();var We=Object(i.b)(function MergeCollectionModal_mapStateToProps(e){var t=s.a.get(e,"collection.diff",{});return{merging:s.a.get(t,"merging")}},s.a.pick(ae.b,["hideModal"]))($e);function CollectionDiff_typeof(e){return(CollectionDiff_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function CollectionDiff_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function CollectionDiff_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?CollectionDiff_ownKeys(Object(n),!0).forEach(function(t){CollectionDiff_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CollectionDiff_ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function CollectionDiff_defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function CollectionDiff_getPrototypeOf(e){return(CollectionDiff_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function CollectionDiff_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function CollectionDiff_setPrototypeOf(e,t){return(CollectionDiff_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function CollectionDiff_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function resolveEventsConflicts(e,t,n,o){Array.isArray(s.a.get(e,[t.itemType,"update",n,"events","to"]))||s.a.set(e,[t.itemType,"update",n,"events","to"],[]);var a="prerequest"===o?"preRequestScript":"tests",r=t.getResolvedConflict()||"";e[t.itemType].update[n].events.to.push({listen:o,script:{id:t.scriptId,exec:r.split("\n"),type:t.scriptType}}),"request"===t.itemType&&s.a.set(e,[t.itemType,"update",n,a,"to"],r)}function resolveGraphqlBodyConflicts(e,t,n,o){var a=t.getResolvedConflict()||[];s.a.set(e,[t.itemType,"update",n,"graphqlModeData",o,"to"],a)}function findResolvedConflicts(e){var t={};return Object.keys(e).forEach(function(n){var o=e[n];o.diff.forEach(function(e){e.conflict&&("headerData"===e.property?function resolveHeaderConflicts(e,t,n){var o=t.getResolvedConflict()||[],a=o.map(function(e){return e?"".concat(e.key,": ").concat(e.value):""}).join("\n");s.a.set(e,[t.itemType,"update",n,"headers","to"],a),s.a.set(e,[t.itemType,"update",n,t.property,"to"],o)}(t,e,n):"prerequest"===e.property?resolveEventsConflicts(t,e,n,"prerequest"):"test"===e.property?resolveEventsConflicts(t,e,n,"test"):"auth"===e.property?function resolveAuthConflicts(e,t,n){var o=t.getResolvedConflict()||"",a=(t.base||"").split("\n"),r=s.a.get(s.a.get(a,"0","").split(":"),"1","").trim(),i=o.split("\n"),l=s.a.get(s.a.get(i,"0","").split(":"),"1","").trim(),c=i.slice(1).map(function(e){var t=e.split(":");return{key:(s.a.get(t,"0")||"").trim(),value:(s.a.get(t,"1")||"").trim(),type:"string"}});s.a.set(e,[t.itemType,"update",n,t.property,"to"],CollectionDiff_defineProperty({type:l},l,c)),r!==l&&s.a.set(e,[t.itemType,"update",n,"currentHelper","to"],l),s.a.set(e,[t.itemType,"update",n,"helperAttributes","to"],o)}(t,e,n):"pathVariableData"===e.property?function resolvePathVariablesConflicts(e,t,n){var o=t.getResolvedConflict()||[],a=o.reduce(function(e,t){return t?(e[t.key]=t.value,e):e},{});s.a.set(e,[t.itemType,"update",n,"pathVariables","to"],a),s.a.set(e,[t.itemType,"update",n,t.property,"to"],o)}(t,e,n):"responseCode"===e.property?function resolveStatusCodeConflicts(e,t,n){var o,a,r=t.getResolvedConflict()||"",i=r.split(" ");i.length>0?isNaN(parseInt(i[0]))?(o=parseInt(i[0]),a=i.slice(1).join(" ")):a=r:a="",s.a.set(e,[t.itemType,"update",n,t.property,"to"],{code:o,name:a})}(t,e,n):"graphql_query"===e.property?resolveGraphqlBodyConflicts(t,e,n,"query"):"graphql_variables"===e.property?resolveGraphqlBodyConflicts(t,e,n,"variables"):"dataOptions"===e.property?function resolveDataOptionsConflicts(e,t,n,o){var a=t.getResolvedConflict()||[];s.a.set(e,[t.itemType,"update",n,o,"to",t.optionsKey],a)}(t,e,n,"dataOptions"):s.a.set(t,[e.itemType,"update",n,e.property,"to"],e.getResolvedConflict()))}),"conflict"===o.type&&("update_destroy"===o.conflictType?function resolveUpdateDestroyConflicts(e,t,n){var o;"deleted"===t.type?(o={deleted:!0},s.a.set(e,[t.itemType,"update_destroy",n],o)):"modified"===t.type&&(o=(s.a.get(t,"diff")||[]).reduce(function(e,t){return e[t.property]={from:t.base,to:t.source},e},{}),s.a.set(e,[t.itemType,"update_destroy",n,"diff"],o))}(t,s.a.get(o,"diff.0"),n):"transfer_destroy"===o.conflictType?function resolveTransferDestroyConflcits(e,t,n){var o;"deleted"===t.type?(o={deleted:!0},s.a.set(e,[t.itemType,"transfer_destroy",n],o)):"moved"===t.type&&(o=s.a.get(t,"to"),s.a.set(e,[t.itemType,"transfer_destroy",n,"to"],o))}(t,s.a.get(o,"diff.0"),n):"transfer"===o.conflictType&&s.a.set(t,[o.itemType,"transfer",n,"to"],s.a.get(o,"diff.0.to")))}),t}function OutOfSyncAlert(e){return a.a.createElement(c.Alert,{dismissable:!0,globalAlert:!0,showCta:!0,showIcon:!0,AlertCtaText:"Pull Changes",pmStyle:"warning",onCtaClick:function onCtaClick(){m.s.goToRoute({location:"/collections/".concat(s.a.get(e,"forkedCollection.id"),"/diff")+"?source=".concat(s.a.get(e,"baseCollection.id"),"&pull_changes=true"),target:"parent"}),m.a.recordEvent("initiatePullChanges")}},"The original collection has been modified since you last updated the fork. Weâ€™d recommend pulling changes before continuing.")}var He=function(e){function CollectionDiff(e){var t;return function CollectionDiff_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,CollectionDiff),(t=function CollectionDiff_possibleConstructorReturn(e,t){return!t||"object"!==CollectionDiff_typeof(t)&&"function"!=typeof t?CollectionDiff_assertThisInitialized(e):t}(this,CollectionDiff_getPrototypeOf(CollectionDiff).call(this,e))).onMerge=t.onMerge.bind(CollectionDiff_assertThisInitialized(t)),t}return function CollectionDiff_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&CollectionDiff_setPrototypeOf(e,t)}(CollectionDiff,o["Component"]),function CollectionDiff_createClass(e,t,n){return t&&CollectionDiff_defineProperties(e.prototype,t),n&&CollectionDiff_defineProperties(e,n),e}(CollectionDiff,[{key:"componentDidMount",value:function componentDidMount(){window.pm.actions.getCollectionDiff({baseCollectionId:this.props.baseCollection.id,forkedCollectionId:this.props.forkedCollection.id})}},{key:"componentDidUpdate",value:function componentDidUpdate(e){var t=this.props,n=t.location,o=t.loading;e.loading&&!o&&scrollToHash(n.hash),this.props.loaded&&e.loaded!==this.props.loaded&&(this.props.pullChanges?(m.a.recordEvent("pullChangesDisplayed"),this.props.numberOfConflicts>0&&m.a.recordEvent("conflictsDisplayed",{label:"diff_view_pull"}),s.a.isEmpty(this.props.diff)&&m.a.recordEvent("noChangesViewed")):(m.a.recordEvent("viewDiffView"),this.props.numberOfConflicts>0&&m.a.recordEvent("conflictsDisplayed",{label:"diff_view"})))}},{key:"onMerge",value:function onMerge(){var e,t={baseCollectionId:this.props.baseCollection.id,forkedCollectionId:this.props.forkedCollection.id,workspace:this.props.activeWorkspace,resolved_conflicts:findResolvedConflicts(this.props.diff)},n=this.props.pullChanges,o=this.props.pullRequest,r=this.props.pullRequestCreate,i=this.props.pullRequestEdit;n?window.pm.actions.mergeCollection(CollectionDiff_objectSpread({},t,{pullChanges:!0,pullRequestId:o,pullRequestCreate:r,pullRequestEdit:i})):(e={entity:{type:"collection",name:s.a.get(this.props,"forkedCollection.name","Collection"),id:s.a.get(this.props,"forkedCollection.id")},onConfirm:function onConfirm(e){window.pm.actions.mergeCollection(CollectionDiff_objectSpread({},t,{mergeStrategy:e}))}},window.pm.actions.showModal({children:a.a.createElement(We,e)}))}},{key:"render",value:function render(){var e=this;if(this.props.loading)return a.a.createElement(d.M,null);if(this.props.error)return a.a.createElement(d.C,{description:this.props.error.description,title:this.props.error.title});if(s.a.isEmpty(this.props.diff)){var t=a.a.createElement(c.Button,{pmStyle:"secondary",size:"md",onClick:function onClick(){m.s.goToRoute("workspaces/".concat(e.props.activeWorkspace,"/collections"))}},"Back to collections");return a.a.createElement(o.Fragment,null,this.props.outOfSync&&!this.props.pullChanges&&a.a.createElement(OutOfSyncAlert,this.props),a.a.createElement(d.x,{action:t,body:"This fork has no changes from the destination collection.",className:"workspace__empty",imageSrc:"".concat("https://static.postman.co/img","/activity.svg"),title:"Nothing to merge"}))}return a.a.createElement(o.Fragment,null,this.props.outOfSync&&!this.props.pullChanges&&a.a.createElement(OutOfSyncAlert,this.props),a.a.createElement(diff_Sidebar_Sidebar,{diff:this.props.diff}),a.a.createElement(Topbar_Topbar,{activeWorkspace:this.props.activeWorkspace,baseCollection:this.props.baseCollection,canMergeCollection:m.n.canMergeCollection(this.props.collectionPermissions),forkedCollection:this.props.forkedCollection,hasConflicts:this.props.numberOfConflicts>0,merging:this.props.merging,profilePicUrl:this.props.profilePicUrl,pullChanges:this.props.pullChanges,userId:this.props.userId,userName:this.props.userName,onMerge:this.onMerge}),a.a.createElement(Body,{diff:this.props.diff,updateConflictCount:window.pm.actions.getConflictCount}))}}]),CollectionDiff}();var Ke=Object(i.b)(function CollectionDiff_mapStateToProps(e,t){var n=e.shared.userData,o=e.collection.diff;return{activeWorkspace:s.a.get(t,"location.query.workspace"),profilePicUrl:s.a.get(n,"user.profile_pic_url"),userId:s.a.get(n,"identity.user"),baseCollection:{id:s.a.get(t,"params.id"),name:s.a.get(o,"baseCollectionMeta.name","Collection"),label:s.a.get(o,"baseCollectionMeta.forkName","Origin")},forkedCollection:{id:s.a.get(t,"location.query.source"),name:s.a.get(o,"sourceCollectionMeta.name","Collection"),label:s.a.get(o,"sourceCollectionMeta.forkName","Origin")},collectionPermissions:s.a.get(e,["permissions","collection",t.params.id]),merging:s.a.get(o,"merging"),loading:s.a.get(o,"loading"),loaded:s.a.get(o,"loaded"),pullChanges:s.a.get(t,"location.query.pull_changes"),pullRequest:s.a.get(t,"location.query.pull_request"),pullRequestCreate:s.a.get(t,"location.query.create"),pullRequestEdit:s.a.get(t,"location.query.edit"),error:s.a.get(o,"error"),diff:s.a.get(o,"diff"),outOfSync:s.a.get(o,"outOfSync"),numberOfConflicts:s.a.get(o,"numberOfConflicts",0)}})(He),Qe=n("qPyV"),Ye=n.n(Qe),Ze=n("mwIZ"),Ge=n.n(Ze);function CollectionPullRequests_slicedToArray(e,t){return function CollectionPullRequests_arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function CollectionPullRequests_iterableToArrayLimit(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],o=!0,a=!1,r=void 0;try{for(var i,l=e[Symbol.iterator]();!(o=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);o=!0);}catch(e){a=!0,r=e}finally{try{o||null==l.return||l.return()}finally{if(a)throw r}}return n}(e,t)||function CollectionPullRequests_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function _toConsumableArray(e){return function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function CollectionPullRequests_templateObject(){var e=function CollectionPullRequests_taggedTemplateLiteral(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(['\n  query getPullRequestsForCollection($toId: ID!) {\n    pullRequests(model: "collection", toId: $toId) {\n      id\n      title\n      createdAt\n      updatedAt\n      status\n      createdBy {\n        id\n        name\n      }\n    }\n  }\n']);return CollectionPullRequests_templateObject=function _templateObject(){return e},e}var Je=Object(D.b)(CollectionPullRequests_templateObject()),Xe={open:"secondary",declined:"error",merged:"success"};function PullRequestTitleCell(e){return a.a.createElement("div",{className:"docs-pr-table__title-cell"},a.a.createElement(r.c,{className:"pm-link",to:"/collections/".concat(e.value.collectionId,"/pull-requests/").concat(e.value.id)},e.value.title),a.a.createElement("small",null,a.a.createElement(d.hb,{user:e.value.createdBy})," - ","created on ",m.h.format(e.value.createdAt)))}function PullRequestStatusCell(e){return a.a.createElement(c.Badge,{className:"docs-pr-table__status",pmStyle:Xe[e.value]||"secondary"},e.value)}function PullRequestUpdatedAtCell(e){return a.a.createElement("small",{className:"docs-pr-table__updated"},m.h.format(e.value))}function PullRequestFilters(e){var t=Ye()(e.authors,"id")||[],n=[{label:"All",value:"all"}].concat(_toConsumableArray(t.map(function(e){return{label:e.name,value:e.id}})));return a.a.createElement("div",{className:"docs-pr-filters"},a.a.createElement("label",null,"Filters"),a.a.createElement("label",{className:"docs-pr-filters__label"},"STATUS"),a.a.createElement(c.SelectDropdown,{className:"docs-pr-filters__status",label:"Status",options:[{label:"All",value:"all"},{label:"Open",value:"open"},{label:"Declined",value:"declined"},{label:"Merged",value:"merged"}],value:e.statusFilter,onChange:function onChange(t){e.onStatusFilterChange(t&&t.value)}}),a.a.createElement("label",{className:"docs-pr-filters__label"},"REQUESTER"),a.a.createElement(c.SelectDropdown,{label:"Author",options:n,value:e.authorFilter,onChange:function onChange(t){e.onAuthorFilterChange(t&&t.value)}}))}var et=Object(i.b)(function(e){return{loading:Ge()(e,"collection.meta.loading")}})(function CollectionPullRequests(e){var t=CollectionPullRequests_slicedToArray(Object(o.useState)("open"),2),n=t[0],r=t[1],i=CollectionPullRequests_slicedToArray(Object(o.useState)("all"),2),l=i[0],s=i[1],u=Object(N.c)(Je,{variables:{toId:e.params.id},errorPolicy:"all",fetchPolicy:"network-only"}),p=u.data,f=u.error,h=u.loading,g=p&&p.pullRequests||[],y=g.filter(function(e){var t=!0;return"all"!==n&&(t=e.status===n),"all"!==l&&(t=t&&e.createdBy.id===l),t});return e.loading||h?a.a.createElement(c.Loader,{className:"pm-page-center",pmStyle:"secondary",size:"xl"}):f?a.a.createElement(d.C,{message:Ge()(f,"graphQLErrors[0].message")||"There was an error fetching pull requests."}):Array.isArray(Ge()(p,"pullRequests"))&&!Ge()(p,"pullRequests").length?a.a.createElement(d.x,{body:"There are no pull requests on this collection right now.",className:"push-double",imageSrc:"".concat("https://static.postman.co/img","/activity.svg"),title:"Nothing to show"}):a.a.createElement(d.t,{className:"docs__pull-requests"},a.a.createElement(PullRequestFilters,{authorFilter:l,authors:g.map(function(e){return e.createdBy}),statusFilter:n,onAuthorFilterChange:s,onStatusFilterChange:r}),y&&y.length>0?a.a.createElement(d.ab,{columns:function getPRColumns(e){return[{Header:"Title",Cell:PullRequestTitleCell,id:"title",accessor:function accessor(t){return{title:t.title,createdBy:t.createdBy,createdAt:t.createdAt,id:t.id,updatedAt:t.updatedAt,collectionId:e}}},{Header:"Last Updated",Cell:PullRequestUpdatedAtCell,id:"updatedAt",accessor:"updatedAt",sortable:!0,sortMethod:function sortMethod(e,t){return m.h.dateComparator(e,t,!0)},maxWidth:200},{Header:"Status",Cell:PullRequestStatusCell,sortable:!0,id:"status",accessor:"status",maxWidth:200}]}(e.params.id),data:y,pageSize:y&&y.length}):a.a.createElement(d.x,{body:"Change your filters and try again.",className:"push-double",imageSrc:"".concat("https://static.postman.co/img","/activity.svg"),title:"No pull requests found"}))}),tt=["collection","folder","request","response"];function extractDiff(e,t,n,o,a,r){e[n]||(e[n]={name:t.name||o,diff:[],meta:{method:t.method},type:a,itemType:o}),e[n].diff=e[n].diff.concat(Object(m.p)(o,a,t.diff||t,r))}function handleEntityLevelDiff(e,t,n){["transfer","update_destroy","transfer_destroy"].forEach(function(o){Object.keys(s.a.get(t,[n,o],{})).forEach(function(a){var r=s.a.get(t,[n,o,a],{}),i={},l={},c={name:r.name||n,meta:{method:r.method},conflictType:"source",isSection:!0,itemType:n},u={name:r.name||n,meta:{method:r.method},conflictType:"dest",isSection:!0,itemType:n};"transfer"===o?(i={to:s.a.get(r,"to.source")||{}},l={to:s.a.get(r,"to.dest")||{}}):(i=s.a.get(r,"source")||{},l=s.a.get(r,"dest")||{}),e[a]={name:r.name||n,meta:{method:r.method},diff:[],type:"conflict",isNestedDiff:!0,itemType:n,conflictType:o,resolveConflicts:function resolveConflictFn(t,n){var o=e[t].diff||[];return o=o.filter(function(e){return!e.conflictType||e.conflictType===n}),s.a.unset(o,"0.conflictType"),e[t].diff=o,o}.bind(null,a)},i.deleted&&(c.type="deleted"),l.deleted&&(u.type="deleted"),i.to&&(c.type="moved",c.to=i.to),l.to&&(u.type="moved",u.to=l.to),i.diff&&(c.type="modified",c.diff=Object(m.p)(n,"modified",i.diff,!1)),l.diff&&(u.type="modified",u.diff=Object(m.p)(n,"modified",l.diff,!1)),e[a].diff.push(c),e[a].diff.push(u)})})}function parseCollectionDiff(e,t){var n=s.a.get(t,"data.diff"),o=e.diff||{};return tt.forEach(function(e){Object.keys(s.a.get(n,[e,"create","objs"],{})).forEach(function(t){var a=s.a.get(n,[e,"create","objs",t],{});extractDiff(o,a,t,e,"added")}),Object.keys(s.a.get(n,[e,"update","objs"],{})).forEach(function(t){var a=s.a.get(n,[e,"update","objs",t],{});extractDiff(o,a,t,e,"modified")}),Object.keys(s.a.get(n,[e,"destroy","objs"],{})).forEach(function(t){var a=s.a.get(n,[e,"destroy","objs",t],{});o[t]={name:a.name||e,diff:[],meta:{method:a.method},type:"deleted",itemType:e}}),Object.keys(s.a.get(n,[e,"transfer","objs"],{})).forEach(function(t){var a=s.a.get(n,[e,"transfer","objs",t],{});o[t]={name:a.name||e,meta:{method:a.method},diff:[],to:s.a.get(a,"to",{}),type:"moved",itemType:e}})}),o}function parseCollectionConflict(e,t){var n=s.a.get(t,"data.conflicts"),o=e.diff||{};return tt.forEach(function(e){Object.keys(s.a.get(n,[e,"update"],{})).forEach(function(t){var a=s.a.get(n,[e,"update",t],{});extractDiff(o,a,t,e,"modified",!0)}),handleEntityLevelDiff(o,n,e)}),o}function countChanges(e){var t=0,n=0;return Object.values(e).map(function(e){t+=s.a.get(e,"diff").length,n+=s.a.get(e,"diff").filter(function(e){return!1===e.conflict}).length}),{allChanges:t,changes:n,conflicts:t-n}}function PullRequestDiff_templateObject(){var e=function PullRequestDiff_taggedTemplateLiteral(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    query ($destinationId: ID!, $sourceId: ID!) {\n      collectionDiff(destinationId: $destinationId, sourceId: $sourceId) {\n        diff {\n          collection\n          folder\n          request\n          response\n        }\n        conflicts\n        outOfSync\n      }\n    },\n  "]);return PullRequestDiff_templateObject=function _templateObject(){return e},e}var nt=Object(D.b)(PullRequestDiff_templateObject()),ot="open",at="merged",rt="declined";function PullRequestDiff(e){var t=Object(N.c)(nt,{variables:{destinationId:Ge()(e,"baseCollection.id"),sourceId:Ge()(e,"forkedCollection.id")},skip:!e.editPullRequest,errorPolicy:"all"}),n=t&&t.data,i=t.error||(Ge()(e,"pullRequestErrors.graphQLErrors")||Ge()(e,"pullRequestErrors.networkError")||[]).length>0,l=t.loading;if(e.editPullRequest&&e.setLoadingDiff(l),l)return a.a.createElement(d.M,null);if(i)return a.a.createElement(d.x,{body:Ge()(i,"graphQLErrors[0].message")||"There was an error fetching changes of pull request.",className:"pull-request__fetch-error",imageSrc:"".concat("https://static.postman.co/img","/warning.svg"),title:"Something went wrong"});var s=e.editPullRequest?{data:Ge()(n,"collectionDiff")}:{data:Ge()(e,"pullRequest.changes")},u=parseCollectionDiff({diff:parseCollectionConflict({},s)},s),p=countChanges(u),f=p.allChanges,h=p.changes,g=p.conflicts,y=s.data&&s.data.outOfSync,b=s.data&&s.data.conflicts,v="/collections/".concat(Ge()(e,"forkedCollection.id"),"/diff?")+"source=".concat(Ge()(e,"baseCollection.id"),"&pull_changes=true");if(v=e.editPullRequest?"edit"===e.modifyState?v.concat("&pull_request=".concat(e.pullRequestId,"&edit=true")):v.concat("&create=true"):e.pullRequestId&&v.concat("&pull_request=".concat(e.pullRequestId)),e.editPullRequest&&e.setAllChanges(f),e.pullRequest){if(Ge()(e,"pullRequest.status")===ot&&!Object.keys(u).length)return a.a.createElement(o.Fragment,null,y&&a.a.createElement(c.Alert,{dismissable:!0,globalAlert:!0,showCta:!0,showIcon:!0,AlertCtaText:"Pull from destination",className:"pull-request__pull-changes-alert",pmStyle:"warning",onCtaClick:function onCtaClick(){m.s.goToRoute({location:v,target:"parent"})}},"The original collection has been modified since you last updated the fork. Weâ€™d recommend pulling changes before continuing."),a.a.createElement(d.x,{body:"Your source and destination are identical, so there's nothing to merge.",className:"push-double",imageSrc:"".concat("https://static.postman.co/img","/activity.svg"),title:"No changes to show"}))}else if(!Object.keys(u).length)return a.a.createElement(o.Fragment,null,y&&a.a.createElement(c.Alert,{dismissable:!0,globalAlert:!0,showCta:!0,showIcon:!0,AlertCtaText:"Pull from destination",className:"pull-request__pull-changes-alert",pmStyle:"warning",onCtaClick:function onCtaClick(){m.s.goToRoute({location:v,target:"parent"})}},"The destination has been modified since you last updated the fork. Weâ€™d recommend pulling changes."),a.a.createElement(d.x,{body:"Your source and destination are identical, so there's nothing to merge.",className:"push-double",imageSrc:"".concat("https://static.postman.co/img","/activity.svg"),title:"No changes to show"}));if(Ge()(e,"pullRequest.status")===at||Ge()(e,"pullRequest.status")===rt)return a.a.createElement("p",{className:"push--top"},a.a.createElement("span",{className:"pull-request__status-text"},Ge()(e,"pullRequest.status")," "),"byÂ ",a.a.createElement(d.hb,{currentUserId:Ge()(e,"user.id"),id:Ge()(e,"updatedBy.id"),user:Ge()(e,"pullRequest.updatedBy")}),"Â ",m.h.getRelativeTime(Ge()(e,"pullRequest.updatedAt")),".");var _={centered:!0,disableConflictResolution:!0,diff:u,className:"pull-request__diff-body"};return e.editPullRequest||(_.enableComments=!0,_.commentComponent=d.q,_.commentModelObject=e.pullRequest),a.a.createElement(o.Fragment,null,a.a.createElement("div",{className:"pull-request__pull-changes push-half--bottom"},a.a.createElement("div",{className:"pull-request__diff-items"},a.a.createElement("div",{className:"pull-request__diff-icons"},0!==h&&a.a.createElement(o.Fragment,null,a.a.createElement("span",{className:"pull-request__diff-icons-add"}),a.a.createElement("span",{className:"pull-request__diff-icons-delete"}),a.a.createElement("span",{className:"pull-request__diff-changes push-half--left push-half--right"},h," ",m.t.pluralize("change",h,"s"))),(b||y)&&a.a.createElement(o.Fragment,null,a.a.createElement("span",{className:"pull-request__diff-icons-conflict"}),a.a.createElement("span",{className:"pull-request__diff-conflicts push-half--left"},b?"".concat(g," ").concat(m.t.pluralize("conflict",g,"s")):"Updates in destination"))),(b||y)&&a.a.createElement(o.Fragment,null,a.a.createElement("div",{className:"pull-request__pull-changes-separator push--sides"}),a.a.createElement(r.c,{className:"pm-link pull-request__pull-changes-link",to:v},b?"Resolve Conflicts":"Pull from Destination")))),a.a.createElement(Body,_))}var it=n("Gbth");function UserListItem(e){var t=e.user||{},n=t.name||t.email;return a.a.createElement("li",{className:"pm-invite-list__item"},a.a.createElement(c.UserIcon,{className:"pm-invite-list__icon",size:"sm",url:t.profilePicUrl,userId:t.id}),a.a.createElement("p",{className:"pm-invite-list__email",title:n},n),e.showWarn&&a.a.createElement(d.E,{align:"bottom",className:"pull-request-reviewers__selected-warning",content:e.warningTooltipContent,name:"warning",pmStyle:"warning",size:"sm"}),t.roleName&&t.roleClassName&&a.a.createElement("span",{className:t.roleClassName},t.roleName),!e.hideRemove&&a.a.createElement(c.Button,{className:"pm-invite-list__remove",icon:"close",iconSize:"sm",pmStyle:"alternate",size:"xs",type:"button",onClick:function onClick(){e.onRemove(e.index)}}))}function UserList(e){return Array.isArray(e.list)?!e.list.length&&e.showEmptyText?a.a.createElement("div",{className:"pm-invite-list pm-invite-list__empty"},a.a.createElement("span",{className:"pm-invite-list__empty-text"},e.showEmptyText)):a.a.createElement("ul",{className:"pm-invite-list"},e.list.map(function(t,n){return"string"==typeof t?a.a.createElement(UserListItem,{email:t,hideRemove:t.hideRemove,index:n,key:n,onRemove:e.onRemove}):a.a.createElement(UserListItem,{disableOptions:t.disableOptions,hideRemove:t.hideRemove,index:n,infoTooltipContent:t.infoTooltipContent,key:n,multiSelectOption:e.multiSelectOption,options:!t.hideOptions&&e.options,showInfo:t.showInfo,showWarn:t.showWarn,user:t,warningTooltipContent:t.warningTooltipContent,onRemove:e.onRemove,onUpdate:function onUpdate(t){e.onUpdate(n,t.value)}})})):null}function ReviewerListForm_typeof(e){return(ReviewerListForm_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ReviewerListForm_toConsumableArray(e){return function ReviewerListForm_arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function ReviewerListForm_iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function ReviewerListForm_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ReviewerListForm_defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ReviewerListForm_getPrototypeOf(e){return(ReviewerListForm_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ReviewerListForm_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ReviewerListForm_setPrototypeOf(e,t){return(ReviewerListForm_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var lt=function(e){function ReviewerListForm(e){var t;return function ReviewerListForm_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ReviewerListForm),(t=function ReviewerListForm_possibleConstructorReturn(e,t){return!t||"object"!==ReviewerListForm_typeof(t)&&"function"!=typeof t?ReviewerListForm_assertThisInitialized(e):t}(this,ReviewerListForm_getPrototypeOf(ReviewerListForm).call(this,e))).state={input:"",list:[]},t.bindHandlers(ReviewerListForm_assertThisInitialized(t)),t}return function ReviewerListForm_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ReviewerListForm_setPrototypeOf(e,t)}(ReviewerListForm,o["Component"]),function ReviewerListForm_createClass(e,t,n){return t&&ReviewerListForm_defineProperties(e.prototype,t),n&&ReviewerListForm_defineProperties(e,n),e}(ReviewerListForm,[{key:"bindHandlers",value:function bindHandlers(e){["handleChange","handleKeyPress","handleAdd","handleRemove"].forEach(function(t){e[t]=e[t].bind(e)})}},{key:"handleChange",value:function handleChange(e){this.setState({input:e.target.value})}},{key:"handleKeyPress",value:function handleKeyPress(e){13===e.charCode&&this.handleAdd()}},{key:"handleAdd",value:function handleAdd(){var e=this,t=this.state,n=t.input,o=t.list,a=this.props.maxInputs;!m.t.isEmail(n)||s.a.includes(o,n)||a&&o.length<a&&this.setState(function(e){return{list:[].concat(ReviewerListForm_toConsumableArray(e.list),[n]),input:""}},function(){e.props.onChange(e.state.list)})}},{key:"handleRemove",value:function handleRemove(e){var t=this;this.setState(function(t){return{list:t.list.filter(function(t,n){return n!==e})}},function(){t.props.onChange(t.state.list)})}},{key:"render",value:function render(){return a.a.createElement("div",{className:p()("pm-invite-form",this.props.className)},this.props.inputComponent?this.props.inputComponent:a.a.createElement("div",null,a.a.createElement(c.Field,{className:"pm-invite-form__field",icon:"add",placeholder:this.props.placeholder||"Enter email",size:"md",type:this.props.type||"email",value:this.props.input||this.state.input,onChange:this.props.onInputChange||this.handleChange,onKeyPress:this.props.onInputKeyPress||this.handleKeyPress}),a.a.createElement("a",{className:"pm-link pm-invite-form__add",onClick:this.props.onAdd||this.handleAdd},"Add")),a.a.createElement(UserList,{list:this.props.list||this.state.list,options:this.props.options,showEmptyText:this.props.showEmptyText,onRemove:this.props.onRemove||this.handleRemove,onUpdate:this.props.onUpdate}))}}]),ReviewerListForm}();function PullRequestReviewerForm_typeof(e){return(PullRequestReviewerForm_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function PullRequestReviewerForm_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function PullRequestReviewerForm_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function PullRequestReviewerForm_toConsumableArray(e){return function PullRequestReviewerForm_arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function PullRequestReviewerForm_iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function PullRequestReviewerForm_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function PullRequestReviewerForm_defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function PullRequestReviewerForm_getPrototypeOf(e){return(PullRequestReviewerForm_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function PullRequestReviewerForm_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function PullRequestReviewerForm_setPrototypeOf(e,t){return(PullRequestReviewerForm_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var st="This person can't view the destination collection and will need additional access to merge. You may want to select an alternate reviewer.";function UserDropdownOption(e){var t=e.name||e.username||e.email,n=a.a.createElement(o.Fragment,null,a.a.createElement("strong",null,"No access to collection"),a.a.createElement("br",null),st);return a.a.createElement("div",{className:"pull-request-reviewers__option"},a.a.createElement(c.UserIcon,{url:e.profilePicUrl,userId:e.id}),a.a.createElement("span",{className:"pull-request-reviewers__option-username",title:t},t),e.roleName&&e.roleClassName&&"can't view"===e.roleName?a.a.createElement(c.Tooltip,{align:"right",content:n},function(t){return a.a.createElement("span",{className:e.roleClassName,ref:t.triggerRef,onMouseOut:t.onMouseOut,onMouseOver:t.onMouseOver},e.roleName)}):a.a.createElement("span",{className:e.roleClassName},e.roleName))}function UserDropdown(e){return a.a.createElement("div",{className:"pull-request-reviewers__input",ref:e.setInputRef},a.a.createElement(c.SelectDropdown,{block:!0,searchable:!0,autosize:!1,filterOption:m.x.userFilter,label:e.placeholder||"Enter name or email",labelKey:"name",noResultsText:"No users found",optionRenderer:UserDropdownOption,options:e.options,size:"md",value:e.value,valueKey:"id",onBlurResetsInput:!1,onChange:e.onAdd}),a.a.createElement(c.Icon,{name:e.icon||"add",size:"sm"}))}var ct=function(e){function PullRequestReviewerForm(e){var t;return function PullRequestReviewerForm_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,PullRequestReviewerForm),(t=function PullRequestReviewerForm_possibleConstructorReturn(e,t){return!t||"object"!==PullRequestReviewerForm_typeof(t)&&"function"!=typeof t?PullRequestReviewerForm_assertThisInitialized(e):t}(this,PullRequestReviewerForm_getPrototypeOf(PullRequestReviewerForm).call(this,e))).state=t.getState(e),t.handleAdd=t.handleAdd.bind(PullRequestReviewerForm_assertThisInitialized(t)),t.handleRemove=t.handleRemove.bind(PullRequestReviewerForm_assertThisInitialized(t)),t.handleUpdate=t.handleUpdate.bind(PullRequestReviewerForm_assertThisInitialized(t)),t.setInputRef=t.setInputRef.bind(PullRequestReviewerForm_assertThisInitialized(t)),t}return function PullRequestReviewerForm_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&PullRequestReviewerForm_setPrototypeOf(e,t)}(PullRequestReviewerForm,o["Component"]),function PullRequestReviewerForm_createClass(e,t,n){return t&&PullRequestReviewerForm_defineProperties(e.prototype,t),n&&PullRequestReviewerForm_defineProperties(e,n),e}(PullRequestReviewerForm,[{key:"UNSAFE_componentWillReceiveProps",value:function UNSAFE_componentWillReceiveProps(e){var t=s.a.get(this.props,"users.length")!==s.a.get(e,"users.length");(!s.a.isEqual(this.props.reviewers,e.reviewers)||t)&&this.setState(this.getState(e))}},{key:"getState",value:function getState(e){var t=e.reviewers||[],n=e.users||[],o=t.map(function(e){return"".concat(e.id)});return{users:n.filter(function(e){return o.indexOf("".concat(e.id))<0}),reviewers:t,value:null}}},{key:"handleAdd",value:function handleAdd(e){var t=this;return this.setState(function(t){return{users:t.users.filter(function(t){return t.id!==e.id}),reviewers:[].concat(PullRequestReviewerForm_toConsumableArray(t.reviewers),[e]),value:""}},function(){t.inputRef.querySelector(".Select-input input").blur(),t.props.onChange(t.state.reviewers)})}},{key:"handleRemove",value:function handleRemove(e){var t=this;this.setState(function(t){var n=t.reviewers[e];return{users:[].concat(PullRequestReviewerForm_toConsumableArray(t.users),[s.a.omit(n,"selectedOption")]),reviewers:t.reviewers.filter(function(t,n){return n!==e})}},function(){t.props.onChange(t.state.reviewers)})}},{key:"handleUpdate",value:function handleUpdate(e,t){var n=this;this.setState(function(n){return{reviewers:n.reviewers.map(function(n,o){return o===e?function PullRequestReviewerForm_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?PullRequestReviewerForm_ownKeys(Object(n),!0).forEach(function(t){PullRequestReviewerForm_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PullRequestReviewerForm_ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},n,{selectedOption:t}):n})}},function(){n.props.onChange(n.state.reviewers)})}},{key:"setInputRef",value:function setInputRef(e){this.inputRef=e}},{key:"render",value:function render(){return a.a.createElement(lt,{className:"pull-request-reviewers",inputComponent:a.a.createElement(UserDropdown,{icon:this.props.icon,options:this.state.users,placeholder:this.props.placeholder,setInputRef:this.setInputRef,value:this.state.value,onAdd:this.handleAdd}),list:this.state.reviewers||[],showEmptyText:this.props.showEmptyText,onRemove:this.handleRemove,onUpdate:this.handleUpdate})}}]),PullRequestReviewerForm}();function PullRequestEdit_slicedToArray(e,t){return function PullRequestEdit_arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function PullRequestEdit_iterableToArrayLimit(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],o=!0,a=!1,r=void 0;try{for(var i,l=e[Symbol.iterator]();!(o=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);o=!0);}catch(e){a=!0,r=e}finally{try{o||null==l.return||l.return()}finally{if(a)throw r}}return n}(e,t)||function PullRequestEdit_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function PullRequestEdit_toConsumableArray(e){return function PullRequestEdit_arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function PullRequestEdit_iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function PullRequestEdit_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function PullRequestEdit_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function PullRequestEdit_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?PullRequestEdit_ownKeys(Object(n),!0).forEach(function(t){PullRequestEdit_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PullRequestEdit_ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function PullRequestEdit_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function PullRequestEdit_templateObject4(){var e=PullRequestEdit_taggedTemplateLiteral(['\n    query {\n      sourceCollection: collection(id: "','") {\n        id\n        name\n        forkedFrom: fork {\n          id\n          forkName: label\n        }\n      }\n      destinationCollection: collection(id: "','") {\n        id\n        name\n        forkedFrom: fork {\n          id\n          forkName: label\n        }\n        roles {\n          users {\n            id\n            roles {\n              name\n            }\n          }\n          team {\n            id\n            roles {\n              name\n            }\n          }\n        }\n      }\n    }\n  ']);return PullRequestEdit_templateObject4=function _templateObject4(){return e},e}function PullRequestEdit_templateObject3(){var e=PullRequestEdit_taggedTemplateLiteral(['\n      query {\n        pullRequest(id: "','") {\n          id\n          title\n          description\n          reviewers {\n            user {\n              id\n              name\n              email\n              profilePicUrl: avatar\n            }\n          }\n          from {\n            id\n            name\n            forkedFrom: fork {\n              id\n              forkName: label\n            }\n          }\n          to {\n            id\n            name\n            forkedFrom: fork {\n              id\n              forkName: label\n            }\n            roles {\n              users {\n                id\n                roles {\n                  name\n                }\n              }\n              team {\n                id\n                roles {\n                  name\n                }\n              }\n            }\n          }\n        }\n      }\n    ']);return PullRequestEdit_templateObject3=function _templateObject3(){return e},e}function PullRequestEdit_templateObject2(){var e=PullRequestEdit_taggedTemplateLiteral(["\n  mutation updatePR(\n    $id: ID!,\n    $title: String!,\n    $reviewers: [ID!]!,\n    $description: String\n  ) {\n    updatePullRequest (\n      id: $id,\n      title: $title,\n      reviewers: $reviewers,\n      description: $description\n    ) {\n      id\n    }\n  }\n"]);return PullRequestEdit_templateObject2=function _templateObject2(){return e},e}function PullRequestEdit_templateObject(){var e=PullRequestEdit_taggedTemplateLiteral(['\n  mutation createPR(\n    $fromId: ID!,\n    $toId: ID!,\n    $title: String!,\n    $reviewers: [ID!]!,\n    $description: String\n  ) {\n    createPullRequest (\n      model: "collection",\n      fromId: $fromId,\n      toId: $toId,\n      title: $title,\n      reviewers: $reviewers,\n      description: $description\n    ) {\n      id\n    }\n  }\n']);return PullRequestEdit_templateObject=function _templateObject(){return e},e}function PullRequestEdit_taggedTemplateLiteral(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var ut=Object(D.b)(PullRequestEdit_templateObject()),pt=Object(D.b)(PullRequestEdit_templateObject2()),dt="To merge your request, this user will have to request Editor access for the destination collection.";function pickTeamUsers(e,t){var n={};return(t||[]).forEach(function(t){var o=e[t];o&&(n[t]=PullRequestEdit_objectSpread({},o,{profilePicUrl:o.profile_pic_url}))}),n}function getUsersByRolesOnDestinationCollection(e,t,n){var o=s()(t).filter(function(e){return(e&&e.roles||[]).includes("user")}).map("id").value();return function segregateUsersBasedOnRoles(e,t,n,o){var a={canEdit:{},canOnlyView:{},noPermission:{}},r=[],i=[],l=[];if(s.a.has(n,["team",e])){var c=n.team[e]||"";"COLLECTION_EDITOR"===c?a.canEdit=pickTeamUsers(t,o):"COLLECTION_VIEWER"===c&&(s.a.forEach(n.user,function(e,t){"COLLECTION_EDITOR"===e&&r.push(t)}),i=s.a.pull.apply(s.a,[o].concat(r)),a.canEdit=pickTeamUsers(t,r),a.canOnlyView=pickTeamUsers(t,i))}else s.a.forEach(n.user,function(e,t){"COLLECTION_EDITOR"===e?r.push(t):"COLLECTION_VIEWER"===e&&i.push(t)}),l=s.a.pull.apply(s.a,[Object.keys(t||{})].concat(PullRequestEdit_toConsumableArray(s.a.union(r,i)))),a.canEdit=pickTeamUsers(t,r),a.canOnlyView=pickTeamUsers(t,i),a.noPermission=pickTeamUsers(t,l);return a}(e,t,function transformCollectionRoles(e){var t={user:{},team:{}};return e&&e.users&&e.users.forEach(function(e){t.user[e.id]=s.a.get(e,["roles","0","name"])}),e&&e.team&&e.team.id&&(t.team[e.team.id]=s.a.get(e.team,["roles","0","name"])),t}(n),o)}function PullRequestForm(e){var t=getUsersByRolesOnDestinationCollection(e.teamId,e.teamUsers,e.destinationCollectionRoles),n=function flattenUsers(e){var t=function userSortComparator(e,t){return(e.name||e.username||e.email||"").toUpperCase()>(t.name||t.username||t.email).toUpperCase()?1:-1};return["canEdit","canOnlyView","noPermission"].flatMap(function(n){return"canEdit"===n?Object.values(e[n]||{}).sort(t):"canOnlyView"===n?Object.values(e[n]||{}).map(function(e){return PullRequestEdit_objectSpread({},e,{roleName:"can't merge",roleClassName:"pull-request-reviewers__option-permission"})}).sort(t):Object.values(e[n]||{}).map(function(e){return PullRequestEdit_objectSpread({},e,{disabled:!0,className:"pull-request-reviewers__option-disabled",roleName:"can't view",roleClassName:"pull-request-reviewers__option-permission"})}).sort(t)})}(t),o=function assignRoleToReviewers(e,t){return(e||[]).map(function(e){return(t&&t.canEdit||{})[e.id]?e:PullRequestEdit_objectSpread({},e,{showWarn:!0,warningTooltipContent:dt,roleName:"can't merge",roleClassName:"pull-request-reviewers__selected-permission"})})}(e.reviewers,t);return a.a.createElement("div",{className:"pull-request-edit__form"},a.a.createElement("label",{className:"push-one-half--top"},"Title"),a.a.createElement(c.Field,{message:"string"!=typeof e.title||e.title.trim()?null:"Please enter a title",size:"md",status:"string"!=typeof e.title||e.title.trim()?null:"error",value:e.title||"",onChange:function onChange(t){e.onTitleChange(t.target.value)}}),a.a.createElement("label",{className:"push--top"},"Description"),a.a.createElement("p",null,"Give a brief summary of the major changes â€“ your reviewers will thank you for it."),a.a.createElement(c.TextArea,{placeholder:"Descriptions support Markdown",value:e.description||"",onChange:function onChange(t){e.onDescriptionChange(t.target.value)}}),a.a.createElement("label",{className:"push--top"},"Reviewers"),a.a.createElement("p",null,"Select up to 3."),a.a.createElement(ct,{icon:"search",placeholder:"Find a reviewer",reviewers:o,showEmptyText:"No reviewers yet",users:n||[],onChange:e.onReviewersChange}),o.length>3&&a.a.createElement("small",{className:"pull-request-edit__max-reviewers"},"You can only add upto 3 reviewers."),a.a.createElement("div",{className:"pull-request-edit__actions"},a.a.createElement(c.Button,{disabled:e.loading,loading:e.loading,pmStyle:"primary",size:"md",onClick:e.onConfirm},"create"===e.modifyState?"Create Pull Request":"Save Changes"),a.a.createElement(c.Button,{className:"push-half--left",pmStyle:"secondary",size:"md",onClick:function onClick(){window.pm.actions.goBack()}},"Cancel")))}var mt=Object(i.b)(function(e){return{teamUsers:s.a.get(e,"shared.team.users.byId",{})}})(function PullRequestEdit(e){var t=e.location.query.source,n=e.params.id,r=e.params.prId,i=Object(o.useContext)(it.a),l=PullRequestEdit_slicedToArray(Object(o.useState)(null),2),u=l[0],p=l[1],f=PullRequestEdit_slicedToArray(Object(o.useState)([]),2),h=f[0],g=f[1],y=PullRequestEdit_slicedToArray(Object(o.useState)(null),2),b=y[0],v=y[1],_=PullRequestEdit_slicedToArray(Object(o.useState)(0),2),C=_[0],E=_[1],w=PullRequestEdit_slicedToArray(Object(o.useState)(!1),2),O=w[0],P=w[1],k=Object(N.c)(function getPRQuery(e,t,n){return n?Object(D.b)(PullRequestEdit_templateObject3(),n):Object(D.b)(PullRequestEdit_templateObject4(),e,t)}(t,n,r)),S=k.loading,T=k.data,I=k.error,j=PullRequestEdit_slicedToArray(Object(N.b)(ut,{onCompleted:function onCompleted(e){m.s.goToRoute("/collections/".concat(n,"/pull-requests/").concat(e.createPullRequest.id))},onError:function onError(e){var t=e.graphQLErrors;m.a.recordEvent("failedPRCreate"),window.pm.actions.showToast({type:"error",title:s.a.get(t,"[0].extensions.title")||"Something went wrong",body:s.a.get(t,"[0].message")||"Please try again after some time."})}}),2),R=j[0],A=j[1],q=PullRequestEdit_slicedToArray(Object(N.b)(pt,{onCompleted:function onCompleted(e){m.s.goToRoute("/collections/".concat(n,"/pull-requests/").concat(e.updatePullRequest.id))},onError:function onError(e){var t=e.graphQLErrors;m.a.recordEvent("failedPREdit"),window.pm.actions.showToast({type:"error",title:s.a.get(t,"[0].extensions.title")||"Something went wrong",body:s.a.get(t,"[0].message")||"Please try again after some time."})}}),2),M=q[0],x=q[1];if(Object(o.useEffect)(function(){var e=r?"Edit":"Create";document.title=e+" Pull Request"},[]),Object(o.useEffect)(function(){r&&T&&T.pullRequest&&(p(T.pullRequest.title),v(T.pullRequest.description),g(T.pullRequest.reviewers.map(function(e){return e.user})))},[S,T,I,r]),S)return a.a.createElement(d.M,null);if(I)return a.a.createElement(d.C,{description:s.a.get(I,"graphQLErrors[0].message")||"There was an error fetching pull request."});var L=r?T.pullRequest.to:T.destinationCollection,F=r?T.pullRequest.from:T.sourceCollection;return a.a.createElement(d.t,{className:"pull-request-edit push-one-half--top"},a.a.createElement("h1",{className:"pm-h1"},r?"Edit":"Create"," pull request"),a.a.createElement(d.X,{baseCollection:L,className:"pull-request-edit__source-destination-label",forkedCollection:F}),a.a.createElement(c.Tabs,{defaultActiveRefKey:"overview",pmStyle:"primary"},a.a.createElement(c.TabList,null,a.a.createElement(c.Tab,{refKey:"overview"},"Overview"),a.a.createElement(c.Tab,{refKey:"changes"},"Changes",O?a.a.createElement(c.Loader,{pmStyle:"secondary"}):a.a.createElement(c.Badge,{className:"pull-request__changes-count",pmStyle:"secondary",size:"xs"},C))),a.a.createElement(c.PaneList,null,a.a.createElement(c.Pane,{refKey:"overview"},a.a.createElement(PullRequestForm,{description:b,destinationCollectionRoles:L&&L.roles||{},loading:A.loading||x.loading,modifyState:r?"edit":"create",reviewers:h,teamId:i.teamId,teamUsers:e.teamUsers,title:u,onConfirm:function handleConfirm(){if(r)return m.a.recordEvent("initiatePREdit",{entityId:r}),void M({variables:{id:r,title:u||"",description:b,reviewers:h.map(function(e){return e.id})}});m.a.recordEvent("initiatePRCreate"),R({variables:{toId:n,fromId:t,title:u||"",description:b,reviewers:h.map(function(e){return e.id})}})},onDescriptionChange:v,onReviewersChange:g,onTitleChange:p})),a.a.createElement(c.Pane,{refKey:"changes"},a.a.createElement(PullRequestDiff,{editPullRequest:!0,baseCollection:L,forkedCollection:F,modifyState:r?"edit":"create",pullRequestId:r,setAllChanges:E,setLoadingDiff:P})))))}),ft={merged:"Merged",declined:"Declined"};function PullRequestMeta(e){return a.a.createElement("div",{className:"pull-request-meta"},a.a.createElement("section",{className:"pull-request-meta__section"},a.a.createElement("span",{className:"pull-request-meta__section-header"},"Author"),a.a.createElement(d.eb,{linkToProfile:!0,className:"push--bottom",id:Ge()(e,"pullRequest.createdBy.id"),name:Ge()(e,"pullRequest.createdBy.name"),profilePicUrl:Ge()(e,"pullRequest.createdBy.avatar"),size:"xs",userClassName:"pull-request-user"})),a.a.createElement("section",{className:"pull-request-meta__section"},a.a.createElement("span",{className:"pull-request-meta__section-header"},"Created on"),a.a.createElement("p",{className:"push-half--top"},m.h.format(Ge()(e,"pullRequest.createdAt"),!0))),a.a.createElement("section",{className:"pull-request-meta__section"},a.a.createElement("span",{className:"pull-request-meta__section-header"},"open"===Ge()(e,"pullRequest.status")?"Last updated":"".concat(ft[Ge()(e,"pullRequest.status")]," by")),ft[Ge()(e,"pullRequest.status")]?a.a.createElement("div",{className:"push-half--top"},a.a.createElement(d.eb,{linkToProfile:!0,className:"push--bottom",id:Ge()(e,"pullRequest.updatedBy.id"),name:Ge()(e,"pullRequest.updatedBy.name"),profilePicUrl:Ge()(e,"pullRequest.updatedBy.avatar"),size:"xs",userClassName:"pull-request-user"})):a.a.createElement("p",{className:"push-half--top"},m.h.getRelativeTime(Ge()(e,"pullRequest.updatedAt")))),a.a.createElement("section",{className:"pull-request-meta__section"},a.a.createElement("span",{className:"pull-request-meta__section-header"},"Reviewers"),(Ge()(e,"pullRequest.reviewers")||[]).length?a.a.createElement("ul",{className:"pull-request-reviewers-list"},(Ge()(e,"pullRequest.reviewers")||[]).map(function(e){var t=e.user;return a.a.createElement("li",{className:"pull-request-reviewer",key:t.id},a.a.createElement(d.eb,{linkToProfile:!0,className:"push--bottom",id:t.id,name:t.name,profilePicUrl:t.avatar,size:"xs",userClassName:"pull-request-user"}))})):a.a.createElement("p",{className:"pull-request-reviewer-empty"},"No reviewers")))}function PullRequestOverview(e){var t=Ge()(e,"pullRequest.status"),n="merged"===t||"declined"===t,r=a.a.createElement("p",{className:"push-half--left push-half--top"},"merged"===t?"Merged ":"Declined ","byÂ ",a.a.createElement(d.hb,{user:Ge()(e,"pullRequest.updatedBy.name")}),"Â ",m.h.getRelativeTime(Ge()(e,"pullRequest.updatedAt")),".");return a.a.createElement(o.Fragment,null,n&&a.a.createElement(c.Alert,{className:"pull-request__status-alert pull-request__status-alert-".concat(t," push--ends"),iconName:"merged"===t?"success":"close-big",pmStyle:"merged"===t?"success":"error"},r),(Ge()(e,"pullRequest.description")||"").trim()?a.a.createElement(d.Q,{className:"pull-request-description pm-markdown",source:Ge()(e,"pullRequest.description")}):a.a.createElement("p",{className:"pull-request-description pull-request-description-empty"},"No description provided."),a.a.createElement(PullRequestMeta,e))}function DeclineModal(e){return a.a.createElement(c.Card,{className:"pull-request-decline pm-card pm-modal-confirm"},a.a.createElement("h3",{className:"pm-h3"},e.title),a.a.createElement(c.Button,{className:"pull-request-decline__close",icon:"close-big",pmStyle:"alternate",size:"sm",onClick:window.pm.actions.hideModal}),a.a.createElement("hr",{className:"push--ends"}),a.a.createElement("div",null,a.a.createElement("p",{className:"pull-request-decline__text"},"This cannot be undone."),a.a.createElement("p",{className:"pull-request-decline__text"},"To request edits or leave feedback, add a comment instead.")),a.a.createElement(c.FormActions,{cancelText:"Comment",className:"push-double--top",confirmButtonClass:"pull-request-decline__confirm",confirmButtonStyle:"error",confirmText:"Decline Request",size:"md",onCancel:function onCancel(){window.pm.actions.hideModal(),e.showComments(!0)},onConfirm:function onConfirm(){e.declinePullRequest({variables:{id:"".concat(Ge()(e,"pullRequest.id"))}}),window.pm.actions.hideModal()}}))}function PullRequest_slicedToArray(e,t){return function PullRequest_arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function PullRequest_iterableToArrayLimit(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],o=!0,a=!1,r=void 0;try{for(var i,l=e[Symbol.iterator]();!(o=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);o=!0);}catch(e){a=!0,r=e}finally{try{o||null==l.return||l.return()}finally{if(a)throw r}}return n}(e,t)||function PullRequest_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function PullRequest_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function PullRequest_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?PullRequest_ownKeys(Object(n),!0).forEach(function(t){PullRequest_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PullRequest_ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function PullRequest_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function PullRequest_extends(){return(PullRequest_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function PullRequest_templateObject3(){var e=PullRequest_taggedTemplateLiteral(["\n    mutation ($id: ID!, $mergeStrategy: String) {\n      mergePullRequest(id: $id, mergeStrategy: $mergeStrategy) {\n        id\n        status\n        updatedAt\n        updatedBy {\n          id\n          name\n          username\n          email\n          avatar\n        }\n      }\n    }\n  "]);return PullRequest_templateObject3=function _templateObject3(){return e},e}function PullRequest_templateObject2(){var e=PullRequest_taggedTemplateLiteral(["\n    mutation ($id: ID!) {\n      declinePullRequest(id: $id) {\n        id\n        status\n        updatedAt\n        updatedBy {\n          id\n          name\n          username\n          email\n          avatar\n        }\n      }\n    }\n  "]);return PullRequest_templateObject2=function _templateObject2(){return e},e}function PullRequest_templateObject(){var e=PullRequest_taggedTemplateLiteral(["\n    query ($id: ID!) {\n      pullRequest (id: $id) {\n        id\n        model\n        title\n        description\n        status\n        from {\n          id\n          name\n          forkedFrom: fork {\n            id\n            forkName: label\n          }\n        }\n        to {\n          id\n          name\n          forkedFrom: fork {\n            id\n            forkName: label\n          }\n        }\n        reviewers {\n          user {\n            id\n            name\n            username\n            email\n            avatar\n          }\n        }\n        mergeStrategies {\n          name\n          label: displayName\n          description\n          allowed\n        }\n        changes {\n          diff {\n            collection\n            folder\n            request\n            response\n          }\n          conflicts\n          outOfSync\n        }\n        createdAt\n        createdBy {\n          id\n          name\n          username\n          email\n          avatar\n        }\n        updatedAt\n        updatedBy {\n          id\n          name\n          username\n          email\n          avatar\n        }\n      }\n    }\n  "]);return PullRequest_templateObject=function _templateObject(){return e},e}function PullRequest_taggedTemplateLiteral(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var ht="edit",gt="decline",yt="merge",bt="comments",vt=Object(D.b)(PullRequest_templateObject()),_t=Object(D.b)(PullRequest_templateObject2()),Ct=Object(D.b)(PullRequest_templateObject3());function getParsedDiff(e){var t={data:e};return parseCollectionDiff({diff:parseCollectionConflict({},t)},t)}function handleActions(e,t){switch(e){case ht:m.s.goToRoute("".concat(t.pathname,"/edit"));break;case gt:window.pm.actions.showModal({children:a.a.createElement(DeclineModal,{declinePullRequest:t.declinePullRequest,pullRequest:t.pullRequest,showComments:t.setShowComments,title:"Decline request ?"})});break;case yt:window.pm.actions.showModal({children:a.a.createElement(We,PullRequest_extends({},t.mergeModalProps,{changes:t.changes,mergePullRequest:t.mergePullRequest}))});break;case bt:t.setShowComments(!0);break;default:window.pm.actions.ravenCapture({message:"Invalid workspace api action",extra:PullRequest_objectSpread({},e)})}}function PullRequestActions(e){var t,n="open"===Ge()(e,"pullRequest.status"),o=[{label:"Comments",value:bt},{label:"Edit",value:ht},{label:"Decline",value:gt},{label:"Approve and Merge",value:yt}];return Ge()(e,"pullRequest.changes.conflicts")?t="Resolve conflicts to merge.":Object.keys(e.parsedDiff).length||(t="There are no changes to merge."),n?a.a.createElement("div",{className:"pull-request-topbar__actions"},a.a.createElement(c.Button,{className:"pull-request-topbar__action-btn ",icon:"comment",pmStyle:"alternate",onClick:function onClick(){handleActions(bt,e)}},"Comments"),a.a.createElement(c.Button,{className:"pull-request-topbar__action-btn ",disabled:Ge()(e,"decline.loading")||Ge()(e,"merge.loading"),pmStyle:"secondary",onClick:function onClick(){handleActions(ht,e)}},"Edit"),a.a.createElement(c.Button,{className:"pull-request-topbar__action-btn ",disabled:Ge()(e,"decline.loading")||Ge()(e,"merge.loading"),pmStyle:"secondary",onClick:function onClick(){handleActions(gt,e)}},Ge()(e,"decline.loading")?a.a.createElement(c.Loader,{pmStyle:"secondary"}):"Decline"),a.a.createElement(c.Tooltip,{align:"bottom",content:t,show:Ge()(e,"pullRequest.changes.conflicts")||!Object.keys(e.parsedDiff).length},function(t){return a.a.createElement("span",{ref:t.triggerRef,onMouseOut:t.onMouseOut,onMouseOver:t.onMouseOver},a.a.createElement(c.Button,{className:"pull-request-topbar__action-btn ",disabled:function allowMerge(e){return Ge()(e,"decline.loading")||Ge()(e,"merge.loading")||Ge()(e,"pullRequest.changes.conflicts")||!Object.keys(getParsedDiff(Ge()(e,"pullRequest.changes"))).length||!(Ge()(e,"pullRequest.mergeStrategies")||[]).map(function(e){return e.allowed}).some(Boolean)}(e),pmStyle:"primary",size:"sm",onClick:function onClick(){handleActions(yt,e)}},Ge()(e,"merge.loading")?a.a.createElement(c.Loader,null):"Approve and Merge"))}),a.a.createElement(c.MoreOptionsDropdown,{className:"pull-request-topbar__more-options",options:o,onChange:function onChange(t){t&&handleActions(t.value,e)}})):a.a.createElement("div",{className:"pull-request-topbar__actions-comment-only"},a.a.createElement(c.Button,{className:"pull-request-topbar__action-btn-comment",icon:"comment",pmStyle:"alternate",onClick:function onClick(){handleActions(bt,e)}},"Comments"))}var Et=a.a.createElement(r.e,null,a.a.createElement(r.e,{component:Object(d.nb)(C),path:"collections"},a.a.createElement(r.a,{to:"/workspaces"}),a.a.createElement(r.e,{path:":id"},a.a.createElement(r.b,{component:Object(d.nb)(Ee)}),a.a.createElement(r.e,{component:Object(d.nb)(ze),path:"monitors"}),a.a.createElement(r.e,{component:Object(d.nb)(Se),path:"activity"}),a.a.createElement(r.e,{component:Object(d.nb)(Fe),path:"mocks"}),a.a.createElement(r.e,{component:Object(d.nb)(et),path:"pull-requests"}))),a.a.createElement(r.e,{component:Object(d.nb)(mt),path:"/collections/:id/pull-requests/create"}),a.a.createElement(r.e,{path:"/collections/:id/pull-requests/:prId"},a.a.createElement(r.b,{component:Object(d.nb)(function PullRequest(e){var t,n=PullRequest_slicedToArray(Object(o.useState)(!1),2),r=n[0],i=n[1],l="secondary",s=Ge()(e.location,"query.view"),u=(Ge()(e,"location.pathname")||[]).split("/")[4],p=Object(o.useContext)(it.a);Object(o.useEffect)(function(){(!s||"overview"!==s&&"diff"!==s)&&m.s.setQueryParams(e.location,{view:"overview"},!0),document.title="Pull Request Overview"},[]);var f=Object(N.c)(vt,{variables:{id:u},errorPolicy:"all",fetchPolicy:"network-only",onError:function onError(){m.a.recordEvent("failedPRView")}}),h=f.data&&f.data.pullRequest,g=f.error,y=f.loading,b=getParsedDiff(h&&h.changes),v=countChanges(b).allChanges,_=a.a.createElement("span",null,a.a.createElement("strong",null,Ge()(h,"from.name")),a.a.createElement(d.l,{className:"diff-entity__fork-label",collection:Ge()(h,"from")})," has been merged into ",a.a.createElement("strong",null,Ge()(h,"to.name")),a.a.createElement(d.l,{className:"diff-entity__fork-label",collection:Ge()(h,"to")}),".");"merged"===Ge()(h,"status")?l="success":"declined"===Ge()(h,"status")&&(l="error");var C=PullRequest_slicedToArray(Object(N.b)(_t,{update:function update(e,t){var n=t.data,o=e.readQuery({query:vt,variables:{id:u}});o.pullRequest.updatedAt=n.declinePullRequest.updatedAt,o.pullRequest.updatedBy=n.declinePullRequest.updatedBy,e.writeQuery({query:vt,variables:{id:u},data:o})},onCompleted:function onCompleted(){window.pm.actions.showToast({type:"success",title:"PR declined",body:"Declined PRs cannot be reopened."})},onError:function onError(e){var t=e.graphQLErrors;window.pm.actions.showToast({type:"error",title:Ge()(t,"[0].extensions.title")||"Unable to decline",body:Ge()(t,"[0].message")||"There was an error declining pull request"})}}),2),E=C[0],w=C[1],O=PullRequest_slicedToArray(Object(N.b)(Ct,{update:function update(e,t){var n=t.data,o=e.readQuery({query:vt,variables:{id:u}});o.pullRequest.updatedAt=n.mergePullRequest.updatedAt,o.pullRequest.updatedBy=n.mergePullRequest.updatedBy,e.writeQuery({query:vt,variables:{id:u},data:o})},onCompleted:function onCompleted(){window.pm.actions.hideModal(),window.pm.actions.showToast({type:"success",title:"PR merged",body:_})},onError:function onError(e){var t=e.graphQLErrors;window.pm.actions.showToast({type:"error",title:Ge()(t,"[0].extensions.title")||"Unable to merge",body:Ge()(t,"[0].message")||"There was an error merging pull request"})}}),2),P=O[0],k=O[1];return t={entity:{type:"collection",name:Ge()(h,"from.name"),id:Ge()(h,"from.id")},mergeStrategies:h&&h.mergeStrategies,onConfirm:function onConfirm(e){P({variables:{id:h.id,mergeStrategy:e}}),window.pm.actions.hideModal()}},y?a.a.createElement(c.Loader,{className:"pm-page-center",pmStyle:"secondary",size:"xl"}):g&&!h?a.a.createElement(d.x,{body:Ge()(g,"graphQLErrors[0].message")||"There was an error fetching pull request.",className:"pull-request__fetch-error",imageSrc:"".concat("https://static.postman.co/img","/warning.svg"),title:"Something went wrong"}):a.a.createElement(d.t,null,a.a.createElement("div",{className:"pull-request-topbar"},a.a.createElement("h1",{className:"pull-request__title"},h&&h.title),a.a.createElement(c.Badge,{className:"pull-request__status",pmStyle:l,size:"xs"},h&&h.status),a.a.createElement(d.X,{baseCollection:h&&h.to,className:"pull-request__source-destination-label",forkedCollection:h&&h.from}),a.a.createElement(PullRequestActions,{changes:v,decline:w,declinePullRequest:E,merge:k,mergeModalProps:t,mergePullRequest:P,parsedDiff:b,pathname:e.location.pathname,pullRequest:h,setShowComments:i})),r&&a.a.createElement(d.q,{commentClassName:"pull-request-comments",commentType:"sidebar",containerClassName:"pull-request-comments__drawer",model:"pullRequest",modelId:h.id,showComments:r,title:h.title,onToggleComments:i}),a.a.createElement(c.ControlledTabs,{activeRefKey:s,pmStyle:"primary",onChangeTab:function onChangeTab(t){var n=e.location,o=m.w.populateParams(PullRequest_objectSpread({},n.query,{view:t}));m.s.goToRoute("".concat(e.location.pathname).concat(o))}},a.a.createElement(c.TabList,null,a.a.createElement(c.Tab,{refKey:"overview"},"Overview"),a.a.createElement(c.Tab,{refKey:"diff"},"Changes",h&&"open"===h.status&&a.a.createElement(c.Badge,{className:"pull-request__changes-count",pmStyle:"secondary",size:"xs"},v)))),"overview"===s?a.a.createElement(PullRequestOverview,{pullRequest:h}):a.a.createElement(PullRequestDiff,{baseCollection:h&&h.to,currentUser:p,forkedCollection:h&&h.from,pullRequest:h,pullRequestErrors:g,pullRequestId:u}))})}),a.a.createElement(r.e,{component:Object(d.nb)(mt),path:"edit"})),a.a.createElement(r.e,{component:Object(d.nb)(qe),path:"/collections/:id/publish"}),a.a.createElement(r.e,{component:Object(d.nb)(Ke),path:"/collections/:id/diff"}));t.default=Et}}]);